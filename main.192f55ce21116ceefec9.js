!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/player1/",n(n.s=37)}([function(t,e,n){"use strict";e.a={dtCoefficient:.001,shuttleRotation:4,shuttleAcceleration:400,shuttleMaxVelocity:600,bulletVelocity:1e3,bulletDecay:1300,newRockChance:.4,newCrystalChance:.4,rockVelocityDist:{mu:75,sigma:20},rockSizeDist:{mu:2,sigma:.25},rockSpinSpeed:1,rockRicochet:200,initTimeLimit:1,initBalance:0,backgroundColor:"#231f20",viewbox:{width:2436,height:1125},keyBindings:{32:"fire",38:"accelerate",37:"turnLeft",40:null,39:"turnRight",87:"accelerate",65:"turnLeft",83:null,68:"turnRight"},mouseBindings:{move:"focus",click:"accelerate",middleClick:null,rightClick:"fire"},actionIntervals:{fire:750,focus:100},serverUrl:"wss://player1-server.herokuapp.com/",serverGameExpiration:1e4}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return o}));var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callbacks=new Set,this.onceCallbacks=new WeakSet}var e,n,o;return e=t,(n=[{key:"on",value:function(t){return this.callbacks.add(t),this}},{key:"once",value:function(t){return this.onceCallbacks.add(t),this.on(t)}},{key:"trigger",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.on((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.emit.apply(t,n.concat(r))}))}},{key:"until",value:function(t,e){var n=this;return t.once((function(){return n.callbacks.delete(e)})),this.on(e)}},{key:"emit",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=this.onceCallbacks;return this.callbacks.forEach((function(e){o.has(e)&&t.callbacks.delete(e),e.apply(void 0,n)})),this}}])&&r(e.prototype,n),o&&r(e,o),t}()},function(t,e,n){"undefined"==typeof DEBUG&&(DEBUG=!0);var r=n(13),o=n(14),i=n(15),a=n(39);function s(t){if(!(this instanceof s))return i.fn(t)?s.app.apply(s,arguments):i.object(t)?s.atlas.apply(s,arguments):t;r.create++;for(var e=0;e<c.length;e++)c[e].call(this)}r.create=0;var c=[];s._init=function(t){c.push(t)};var u=[];s._load=function(t){u.push(t)};var l={};s.config=function(){if(1===arguments.length&&i.string(arguments[0]))return l[arguments[0]];1===arguments.length&&i.object(arguments[0])&&o(l,arguments[0]),2===arguments.length&&i.string(arguments[0])&&(arguments[0],arguments[1])};var f=[],h=[],g=!1,p=!1;s.app=function(t,e){if(g){DEBUG&&console.log("Creating app...");var n=s.config("app-loader");n((function(e,n){DEBUG&&console.log("Initing app...");for(var r=0;r<u.length;r++)u[r].call(this,e,n);t(e,n),h.push(e),DEBUG&&console.log("Starting app..."),e.start()}),e)}else f.push(arguments)};var d=a();s.preload=function(t){if("string"==typeof t){var e=s.resolve(t);/\.js($|\?|\#)/.test(e)&&(DEBUG&&console.log("Loading script: "+e),t=function(t){!function(t,e){var n=document.createElement("script");n.addEventListener("load",(function(){e()})),n.addEventListener("error",(function(n){e(n||"Error loading script: "+t)})),n.src=t,n.id="preload-"+Date.now(),document.body.appendChild(n)}(e,t)})}"function"==typeof t&&t(d())},s.start=function(t){DEBUG&&console.log("Starting..."),s.config(t),d.then((function(){for(DEBUG&&console.log("Loading apps..."),g=!0;f.length;){var t=f.shift();s.app.apply(s,t)}}))},s.pause=function(){if(!p){p=!0;for(var t=h.length-1;t>=0;t--)h[t].pause()}},s.resume=function(){if(p){p=!1;for(var t=h.length-1;t>=0;t--)h[t].resume()}},s.create=function(){return new s},s.resolve=function(){if("undefined"==typeof window||"undefined"==typeof document)return function(t){return t};var t=document.getElementsByTagName("script");return function(e){if(/^\.\//.test(e)){var n=function(){if(document.currentScript)return document.currentScript.src;var e;try{var n=new Error;if(!n.stack)throw n;e=n.stack}catch(n){e=n.stack}if("string"==typeof e)for(var r=(e=e.split("\n")).length;r--;){var o=e[r].match(/(\w+\:\/\/[^/]*?\/.+?)(:\d+)(:\d+)?/);if(o)return o[1]}if(t.length&&"readyState"in t[0])for(r=t.length;r--;)if("interactive"===t[r].readyState)return t[r].src;return location.href}();e=n.substring(0,n.lastIndexOf("/")+1)+e.substring(2)}return e}}(),t.exports=s},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return l}));var r=Math.PI,o=2*Math.PI;function i(t,e){return Math.sin(t)*e}function a(t,e){return-Math.cos(t)*e}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=t-n,i=e-r;return Math.sqrt(o*o+i*i)}function c(t){for(;t>=o;)t-=o;for(;t<0;)t+=o;return t}function u(t,e,n,o){var i=n-t,a=o-e,s=Math.atan(-i/a);return a<0?s:s+r}function l(t,e){var n=c(e)-c(t);return n>r?n-o:n<-r?n+o:n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(3),o=n(1);function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;i(this,t),this.node=e,this.offsetX=n,this.offsetY=r,this.rotation=a,this.scale=s,this.remove=new o.a}var e,n,s;return e=t,(n=[{key:"append",value:function(t){t.first().append(this.node)}},{key:"start",value:function(t){var e=this;this.append(t),this.node.pin({align:.5,offsetX:this.offsetX,offsetY:this.offsetY,rotation:this.rotation,scale:this.scale}),this.node.tick((function(n){return e.tick(n,t)})),this.remove.on((function(){return e.node.remove()}))}},{key:"tick",value:function(t,e){}},{key:"touching",value:function(t){var e=this.radius+t.radius;return!(!this.visible||!t.visible||Math.abs(this.offsetX-t.offsetX)>e||Math.abs(this.offsetY-t.offsetY)>e)&&r.b(this.offsetX,this.offsetY,t.offsetX,t.offsetY)<=e}},{key:"moveTo",value:function(t,e){this.offsetX=t,this.offsetY=e,this.node.pin({offsetX:t,offsetY:e})}},{key:"rotateTo",value:function(t){this.rotation=r.f(t),this.node.pin("rotation",t)}},{key:"scaleTo",value:function(t){this.scale=t,this.node.pin("scale",t)}},{key:"radius",get:function(){return this.node.width()*this.node.pin("scaleX")/2}},{key:"visible",get:function(){return null!=this.node.parent()}}])&&a(e.prototype,n),s&&a(e,s),t}()},function(t,e,n){t.exports=n(38),t.exports.internal={},n(46),t.exports.internal.Image=n(47),n(49),n(50),n(51),n(52),t.exports.Mouse=n(54),t.exports.Math=n(17),t.exports._extend=n(14),t.exports._create=n(6),n(55)},function(t,e){if("function"==typeof Object.create)t.exports=function(t,e){return Object.create.call(Object,t,e)};else{function n(){}t.exports=function(t,e){if(e)throw Error("Second argument is not supported!");if("object"!=typeof t||null===t)throw Error("Invalid prototype!");return n.prototype=t,new n}}},function(t,e,n){var r=n(2),o=n(19),i=0;function a(t){this._owner=t,this._parent=null,this._relativeMatrix=new o,this._absoluteMatrix=new o,this.reset()}r._init((function(){this._pin=new a(this)})),r.prototype.matrix=function(t){return!0===t?this._pin.relativeMatrix():this._pin.absoluteMatrix()},r.prototype.pin=function(t,e){return"object"==typeof t?(this._pin.set(t),this):"string"==typeof t?void 0===e?this._pin.get(t):(this._pin.set(t,e),this):void 0===t?this._pin:void 0},a.prototype.reset=function(){this._textureAlpha=1,this._alpha=1,this._width=0,this._height=0,this._scaleX=1,this._scaleY=1,this._skewX=0,this._skewY=0,this._rotation=0,this._pivoted=!1,this._pivotX=null,this._pivotY=null,this._handled=!1,this._handleX=0,this._handleY=0,this._aligned=!1,this._alignX=0,this._alignY=0,this._offsetX=0,this._offsetY=0,this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height,this._ts_translate=++i,this._ts_transform=++i,this._ts_matrix=++i},a.prototype._update=function(){return this._parent=this._owner._parent&&this._owner._parent._pin,this._handled&&this._mo_handle!=this._ts_transform&&(this._mo_handle=this._ts_transform,this._ts_translate=++i),this._aligned&&this._parent&&this._mo_align!=this._parent._ts_transform&&(this._mo_align=this._parent._ts_transform,this._ts_translate=++i),this},a.prototype.toString=function(){return this._owner+" ("+(this._parent?this._parent._owner:null)+")"},a.prototype.absoluteMatrix=function(){this._update();var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_matrix:0);if(this._mo_abs==t)return this._absoluteMatrix;this._mo_abs=t;var e=this._absoluteMatrix;return e.reset(this.relativeMatrix()),this._parent&&e.concat(this._parent._absoluteMatrix),this._ts_matrix=++i,e},a.prototype.relativeMatrix=function(){this._update();var t=Math.max(this._ts_transform,this._ts_translate,this._parent?this._parent._ts_transform:0);if(this._mo_rel==t)return this._relativeMatrix;this._mo_rel=t;var e,n,r=this._relativeMatrix;(r.identity(),this._pivoted&&r.translate(-this._pivotX*this._width,-this._pivotY*this._height),r.scale(this._scaleX,this._scaleY),r.skew(this._skewX,this._skewY),r.rotate(this._rotation),this._pivoted&&r.translate(this._pivotX*this._width,this._pivotY*this._height),this._pivoted)?(this._boxX=0,this._boxY=0,this._boxWidth=this._width,this._boxHeight=this._height):(r.a>0&&r.c>0||r.a<0&&r.c<0?(e=0,n=r.a*this._width+r.c*this._height):(e=r.a*this._width,n=r.c*this._height),e>n?(this._boxX=n,this._boxWidth=e-n):(this._boxX=e,this._boxWidth=n-e),r.b>0&&r.d>0||r.b<0&&r.d<0?(e=0,n=r.b*this._width+r.d*this._height):(e=r.b*this._width,n=r.d*this._height),e>n?(this._boxY=n,this._boxHeight=e-n):(this._boxY=e,this._boxHeight=n-e));return this._x=this._offsetX,this._y=this._offsetY,this._x-=this._boxX+this._handleX*this._boxWidth,this._y-=this._boxY+this._handleY*this._boxHeight,this._aligned&&this._parent&&(this._parent.relativeMatrix(),this._x+=this._alignX*this._parent._width,this._y+=this._alignY*this._parent._height),r.translate(this._x,this._y),this._relativeMatrix},a.prototype.get=function(t){if("function"==typeof s[t])return s[t](this)},a.prototype.set=function(t,e){if("string"==typeof t)"function"==typeof c[t]&&void 0!==e&&c[t](this,e);else if("object"==typeof t)for(e in t)"function"==typeof c[e]&&void 0!==t[e]&&c[e](this,t[e],t);return this._owner&&(this._owner._ts_pin=++i,this._owner.touch()),this};var s={alpha:function(t){return t._alpha},textureAlpha:function(t){return t._textureAlpha},width:function(t){return t._width},height:function(t){return t._height},boxWidth:function(t){return t._boxWidth},boxHeight:function(t){return t._boxHeight},scaleX:function(t){return t._scaleX},scaleY:function(t){return t._scaleY},skewX:function(t){return t._skewX},skewY:function(t){return t._skewY},rotation:function(t){return t._rotation},pivotX:function(t){return t._pivotX},pivotY:function(t){return t._pivotY},offsetX:function(t){return t._offsetX},offsetY:function(t){return t._offsetY},alignX:function(t){return t._alignX},alignY:function(t){return t._alignY},handleX:function(t){return t._handleX},handleY:function(t){return t._handleY}},c={alpha:function(t,e){t._alpha=e},textureAlpha:function(t,e){t._textureAlpha=e},width:function(t,e){t._width_=e,t._width=e,t._ts_transform=++i},height:function(t,e){t._height_=e,t._height=e,t._ts_transform=++i},scale:function(t,e){t._scaleX=e,t._scaleY=e,t._ts_transform=++i},scaleX:function(t,e){t._scaleX=e,t._ts_transform=++i},scaleY:function(t,e){t._scaleY=e,t._ts_transform=++i},skew:function(t,e){t._skewX=e,t._skewY=e,t._ts_transform=++i},skewX:function(t,e){t._skewX=e,t._ts_transform=++i},skewY:function(t,e){t._skewY=e,t._ts_transform=++i},rotation:function(t,e){t._rotation=e,t._ts_transform=++i},pivot:function(t,e){t._pivotX=e,t._pivotY=e,t._pivoted=!0,t._ts_transform=++i},pivotX:function(t,e){t._pivotX=e,t._pivoted=!0,t._ts_transform=++i},pivotY:function(t,e){t._pivotY=e,t._pivoted=!0,t._ts_transform=++i},offset:function(t,e){t._offsetX=e,t._offsetY=e,t._ts_translate=++i},offsetX:function(t,e){t._offsetX=e,t._ts_translate=++i},offsetY:function(t,e){t._offsetY=e,t._ts_translate=++i},align:function(t,e){this.alignX(t,e),this.alignY(t,e)},alignX:function(t,e){t._alignX=e,t._aligned=!0,t._ts_translate=++i,this.handleX(t,e)},alignY:function(t,e){t._alignY=e,t._aligned=!0,t._ts_translate=++i,this.handleY(t,e)},handle:function(t,e){this.handleX(t,e),this.handleY(t,e)},handleX:function(t,e){t._handleX=e,t._handled=!0,t._ts_translate=++i},handleY:function(t,e){t._handleY=e,t._handled=!0,t._ts_translate=++i},resizeMode:function(t,e,n){n&&("in"==e?e="in-pad":"out"==e&&(e="out-crop"),u(t,n.resizeWidth,n.resizeHeight,e))},resizeWidth:function(t,e,n){n&&n.resizeMode||u(t,e,null)},resizeHeight:function(t,e,n){n&&n.resizeMode||u(t,null,e)},scaleMode:function(t,e,n){n&&u(t,n.scaleWidth,n.scaleHeight,e)},scaleWidth:function(t,e,n){n&&n.scaleMode||u(t,e,null)},scaleHeight:function(t,e,n){n&&n.scaleMode||u(t,null,e)},matrix:function(t,e){this.scaleX(t,e.a),this.skewX(t,e.c/e.d),this.skewY(t,e.b/e.a),this.scaleY(t,e.d),this.offsetX(t,e.e),this.offsetY(t,e.f),this.rotation(t,0)}};function u(t,e,n,r){var o="number"==typeof e,a="number"==typeof n,s="string"==typeof r;t._ts_transform=++i,o&&(t._scaleX=e/t._width_,t._width=t._width_),a&&(t._scaleY=n/t._height_,t._height=t._height_),o&&a&&s&&("out"==r||"out-crop"==r?t._scaleX=t._scaleY=Math.max(t._scaleX,t._scaleY):"in"!=r&&"in-pad"!=r||(t._scaleX=t._scaleY=Math.min(t._scaleX,t._scaleY)),"out-crop"!=r&&"in-pad"!=r||(t._width=e/t._scaleX,t._height=n/t._scaleY))}r.prototype.scaleTo=function(t,e,n){return"object"==typeof t&&(n=e,e=t.y,t=t.x),u(this._pin,t,e,n),this},a._add_shortcuts=function(t){t.prototype.size=function(t,e){return this.pin("width",t),this.pin("height",e),this},t.prototype.width=function(t){return void 0===t?this.pin("width"):(this.pin("width",t),this)},t.prototype.height=function(t){return void 0===t?this.pin("height"):(this.pin("height",t),this)},t.prototype.offset=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.pin("offsetX",t),this.pin("offsetY",e),this},t.prototype.rotate=function(t){return this.pin("rotation",t),this},t.prototype.skew=function(t,e){return"object"==typeof t?(e=t.y,t=t.x):void 0===e&&(e=t),this.pin("skewX",t),this.pin("skewY",e),this},t.prototype.scale=function(t,e){return"object"==typeof t?(e=t.y,t=t.x):void 0===e&&(e=t),this.pin("scaleX",t),this.pin("scaleY",e),this},t.prototype.alpha=function(t,e){return this.pin("alpha",t),void 0!==e&&this.pin("textureAlpha",e),this}},a._add_shortcuts(r),t.exports=a},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(0),o=n(3),i=n(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(y,t);var e,n,a,p,d=(e=y,function(){var t,n=h(e);if(f()){var r=h(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return l(this,t)});function y(t,e,n,r,o){var a,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return s(this,y),(a=d.call(this,t,e,n,r,o)).velocityX=c,a.velocityY=u,a.spin=l,a.leave=new i.a,a}return n=y,(a=[{key:"getRightEdge",value:function(t){return t.width()/2+2*this.radius}},{key:"getBottomEdge",value:function(t){return t.height()/2+2*this.radius}},{key:"moveBy",value:function(t,e,n){var o=n?n*r.a.dtCoefficient:1,i=t?t*o:0,a=e?e*o:0;0===i&&0===a||this.moveTo(this.offsetX+i,this.offsetY+a)}},{key:"rotateBy",value:function(t,e){var n=e?e*r.a.dtCoefficient:1,o=t?t*n:0;0!==o&&this.rotateTo(this.rotation+o)}},{key:"accelerate",value:function(t,e,n,i){var a=i?i*r.a.dtCoefficient:1;if(this.velocityX+=o.c(t,e*a),this.velocityY+=o.d(t,e*a),n){var s=o.b(this.velocityX,this.velocityY);if(s>=n){var c=n/s;this.velocityX*=c,this.velocityY*=c}}}},{key:"ricochet",value:function(t,e,n,r){var i=Math.PI+o.a(this.offsetX,this.offsetY,t.offsetX,t.offsetY);this.accelerate(i,e,n,r)}},{key:"tick",value:function(t,e){u(h(y.prototype),"tick",this).call(this,t,e),this.rotateBy(this.spin,t),this.moveBy(this.velocityX,this.velocityY,t);var n=this.getRightEdge(e),r=this.getBottomEdge(e);this.offsetX>=n?this.leave.emit("right"):this.offsetX<=-n&&this.leave.emit("left"),this.offsetY>=r?this.leave.emit("bottom"):this.offsetY<=-r&&this.leave.emit("top")}}])&&c(n.prototype,a),p&&c(n,p),y}(n(4).a)},function(module,exports,__webpack_require__){var factory;factory=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/automerge.js")}({"./backend/index.js":
/*!**************************!*\
  !*** ./backend/index.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.List,c=i.fromJS,u=n(/*! ../src/common */"./src/common.js"),l=(u.isObject,u.lessOrEqual),f=u.parseElemId,h=n(/*! ./op_set */"./backend/op_set.js"),g=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.diffs={},this.children={}}return o(t,[{key:"unpackValue",value:function(t,e,n){Object.assign(e,n),n.link&&this.children[t].push(n.value)}},{key:"unpackConflicts",value:function(t,e,n){if(n){e.conflicts=[];var o=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value,l=r(u,2),f=l[0],h=l[1],g={actor:f};this.unpackValue(t,g,h),e.conflicts.push(g)}}catch(t){i=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}}}},{key:"instantiateMap",value:function(t,e,n){var r=this.diffs[e];e!==h.ROOT_ID&&r.push({obj:e,type:n,action:"create"});var o=h.getObjectConflicts(t,e,this),i=!0,a=!1,s=void 0;try{for(var c,u=h.getObjectFields(t,e)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,f={obj:e,type:n,action:"set",key:l};this.unpackValue(e,f,h.getObjectField(t,e,l,this)),this.unpackConflicts(e,f,o.get(l)),r.push(f)}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}}},{key:"instantiateList",value:function(t,e,n){var r=this.diffs[e],o=0;r.push({obj:e,type:n,action:"create"});var i=!0,a=!1,s=void 0;try{for(var c,u=h.listIterator(t,e,this)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,g=l.index,p=l.elemId,d=l.value,y=l.conflicts;if(o=Math.max(o,f(p).counter),void 0!==g){var m={obj:e,type:n,action:"insert",index:g,elemId:p};this.unpackValue(e,m,d),this.unpackConflicts(e,m,y),r.push(m)}}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}r.push({obj:e,type:n,action:"maxElem",value:o})}},{key:"instantiateObject",value:function(t,e){if(this.diffs[e])return{value:e,link:!0};var n=e===h.ROOT_ID,r=t.getIn(["byObject",e,"_init","action"]);if(this.diffs[e]=[],this.children[e]=[],n||"makeMap"===r)this.instantiateMap(t,e,"map");else if("makeTable"===r)this.instantiateMap(t,e,"table");else if("makeList"===r)this.instantiateList(t,e,"list");else{if("makeText"!==r)throw new RangeError("Unknown object type: "+r);this.instantiateList(t,e,"text")}return{value:e,link:!0}}},{key:"makePatch",value:function(t,e){var n=!0,r=!1,o=void 0;try{for(var i,a=this.children[t][Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;this.makePatch(s,e)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}var c=!0,u=!1,l=void 0;try{for(var f,h=this.diffs[t][Symbol.iterator]();!(c=(f=h.next()).done);c=!0){var g=f.value;e.push(g)}}catch(t){u=!0,l=t}finally{try{!c&&h.return&&h.return()}finally{if(u)throw l}}}}]),t}();function p(t,e){var n=t.getIn(["opSet","undoPos"])>0,r=!t.getIn(["opSet","redoStack"]).isEmpty();return{clock:t.getIn(["opSet","clock"]).toJS(),deps:t.getIn(["opSet","deps"]).toJS(),canUndo:n,canRedo:r,diffs:e}}function d(t,e,n){var o=[],i=t.get("opSet"),a=!0,s=!1,u=void 0;try{for(var l,f=c(e)[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var g=l.value;g=g.remove("requestType");var d=h.addChange(i,g,n),y=r(d,2),m=y[0],v=y[1],_=!0,b=!1,w=void 0;try{for(var S,E=v[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var x=S.value;o.push(x)}}catch(t){b=!0,w=t}finally{try{!_&&E.return&&E.return()}finally{if(b)throw w}}i=m}}catch(t){s=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}return[t=t.set("opSet",i),p(t,o)]}function y(t,e){return d(t,e,!1)}t.exports={init:function(){return a({opSet:h.init()})},applyChanges:y,applyLocalChange:function(t,e){if("string"!=typeof e.actor||"number"!=typeof e.seq)throw new TypeError("Change request requries `actor` and `seq` properties");if(e.seq<=t.getIn(["opSet","clock",e.actor],0))throw new RangeError("Change request has already been applied");var n=void 0;if("change"===e.requestType){var o=d(t,[e],!1!==e.undoable),i=r(o,2);t=i[0],n=i[1]}else if("undo"===e.requestType){var u=function(t,e){var n=t.getIn(["opSet","undoPos"]),o=t.getIn(["opSet","undoStack",n-1]);if(n<1||!o)throw new RangeError("Cannot undo: there is nothing to be undone");var i=e.actor,u=e.seq,l=e.deps,f=e.message,g=a({actor:i,seq:u,deps:c(l),message:f,ops:o}),d=t.get("opSet"),y=s().withMutations((function(t){var e=!0,n=!1,r=void 0;try{for(var i,s=o[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var c=i.value;if(!["set","del","link","inc"].includes(c.get("action")))throw new RangeError("Unexpected operation type in undo history: "+c);var u=h.getFieldOps(d,c.get("obj"),c.get("key"));if("inc"===c.get("action"))t.push(a({action:"inc",obj:c.get("obj"),key:c.get("key"),value:-c.get("value")}));else if(u.isEmpty())t.push(a({action:"del",obj:c.get("obj"),key:c.get("key")}));else{var l=!0,f=!1,g=void 0;try{for(var p,y=u[Symbol.iterator]();!(l=(p=y.next()).done);l=!0){var m=p.value;t.push(m.remove("actor").remove("seq"))}}catch(t){f=!0,g=t}finally{try{!l&&y.return&&y.return()}finally{if(f)throw g}}}}}catch(t){n=!0,r=t}finally{try{!e&&s.return&&s.return()}finally{if(n)throw r}}}));d=d.set("undoPos",n-1).update("redoStack",(function(t){return t.push(y)}));var m=h.addChange(d,g,!1),v=r(m,2),_=v[0],b=v[1];return[t=t.set("opSet",_),p(t,b)]}(t,e),l=r(u,2);t=l[0],n=l[1]}else{if("redo"!==e.requestType)throw new RangeError("Unknown requestType: "+e.requestType);var f=function(t,e){var n=t.getIn(["opSet","redoStack"]).last();if(!n)throw new RangeError("Cannot redo: the last change was not an undo");var o=e.actor,i=e.seq,s=e.deps,u=e.message,l=a({actor:o,seq:i,deps:c(s),message:u,ops:n}),f=t.get("opSet").update("undoPos",(function(t){return t+1})).update("redoStack",(function(t){return t.pop()})),g=h.addChange(f,l,!1),d=r(g,2),y=d[0],m=d[1];return[t=t.set("opSet",y),p(t,m)]}(t,e),g=r(f,2);t=g[0],n=g[1]}return n.actor=e.actor,n.seq=e.seq,[t,n]},getPatch:function(t){var e=[],n=t.get("opSet"),r=new g(n);return r.instantiateObject(n,h.ROOT_ID),r.makePatch(h.ROOT_ID,e),p(t,e)},getChanges:function(t,e){var n=t.getIn(["opSet","clock"]),r=e.getIn(["opSet","clock"]);if(!l(n,r))throw new RangeError("Cannot diff two states that have diverged");return h.getMissingChanges(e.get("opSet"),n).toJS()},getChangesForActor:function(t,e){return h.getChangesForActor(t.get("opSet"),e).toJS()},getMissingChanges:function(t,e){return h.getMissingChanges(t.get("opSet"),e).toJS()},getMissingDeps:function(t){return h.getMissingDeps(t.get("opSet"))},merge:function(t,e){var n=h.getMissingChanges(e.get("opSet"),t.getIn(["opSet","clock"]));return y(t,n)}}},"./backend/op_set.js":
/*!***************************!*\
  !*** ./backend/op_set.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.List,c=i.Set,u=n(/*! ./skip_list */"./backend/skip_list.js").SkipList,l=n(/*! ../src/common */"./src/common.js"),f=l.ROOT_ID,h=l.parseElemId;function g(t,e,n){var r=[e.get("actor"),e.get("seq")],o=r[0],i=r[1],a=[n.get("actor"),n.get("seq")],s=a[0],c=a[1];if(!(o&&s&&i&&c))return!1;var u=t.getIn(["states",o,i-1,"allDeps"]),l=t.getIn(["states",s,c-1,"allDeps"]);return u.get(s,0)<c&&l.get(o,0)<i}function p(t,e){var n=e.get("actor"),r=e.get("seq"),o=!0;return e.get("deps").set(n,r-1).forEach((function(e,n){t.getIn(["clock",n],0)<e&&(o=!1)})),o}function d(t,e){return e.reduce((function(e,n,r){if(n<=0)return e;var o=t.getIn(["states",r,n-1,"allDeps"]);return e.mergeWith((function(t,e){return Math.max(t,e)}),o).set(r,n)}),a())}function y(t,e){for(var n=[];e!==f;){var r=t.getIn(["byObject",e,"_inbound"],c()).first();if(!r)return null;e=r.get("obj");var o=t.getIn(["byObject",e,"_init","action"]);if("makeList"===o||"makeText"===o){var i=t.getIn(["byObject",e,"_elemIds"]).indexOf(r.get("key"));if(i<0)return null;n.unshift(i)}else n.unshift(r.get("key"))}return n}function m(t,e){var n=e.get("obj");if(t.hasIn(["byObject",n,"_keys"]))throw new Error("Duplicate creation of object "+n);var r={action:"create",obj:n},o=a({_init:e,_inbound:c(),_keys:a()});return"makeMap"===e.get("action")?r.type="map":"makeTable"===e.get("action")?r.type="table":(r.type="makeText"===e.get("action")?"text":"list",o=o.set("_elemIds",new u)),[t=t.setIn(["byObject",n],o),[r]]}function v(t,e){var n=e.get("obj"),r=e.get("elem"),o=e.get("actor")+":"+r,i=Math.max(r,t.getIn(["byObject",n,"_maxElem"],0)),a="makeText"===t.getIn(["byObject",n,"_init","action"])?"text":"list";if(!t.get("byObject").has(n))throw new Error("Modification of unknown object "+n);if(t.hasIn(["byObject",n,"_insertion",o]))throw new Error("Duplicate list element ID "+o);return[t=t.updateIn(["byObject",n,"_following",e.get("key")],s(),(function(t){return t.push(e)})).setIn(["byObject",n,"_maxElem"],i).setIn(["byObject",n,"_insertion",o],e),[{obj:n,type:a,action:"maxElem",value:i,path:y(t,n)}]]}function _(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,a=t.shift()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value,c={actor:s.get("actor"),value:s.get("value")};"link"===s.get("action")&&(c.link=!0),s.get("datatype")&&(c.datatype=s.get("datatype")),e.push(c)}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e}function b(t,e,n,r,o,i){var a="makeText"===t.getIn(["byObject",e,"_init","action"])?"text":"list",s=i?i.first():null,c=t.getIn(["byObject",e,"_elemIds"]),u=s?s.get("value"):null,l={action:o,type:a,obj:e,index:n,path:y(t,e)};if(s&&"link"===s.get("action")&&(l.link=!0,u={obj:s.get("value")}),"insert"===o)c=c.insertIndex(n,s.get("key"),u),l.elemId=r,l.value=s.get("value"),s.get("datatype")&&(l.datatype=s.get("datatype"));else if("set"===o)c=c.setValue(s.get("key"),u),l.value=s.get("value"),s.get("datatype")&&(l.datatype=s.get("datatype"));else{if("remove"!==o)throw new Error("Unknown action type: "+o);c=c.removeIndex(n)}return i&&i.size>1&&(l.conflicts=_(i)),[t=t.setIn(["byObject",e,"_elemIds"],c),[l]]}function w(t,e,n,r){var o=k(t,e,r),i=o.first(),a={action:"",type:n,obj:e,key:r,path:y(t,e)};return o.isEmpty()?a.action="remove":(a.action="set",a.value=i.get("value"),"link"===i.get("action")&&(a.link=!0),i.get("datatype")&&(a.datatype=i.get("datatype")),o.size>1&&(a.conflicts=_(o))),[t,[a]]}function S(t,e,n){var r=e.get("obj"),o=t.getIn(["byObject",r,"_init","action"]);if(!t.get("byObject").has(r))throw new Error("Modification of unknown object "+r);if(t.has("undoLocal")&&n){var i=void 0;(i="inc"===e.get("action")?s.of(a({action:"inc",obj:r,key:e.get("key"),value:-e.get("value")})):t.getIn(["byObject",r,"_keys",e.get("key")],s()).map((function(t){return t.filter((function(t,e){return["action","obj","key","value","datatype"].includes(e)}))}))).isEmpty()&&(i=s.of(a({action:"del",obj:r,key:e.get("key")}))),t=t.update("undoLocal",(function(t){return t.concat(i)}))}var u=t.getIn(["byObject",r,"_keys",e.get("key")],s()),l=void 0,h=void 0;if("inc"===e.get("action"))l=s(),h=u.map((function(n){return"set"!==n.get("action")||"number"!=typeof n.get("value")||"counter"!==n.get("datatype")||g(t,n,e)?n:n.set("value",n.get("value")+e.get("value"))}));else{var p=u.groupBy((function(n){return!!g(t,n,e)}));l=p.get(!1,s()),h=p.get(!0,s())}var d=function(e){t=t.updateIn(["byObject",e.get("value"),"_inbound"],(function(t){return t.remove(e)}))},y=!0,m=!1,v=void 0;try{for(var _,S=l.filter((function(t){return"link"===t.get("action")}))[Symbol.iterator]();!(y=(_=S.next()).done);y=!0)d(_.value)}catch(t){m=!0,v=t}finally{try{!y&&S.return&&S.return()}finally{if(m)throw v}}if("link"===e.get("action")&&(t=t.updateIn(["byObject",e.get("value"),"_inbound"],c(),(function(t){return t.add(e)}))),["set","link"].includes(e.get("action"))&&(h=h.push(e)),h=h.sortBy((function(t){return t.get("actor")})).reverse(),t=t.setIn(["byObject",r,"_keys",e.get("key")],h),r===f||"makeMap"===o)return w(t,r,"map",e.get("key"));if("makeTable"===o)return w(t,r,"table",e.get("key"));if("makeList"===o||"makeText"===o)return function(t,e,n){var r=k(t,e,n),o=t.getIn(["byObject",e,"_elemIds"]),i=o.indexOf(n);if(i>=0)return r.isEmpty()?b(t,e,i,n,"remove",null):b(t,e,i,n,"set",r);if(r.isEmpty())return[t,[]];for(var a=n;i=-1,(a=C(t,e,a))&&!((i=o.indexOf(a))>=0););return b(t,e,i+1,n,"insert",r)}(t,r,e.get("key"));throw new RangeError("Unknown operation type "+o)}function E(t){for(var e={},n=[],r=t.length-1;r>=0;r--){var o=t[r],i=o.obj,a=o.action;if("maxElem"===a)(void 0===e[i]||e[i]<o.value)&&(e[i]=o.value,n.push(o));else if("insert"===a){var s=h(o.elemId).counter;(void 0===e[i]||e[i]<s)&&(e[i]=s),n.push(o)}else n.push(o)}return n.reverse()}function x(t,e){var n=e.get("actor"),r=e.get("seq"),i=t.getIn(["states",n],s());if(r<=i.size){if(!i.get(r-1).get("change").equals(e))throw new Error("Inconsistent reuse of sequence number "+r+" by "+n);return[t,[]]}var u,l=d(t,e.get("deps").set(n,r-1)),f=function(t,e){var n=[],r=c(),i=!0,a=!1,s=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value,h=void 0,g=f.get("action");if(["makeMap","makeList","makeText","makeTable"].includes(g)){r=r.add(f.get("obj"));var p=m(t,f),d=o(p,2);t=d[0],h=d[1]}else if("ins"===g){var y=v(t,f),_=o(y,2);t=_[0],h=_[1]}else{if(!["set","del","link","inc"].includes(g))throw new RangeError("Unknown operation type "+g);var b=S(t,f,!r.contains(f.get("obj"))),w=o(b,2);t=w[0],h=w[1]}var x=!0,O=!1,k=void 0;try{for(var j,T=h[Symbol.iterator]();!(x=(j=T.next()).done);x=!0){var I=j.value;n.push(I)}}catch(t){O=!0,k=t}finally{try{!x&&T.return&&T.return()}finally{if(O)throw k}}}}catch(t){a=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw s}}return[t,E(n)]}(t=t.setIn(["states",n],i.push(a({change:e,allDeps:l}))),e.get("ops").map((function(t){return t.merge({actor:n,seq:r})}))),h=o(f,2);t=h[0],u=h[1];var g=t.get("deps").filter((function(t,e){return t>l.get(e,0)})).set(n,r);return[t=t.set("deps",g).setIn(["clock",n],r).update("history",(function(t){return t.push(e)})),u]}function O(t){for(var e=s(),n=void 0,r=[];;){var i=!0,a=!1,c=void 0;try{for(var u,l=t.get("queue")[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var f=u.value;if(p(t,f)){var h=x(t,f),g=o(h,2);t=g[0],n=g[1];var d=!0,y=!1,m=void 0;try{for(var v,_=n[Symbol.iterator]();!(d=(v=_.next()).done);d=!0){var b=v.value;r.push(b)}}catch(t){y=!0,m=t}finally{try{!d&&_.return&&_.return()}finally{if(y)throw m}}}else e=e.push(f)}}catch(t){a=!0,c=t}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}if(e.count()===t.get("queue").count())return[t,r];t=t.set("queue",e),e=s()}}function k(t,e,n){return t.getIn(["byObject",e,"_keys",n],s())}function j(t,e,n){if("_head"!==n){var r=t.getIn(["byObject",e,"_insertion",n]);if(!r)throw new TypeError("Missing index entry for list element "+n);return r.get("key")}}function T(t,e){return t.get("elem")<e.get("elem")?-1:t.get("elem")>e.get("elem")?1:t.get("actor")<e.get("actor")?-1:t.get("actor")>e.get("actor")?1:0}function I(t,e,n,r){var o=null;if(r){var i=h(r);o=a({actor:i.actorId,elem:i.counter})}return t.getIn(["byObject",e,"_following",n],s()).filter((function(t){return"ins"===t.get("action")})).filter((function(t){return!o||T(t,o)<0})).sort(T).reverse().map((function(t){return t.get("actor")+":"+t.get("elem")}))}function A(t,e,n){var r=I(t,e,n);if(!r.isEmpty())return r.first();for(var o=void 0;;){if(!(o=j(t,e,n)))return;var i=I(t,e,o,n);if(!i.isEmpty())return i.first();n=o}}function C(t,e,n){var r=j(t,e,n),o=I(t,e,r);if(o.first()===n)return"_head"===r?null:r;var i=void 0,a=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var f=u.value;if(f===n)break;i=f}}catch(t){s=!0,c=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}for(;;){if((o=I(t,e,i)).isEmpty())return i;i=o.last()}}function M(t,e,n){if("object"!==(void 0===e?"undefined":r(e))||null===e)return e;if("link"===e.get("action"))return n.instantiateObject(t,e.get("value"));if("set"===e.get("action")){var o={value:e.get("value")};return e.get("datatype")&&(o.datatype=e.get("datatype")),o}throw new TypeError("Unexpected operation action: "+e.get("action"))}t.exports={init:function(){return a().set("states",a()).set("history",s()).set("byObject",a().set(f,a().set("_keys",a()))).set("clock",a()).set("deps",a()).set("undoPos",0).set("undoStack",s()).set("redoStack",s()).set("queue",s())},addChange:function(t,e,n){if(t=t.update("queue",(function(t){return t.push(e)})),n){var r,i=O(t=t.set("undoLocal",s())),a=o(i,2);return t=a[0],r=a[1],[t=function(t){var e=t.get("undoPos");return t.update("undoStack",(function(n){return n.slice(0,e).push(t.get("undoLocal"))})).set("undoPos",e+1).set("redoStack",s()).remove("undoLocal")}(t),r]}return O(t)},getMissingChanges:function(t,e){var n=d(t,e);return t.get("states").map((function(t,e){return t.skip(n.get(e,0))})).valueSeq().flatten(1).map((function(t){return t.get("change")}))},getChangesForActor:function(t,e,n){return n=n||0,t.get("states").filter((function(t,n){return n===e})).map((function(t,e){return t.skip(n)})).valueSeq().flatten(1).map((function(t){return t.get("change")}))},getMissingDeps:function(t){var e={},n=!0,r=!1,o=void 0;try{for(var i,a=t.get("queue")[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;s.get("deps").set(s.get("actor"),s.get("seq")-1).forEach((function(n,r){t.getIn(["clock",r],0)<n&&(e[r]=Math.max(n,e[r]||0))}))}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e},getObjectFields:function(t,e){return t.getIn(["byObject",e,"_keys"]).keySeq().filter((function(n){return function(t,e,n){return!k(t,e,n).isEmpty()}(t,e,n)})).toSet()},getObjectField:function(t,e,n,r){var o=k(t,e,n);if(!o.isEmpty())return M(t,o.first(),r)},getObjectConflicts:function(t,e,n){return t.getIn(["byObject",e,"_keys"]).filter((function(n,r){return k(t,e,r).size>1})).mapEntries((function(e){var r=o(e,2);return[r[0],r[1].shift().toMap().mapEntries((function(e){var r=o(e,2),i=(r[0],r[1]);return[i.get("actor"),M(t,i,n)]}))]}))},getFieldOps:k,listElemByIndex:function(t,e,n,r){var o=t.getIn(["byObject",e,"_elemIds"]).keyOf(n);if(o){var i=k(t,e,o);if(!i.isEmpty())return M(t,i.first(),r)}},listLength:function(t,e){return t.getIn(["byObject",e,"_elemIds"]).length},listIterator:function(t,e,n){var r="_head",i=-1,a={next:function(){for(;r;){if(!(r=A(t,e,r)))return{done:!0};var a={elemId:r},s=k(t,e,r);return s.isEmpty()||(i+=1,a.index=i,a.value=M(t,s.first(),n),a.conflicts=null,s.size>1&&(a.conflicts=s.shift().toMap().mapEntries((function(e){var r=o(e,2),i=(r[0],r[1]);return[i.get("actor"),M(t,i,n)]})))),{done:!1,value:a}}}};return a[Symbol.iterator]=function(){return a},a},ROOT_ID:f}},"./backend/skip_list.js":
/*!******************************!*\
  !*** ./backend/skip_list.js ***!
  \******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js").Map,a=function(){function t(e,n,r,i,a,s,c){o(this,t),this.key=e,this.value=n,this.level=r,this.prevKey=i,this.nextKey=a,this.prevCount=s,this.nextCount=c}return r(t,[{key:"setValue",value:function(e){return new t(this.key,e,this.level,this.prevKey,this.nextKey,this.prevCount,this.nextCount)}},{key:"insertAfter",value:function(e,n,r,o){if(n>this.level&&null!==this.key)throw new RangeError("Cannot increase the level of a non-head node");for(var i=Math.max(this.level,n),a=this.nextKey.slice(),s=this.nextCount.slice(),c=r;c<i;c++)c<n?(a[c]=e,s[c]=o):s[c]+=1;return new t(this.key,this.value,i,this.prevKey,a,this.prevCount,s)}},{key:"insertBefore",value:function(e,n,r,o){if(n>this.level)throw new RangeError("Cannot increase node level");for(var i=this.prevKey.slice(),a=this.prevCount.slice(),s=r;s<this.level;s++)s<n?(i[s]=e,a[s]=o):a[s]+=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}},{key:"removeAfter",value:function(e,n,r,o){for(var i=this.nextKey.slice(),a=this.nextCount.slice(),s=e;s<this.level;s++)s<n?(i[s]=r[s],a[s]=o[s]):a[s]-=1;return new t(this.key,this.value,this.level,this.prevKey,i,this.prevCount,a)}},{key:"removeBefore",value:function(e,n,r,o){for(var i=this.prevKey.slice(),a=this.prevCount.slice(),s=e;s<this.level;s++)s<n?(i[s]=r[s],a[s]=o[s]):a[s]-=1;return new t(this.key,this.value,this.level,i,this.nextKey,a,this.nextCount)}}]),t}(),s=function(){function t(e){o(this,t);var n=new a(null,null,1,[],[null],[],[null]),r=e?e():{next:function(){for(var t=Math.floor(4294967296*Math.random()),e=1;t<1<<32-2*e&&e<16;)e+=1;return{value:e,done:!1}}};return c(0,i().set(null,n),r)}return r(t,[{key:"predecessors",value:function(t,e){for(var n=[t],r=[1],o=1;o<e;o++){for(var i=n[o-1],a=r[o-1];i;){var s=this._nodes.get(i);if(s.level>o)break;if(s.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=s.prevCount[o-1],i=s.prevKey[o-1]}n[o]=i,r[o]=a}return{preKeys:n,preCounts:r}}},{key:"successors",value:function(t,e){for(var n=[t],r=[1],o=1;o<e;o++){for(var i=n[o-1],a=r[o-1];i;){var s=this._nodes.get(i);if(s.level>o)break;if(s.level<o)throw new RangeError("Node "+i+" below expected level "+(o-1));a+=s.nextCount[o-1],i=s.nextKey[o-1]}n[o]=i,r[o]=a}return{sucKeys:n,sucCounts:r}}},{key:"insertAfter",value:function(t,e,n){if("string"!=typeof e||""===e)throw new RangeError("Key must be a nonempty string");if(!this._nodes.has(t))throw new RangeError("The referenced predecessor key does not exist");if(this._nodes.has(e))throw new RangeError("Cannot insert a key that already exists");var r=this._randomSource.next().value,o=Math.max(r,this.headNode.level),i=this._nodes.get(t).nextKey[0]||null,s=this.predecessors(t,o),u=s.preKeys,l=s.preCounts,f=this.successors(i,o),h=f.sucKeys,g=f.sucCounts;return c(this.length+1,this._nodes.withMutations((function(t){for(var i=0,s=0,c=function(n){var a=Math.min(n,r);n!==o&&u[n]===u[i]||(t.update(u[i],(function(t){return t.insertAfter(e,a,i,l[i])})),i=n),!h[s]||n!==o&&h[n]===h[s]||(t.update(h[s],(function(t){return t.insertBefore(e,a,s,g[s])})),s=n)},f=1;f<=o;f++)c(f);t.set(e,new a(e,n,r,u.slice(0,r),h.slice(0,r),l.slice(0,r),g.slice(0,r)))})),this._randomSource)}},{key:"insertIndex",value:function(t,e,n){if("number"!=typeof t||t<0)throw new RangeError("Index must be a non-negative integer");return 0===t?this.insertAfter(null,e,n):this.insertAfter(this.keyOf(t-1),e,n)}},{key:"removeKey",value:function(t){if("string"!=typeof t||!this._nodes.has(t))throw new RangeError("The given key cannot be removed because it does not exist");for(var e=this._nodes.get(t),n=this.headNode.level,r=this.predecessors(e.prevKey[0],n),o=r.preKeys,i=r.preCounts,a=this.successors(e.nextKey[0],n),s=a.sucKeys,u=a.sucCounts,l=new Array(n),f=0;f<n;f++)l[f]=i[f]+u[f]-1;return c(this.length-1,this._nodes.withMutations((function(r){r.remove(t);for(var i=0,a=0,c=function(t){var c=Math.min(t,e.level);t!==n&&o[t]===o[i]||(r.update(o[i],(function(t){return t.removeAfter(i,c,s,l)})),i=t),!s[a]||t!==n&&s[t]===s[a]||(r.update(s[a],(function(t){return t.removeBefore(a,c,o,l)})),a=t)},u=1;u<=n;u++)c(u)})),this._randomSource)}},{key:"removeIndex",value:function(t){return this.removeKey(this.keyOf(t))}},{key:"indexOf",value:function(t){if("string"!=typeof t||""===t||!this._nodes.has(t))return-1;for(var e=this._nodes.get(t),n=0;e&&e.key;)n+=e.prevCount[e.level-1],e=this._nodes.get(e.prevKey[e.level-1]);return n-1}},{key:"keyOf",value:function(t){if("number"!=typeof t)return null;if(t<0&&(t+=this.length),t<0||t>=this.length)return null;for(var e=this._nodes.get(null),n=e.level-1,r=0;;){if(r===t+1)return e.key;r+e.nextCount[n]>t+1?n-=1:(r+=e.nextCount[n],e=this._nodes.get(e.nextKey[n]))}}},{key:"getValue",value:function(t){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var e=this._nodes.get(t);return e&&e.value}},{key:"setValue",value:function(t,e){if("string"!=typeof t||""===t)throw new RangeError("Key must be a nonempty string");var n=this._nodes.get(t);if(!n)throw new RangeError("The referenced key does not exist");return n=n.setValue(e),c(this.length,this._nodes.set(t,n),this._randomSource)}},{key:"iterator",value:function(t){var e=this,n=this._nodes,r=n.get(null).nextKey[0];return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({next:function(){if(!r)return{value:void 0,done:!0};var e=n.get(r),o=void 0;switch(t){case"keys":o={value:r,done:!1};break;case"values":o={value:e.value,done:!1};break;case"entries":o={value:[r,e.value],done:!1}}return r=e.nextKey[0],o}},Symbol.iterator,(function(){return e.iterator(t)}))}},{key:Symbol.iterator,value:function(){return this.iterator("values")}},{key:"headNode",get:function(){return this._nodes.get(null)}}]),t}();function c(t,e,n){var r=Object.create(s.prototype);return r.length=t,r._nodes=e,r._randomSource=n,r}t.exports={SkipList:s}},"./frontend/apply_patch.js":
/*!*********************************!*\
  !*** ./frontend/apply_patch.js ***!
  \*********************************/
/*! no static exports found */function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=n(/*! ../src/common */"./src/common.js"),i=o.ROOT_ID,a=o.isObject,s=o.copyObject,c=o.parseElemId,u=n(/*! ./constants */"./frontend/constants.js"),l=u.OPTIONS,f=u.OBJECT_ID,h=u.CONFLICTS,g=u.ELEM_IDS,p=u.MAX_ELEM,d=n(/*! ./text */"./frontend/text.js"),y=(d.Text,d.instantiateText),m=n(/*! ./table */"./frontend/table.js"),v=m.Table,_=m.instantiateTable,b=n(/*! ./counter */"./frontend/counter.js").Counter;function w(t,e,n){if(t.link)return n[t.value]||e[t.value];if("timestamp"===t.datatype)return new Date(t.value);if("counter"===t.datatype)return new b(t.value);if(void 0!==t.datatype)throw new TypeError("Unknown datatype: "+t.datatype);return t.value}function S(t,e){var n={},r=t[h][e]||{},o=[t[e]].concat(Object.values(r)),i=!0,s=!1,c=void 0;try{for(var u,l=o[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var g=u.value;a(g)&&g[f]&&(n[g[f]]=!0)}}catch(t){s=!0,c=t}finally{try{!i&&l.return&&l.return()}finally{if(s)throw c}}return n}function E(t,e,n,r){var o=!0,i=!1,a=void 0;try{for(var s,c=Object.keys(e)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;n[u]||delete r[u]}}catch(t){i=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}var l=!0,f=!1,h=void 0;try{for(var g,p=Object.keys(n)[Symbol.iterator]();!(l=(g=p.next()).done);l=!0){var d=g.value;if(r[d]&&r[d]!==t)throw new RangeError("Object "+d+" has multiple parents");r[d]||(r[d]=t)}}catch(t){f=!0,h=t}finally{try{!l&&p.return&&p.return()}finally{if(f)throw h}}}function x(t,e){if(t&&t[f]!==e)throw new RangeError("cloneMapObject ID mismatch: "+t[f]+" !== "+e);var n=s(t),r=s(t?t[h]:void 0);return Object.defineProperty(n,h,{value:r}),Object.defineProperty(n,f,{value:e}),n}function O(t,e,n,r){n[t.obj]||(n[t.obj]=x(e[t.obj],t.obj));var o=n[t.obj],i=o[h],a={},s={};if("create"===t.action);else if("set"===t.action){if(a=S(o,t.key),o[t.key]=w(t,e,n),t.conflicts){i[t.key]={};var c=!0,u=!1,l=void 0;try{for(var f,g=t.conflicts[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var p=f.value;i[t.key][p.actor]=w(p,e,n)}}catch(t){u=!0,l=t}finally{try{!c&&g.return&&g.return()}finally{if(u)throw l}}Object.freeze(i[t.key])}else delete i[t.key];s=S(o,t.key)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);a=S(o,t.key),delete o[t.key],delete i[t.key]}E(t.obj,a,s,r)}function k(t,e,n){n[t]||(n[t]=x(e[t],t));var r=n[t],o=!0,c=!1,u=void 0;try{for(var g,p=Object.keys(r)[Symbol.iterator]();!(o=(g=p.next()).done);o=!0){var d=g.value,y=r[d];a(y)&&n[y[f]]&&(r[d]=n[y[f]]);var m=r[h][d]||{},v=null,_=!0,b=!1,w=void 0;try{for(var S,E=Object.keys(m)[Symbol.iterator]();!(_=(S=E.next()).done);_=!0){var O=S.value;y=m[O],a(y)&&n[y[f]]&&(v||(v=s(m),r[h][d]=v),v[O]=n[y[f]])}}catch(t){b=!0,w=t}finally{try{!_&&E.return&&E.return()}finally{if(b)throw w}}v&&e[i][l].freeze&&Object.freeze(v)}}catch(t){c=!0,u=t}finally{try{!o&&p.return&&p.return()}finally{if(c)throw u}}}function j(t,e,n,r){n[t.obj]||(n[t.obj]=e[t.obj]?e[t.obj]._clone():_(t.obj));var o=n[t.obj],i={},s={};if("create"===t.action);else if("set"===t.action){var c=o.byId(t.key);a(c)&&(i[c[f]]=!0),t.link?(o._set(t.key,n[t.value]||e[t.value]),s[t.value]=!0):o._set(t.key,t.value)}else{if("remove"!==t.action)throw new RangeError("Unknown action type: "+t.action);var u=o.byId(t.key);a(u)&&(i[u[f]]=!0),o.remove(t.key)}E(t.obj,i,s,r)}function T(t,e,n){n[t]||(n[t]=e[t]._clone());var r=n[t],o=!0,i=!1,s=void 0;try{for(var c,u=Object.keys(r.entries)[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var l=c.value,h=r.byId(l);a(h)&&n[h[f]]&&r._set(l,n[h[f]])}}catch(t){i=!0,s=t}finally{try{!o&&u.return&&u.return()}finally{if(i)throw s}}}function I(t,e){if(t&&t[f]!==e)throw new RangeError("cloneListObject ID mismatch: "+t[f]+" !== "+e);var n=t?t.slice():[],r=t&&t[h]?t[h].slice():[],o=t&&t[g]?t[g].slice():[],i=t&&t[p]?t[p]:0;return Object.defineProperty(n,f,{value:e}),Object.defineProperty(n,h,{value:r}),Object.defineProperty(n,g,{value:o}),Object.defineProperty(n,p,{value:i,writable:!0}),n}function A(t,e,n,r){n[t.obj]||(n[t.obj]=I(e[t.obj],t.obj));var o=n[t.obj],i=o[h],a=o[g],s=null,u=null;if(["insert","set"].includes(t.action)&&(s=w(t,e,n),t.conflicts)){u={};var l=!0,f=!1,d=void 0;try{for(var y,m=t.conflicts[Symbol.iterator]();!(l=(y=m.next()).done);l=!0){var v=y.value;u[v.actor]=w(v,e,n)}}catch(t){f=!0,d=t}finally{try{!l&&m.return&&m.return()}finally{if(f)throw d}}Object.freeze(u)}var _={},b={};if("create"===t.action);else if("insert"===t.action)o[p]=Math.max(o[p],c(t.elemId).counter),o.splice(t.index,0,s),i.splice(t.index,0,u),a.splice(t.index,0,t.elemId),b=S(o,t.index);else if("set"===t.action)_=S(o,t.index),o[t.index]=s,i[t.index]=u,b=S(o,t.index);else if("remove"===t.action)_=S(o,t.index),o.splice(t.index,1),i.splice(t.index,1),a.splice(t.index,1);else{if("maxElem"!==t.action)throw new RangeError("Unknown action type: "+t.action);o[p]=Math.max(o[p],t.value)}E(t.obj,_,b,r)}function C(t,e,n){n[t]||(n[t]=I(e[t],t));for(var r=n[t],o=0;o<r.length;o++){var c=r[o];a(c)&&n[c[f]]&&(r[o]=n[c[f]]);var u=r[h][o]||{},g=null,p=!0,d=!1,y=void 0;try{for(var m,v=Object.keys(u)[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var _=m.value;c=u[_],a(c)&&n[c[f]]&&(g||(g=s(u),r[h][o]=g),g[_]=n[c[f]])}}catch(t){d=!0,y=t}finally{try{!p&&v.return&&v.return()}finally{if(d)throw y}}g&&e[i][l].freeze&&Object.freeze(g)}}function M(t,e,n,o,i){var a=t[e].obj;if(!i[a])if(o[a]){var s=o[a].elems.slice(),u=o[a][p];i[a]=y(a,s,u)}else i[a]=y(a,[],0);for(var l=i[a].elems,f=i[a][p],h=-1,g=void 0,d=void 0;e<=n;){var m=t[e];if("create"===m.action);else if("insert"===m.action){h<0&&(h=m.index,g=0,d=[]),f=Math.max(f,c(m.elemId).counter);var v=w(m,o,i);d.push({elemId:m.elemId,value:v,conflicts:m.conflicts}),e!==n&&"insert"===t[e+1].action&&t[e+1].index===m.index+1||(l.splice.apply(l,[h,g].concat(r(d))),h=-1)}else if("set"===m.action)l[m.index]={elemId:l[m.index].elemId,value:w(m,o,i),conflicts:m.conflicts};else if("remove"===m.action)h<0&&(h=m.index,g=0,d=[]),g+=1,e!==n&&["insert","remove"].includes(t[e+1].action)&&t[e+1].index===m.index||(l.splice(h,g),h=-1);else{if("maxElem"!==m.action)throw new RangeError("Unknown action type: "+m.action);f=Math.max(f,m.value)}e+=1}i[a]=y(a,l,f)}t.exports={applyDiffs:function(t,e,n,r){for(var o=0,i=0;i<t.length;i++){var a=t[i];if("map"===a.type)O(a,e,n,r),o=i+1;else if("table"===a.type)j(a,e,n,r),o=i+1;else if("list"===a.type)A(a,e,n,r),o=i+1;else{if("text"!==a.type)throw new TypeError("Unknown object type: "+a.type);i!==t.length-1&&t[i+1].obj===a.obj||(M(t,o,i,e,n),o=i+1)}}},updateParentObjects:function(t,e,n){for(var r=e;Object.keys(r).length>0;){var o={},i=!0,a=!1,s=void 0;try{for(var c,u=Object.keys(r)[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=n[c.value];l&&(o[l]=!0)}}catch(t){a=!0,s=t}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}r=o;var f=!0,h=!1,g=void 0;try{for(var p,d=Object.keys(o)[Symbol.iterator]();!(f=(p=d.next()).done);f=!0){var y=p.value;Array.isArray(e[y]||t[y])?C(y,t,e):(e[y]||t[y])instanceof v?T(y,t,e):k(y,t,e)}}catch(t){h=!0,g=t}finally{try{!f&&d.return&&d.return()}finally{if(h)throw g}}}},cloneRootObject:function(t){if(t[f]!==i)throw new RangeError("Not the root object: "+t[f]);return x(t,i)}}},"./frontend/constants.js":
/*!*******************************!*\
  !*** ./frontend/constants.js ***!
  \*******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=Symbol("_options"),o=Symbol("_cache"),i=Symbol("_inbound"),a=Symbol("_state"),s=Symbol("_objectId"),c=Symbol("_conflicts"),u=Symbol("_change"),l=Symbol("_elemIds"),f=Symbol("_maxElem");t.exports={OPTIONS:r,CACHE:o,INBOUND:i,STATE:a,OBJECT_ID:s,CONFLICTS:c,CHANGE:u,ELEM_IDS:l,MAX_ELEM:f}},"./frontend/context.js":
/*!*****************************!*\
  !*** ./frontend/context.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! ./constants */"./frontend/constants.js"),a=i.CACHE,s=i.INBOUND,c=i.OBJECT_ID,u=i.CONFLICTS,l=i.MAX_ELEM,f=n(/*! ./apply_patch */"./frontend/apply_patch.js").applyDiffs,h=n(/*! ./text */"./frontend/text.js"),g=h.Text,p=h.getElemId,d=n(/*! ./table */"./frontend/table.js").Table,y=n(/*! ./counter */"./frontend/counter.js"),m=y.Counter,v=y.getWriteableCounter,_=n(/*! ../src/common */"./src/common.js"),b=_.isObject,w=_.copyObject,S=n(/*! ../src/uuid */"./src/uuid.js"),E=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.actorId=n,this.cache=e[a],this.updated={},this.inbound=w(e[s]),this.ops=[],this.diffs=[]}return o(t,[{key:"addOp",value:function(t){this.ops.push(t)}},{key:"apply",value:function(t){this.diffs.push(t),f([t],this.cache,this.updated,this.inbound)}},{key:"getObject",value:function(t){var e=this.updated[t]||this.cache[t];if(!e)throw new RangeError("Target object does not exist: "+t);return e}},{key:"getObjectField",value:function(t,e){if(["string","number"].includes(void 0===e?"undefined":r(e))){var n=this.getObject(t);return n[e]instanceof m?v(n[e].value,this,t,e):b(n[e])?this.instantiateObject(n[e][c]):n[e]}}},{key:"createNestedObjects",value:function(t){if("string"==typeof t[c])return t[c];var e=S();if(t instanceof g){this.apply({action:"create",type:"text",obj:e}),this.addOp({action:"makeText",obj:e}),t.length>0&&this.splice(e,0,0,[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t)));var n=this.getObject(e);t[c]=e,t.elems=n.elems,t[l]=n.maxElem,t.context=this}else if(t instanceof d){if(t.count>0)throw new RangeError("Assigning a non-empty Table object is not supported");this.apply({action:"create",type:"table",obj:e}),this.addOp({action:"makeTable",obj:e})}else if(Array.isArray(t))this.apply({action:"create",type:"list",obj:e}),this.addOp({action:"makeList",obj:e}),this.splice(e,0,0,t);else{this.apply({action:"create",type:"map",obj:e}),this.addOp({action:"makeMap",obj:e});var r=!0,o=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this.setMapKey(e,"map",u,t[u])}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}}return e}},{key:"setValue",value:function(t,e,n){if(!["object","boolean","number","string"].includes(void 0===n?"undefined":r(n)))throw new TypeError("Unsupported type of value: "+(void 0===n?"undefined":r(n)));if(b(n)){if(n instanceof Date){var o=n.getTime();return this.addOp({action:"set",obj:t,key:e,value:o,datatype:"timestamp"}),{value:o,datatype:"timestamp"}}if(n instanceof m)return this.addOp({action:"set",obj:t,key:e,value:n.value,datatype:"counter"}),{value:n.value,datatype:"counter"};var i=this.createNestedObjects(n);return this.addOp({action:"link",obj:t,key:e,value:i}),{value:i,link:!0}}return this.addOp({action:"set",obj:t,key:e,value:n}),{value:n}}},{key:"setMapKey",value:function(t,e,n,o){if("string"!=typeof n)throw new RangeError("The key of a map entry must be a string, not "+(void 0===n?"undefined":r(n)));if(""===n)throw new RangeError("The key of a map entry must not be an empty string");var i=this.getObject(t);if(i[n]instanceof m)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(i[n]!==o||i[u][n]||void 0===o){var a=this.setValue(t,n,o);this.apply(Object.assign({action:"set",type:e,obj:t,key:n},a))}}},{key:"deleteMapKey",value:function(t,e){void 0!==this.getObject(t)[e]&&(this.apply({action:"remove",type:"map",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e}))}},{key:"insertListItem",value:function(t,e,n){var r=this.getObject(t);if(e<0||e>r.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+r.length);var o=r[l]+1,i=r instanceof g?"text":"list",a=0===e?"_head":p(r,e-1),s=this.actorId+":"+o;this.addOp({action:"ins",obj:t,key:a,elem:o});var c=this.setValue(t,s,n);this.apply(Object.assign({action:"insert",type:i,obj:t,index:e,elemId:s},c)),this.getObject(t)[l]=o}},{key:"setListIndex",value:function(t,e,n){var r=this.getObject(t);if(e!==r.length){if(e<0||e>r.length)throw new RangeError("List index "+e+" is out of bounds for list of length "+r.length);if(r[e]instanceof m)throw new RangeError("Cannot overwrite a Counter object; use .increment() or .decrement() to change its value.");if(r[e]!==n||r[u][e]||void 0===n){var o=p(r,e),i=r instanceof g?"text":"list",a=this.setValue(t,o,n);this.apply(Object.assign({action:"set",type:i,obj:t,index:e},a))}}else this.insertListItem(t,e,n)}},{key:"splice",value:function(t,e,n,r){var o=this.getObject(t),i=o instanceof g?"text":"list";if(n>0){if(e<0||e>o.length-n)throw new RangeError(n+" deletions starting at index "+e+" are out of bounds for list of length "+o.length);for(var a=0;a<n;a++)this.addOp({action:"del",obj:t,key:p(o,e)}),this.apply({action:"remove",type:i,obj:t,index:e}),0===a&&(o=this.getObject(t))}for(var s=0;s<r.length;s++)this.insertListItem(t,e+s,r[s])}},{key:"addTableRow",value:function(t,e){if(!b(e)||Array.isArray(e))throw new TypeError("A table row must be an object");if(e[c])throw new TypeError("Cannot reuse an existing object as table row");if(e.id)throw new TypeError('A table row must not have an "id" property; it is generated automatically');var n=this.createNestedObjects(e);return this.apply({action:"set",type:"table",obj:t,key:n,value:n,link:!0}),this.addOp({action:"link",obj:t,key:n,value:n}),n}},{key:"deleteTableRow",value:function(t,e){this.apply({action:"remove",type:"table",obj:t,key:e}),this.addOp({action:"del",obj:t,key:e})}},{key:"increment",value:function(t,e,n){var r=this.getObject(t);if(!(r[e]instanceof m))throw new TypeError("Only counter values can be incremented");var o=r[e].value+n;if(Array.isArray(r)||r instanceof g){var i=p(r,e),a=r instanceof g?"text":"list";this.addOp({action:"inc",obj:t,key:i,value:n}),this.apply({action:"set",obj:t,type:a,index:e,value:o,datatype:"counter"})}else this.addOp({action:"inc",obj:t,key:e,value:n}),this.apply({action:"set",obj:t,type:"map",key:e,value:o,datatype:"counter"})}}]),t}();t.exports={Context:E}},"./frontend/counter.js":
/*!*****************************!*\
  !*** ./frontend/counter.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){i(this,t),this.value=e||0,Object.freeze(this)}return r(t,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.valueOf().toString()}},{key:"toJSON",value:function(){return this.value}}]),t}(),s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"increment",value:function(t){return t="number"==typeof t?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}},{key:"decrement",value:function(t){return this.increment("number"==typeof t?-t:-1)}}]),e}(a);t.exports={Counter:a,getWriteableCounter:function(t,e,n,r){var o=Object.create(s.prototype);return o.value=t,o.context=e,o.objectId=n,o.key=r,o}}},"./frontend/index.js":
/*!***************************!*\
  !*** ./frontend/index.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(/*! ./constants */"./frontend/constants.js"),a=i.OPTIONS,s=i.CACHE,c=i.INBOUND,u=i.STATE,l=i.OBJECT_ID,f=i.CONFLICTS,h=i.CHANGE,g=i.ELEM_IDS,p=n(/*! ../src/common */"./src/common.js"),d=p.ROOT_ID,y=p.isObject,m=p.copyObject,v=n(/*! ../src/uuid */"./src/uuid.js"),_=n(/*! ./apply_patch */"./frontend/apply_patch.js"),b=_.applyDiffs,w=_.updateParentObjects,S=_.cloneRootObject,E=n(/*! ./proxies */"./frontend/proxies.js").rootObjectProxy,x=n(/*! ./context */"./frontend/context.js").Context,O=n(/*! ./text */"./frontend/text.js").Text,k=n(/*! ./table */"./frontend/table.js").Table,j=n(/*! ./counter */"./frontend/counter.js").Counter;function T(t,e,n,r){var o=e[d];if(o||(o=S(t[s][d]),e[d]=o),Object.defineProperty(o,a,{value:t[a]}),Object.defineProperty(o,s,{value:e}),Object.defineProperty(o,c,{value:n}),Object.defineProperty(o,u,{value:r}),t[a].freeze){var i=!0,l=!1,h=void 0;try{for(var g,p=Object.keys(e)[Symbol.iterator]();!(i=(g=p.next()).done);i=!0){var y=g.value;e[y]instanceof k?e[y]._freeze():(Object.freeze(e[y]),Object.freeze(e[y][f]))}}catch(t){l=!0,h=t}finally{try{!i&&p.return&&p.return()}finally{if(l)throw h}}}var m=!0,v=!1,_=void 0;try{for(var b,w=Object.keys(t[s])[Symbol.iterator]();!(m=(b=w.next()).done);m=!0){var E=b.value;e[E]||(e[E]=t[s][E])}}catch(t){v=!0,_=t}finally{try{!m&&w.return&&w.return()}finally{if(v)throw _}}return t[a].freeze&&(Object.freeze(e),Object.freeze(n)),o}function I(t,e,n,i){var s=D(t);if(!s)throw new Error("Actor ID must be initialized with setActorId() before making a change");var c=m(t[u]);c.seq+=1;var l=m(c.deps);delete l[s];var f={requestType:e,actor:s,seq:c.seq,deps:l};if(i&&void 0!==i.message&&(f.message=i.message),i&&!1===i.undoable&&(f.undoable=!1),n&&(f.ops=function(t){for(var e={},n=[],r=t.length-1;r>=0;r--){var i=t[r],a=i.obj,s=i.key,c=i.action;["set","del","link","inc"].includes(c)?e[a]?e[a][s]?"inc"===e[a][s].action&&["set","inc"].includes(c)&&(e[a][s].action=c,e[a][s].value+=i.value):(e[a][s]=i,n.push(i)):(e[a]=o({},s,i),n.push(i)):n.push(i)}return n.reverse()}(n.ops)),t[a].backend){var h=t[a].backend.applyLocalChange(c.backendState,f),g=r(h,2),p=g[0],d=g[1];return c.backendState=p,c.requests=[],[A(t,d,c,!0),f]}n||(n=new x(t,s));var y=m(f);return y.before=t,y.diffs=n.diffs,c.requests=c.requests.slice(),c.requests.push(y),[T(t,n.updated,n.inbound,c),f]}function A(t,e,n,r){var o=D(t),i=m(t[c]),a={};if(b(e.diffs,t[s],a,i),w(t[s],a,i),r){var u=e.clock?e.clock[o]:void 0;u&&u>n.seq&&(n.seq=u),n.deps=e.deps,n.canUndo=e.canUndo,n.canRedo=e.canRedo}return T(t,a,i,n)}function C(t,e){var n=[],r=!0,o=!1,i=void 0;try{t:for(var a,s=t.diffs[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;c=m(c);var u=!0,l=!1,f=void 0;try{for(var h,g=e.diffs[Symbol.iterator]();!(u=(h=g.next()).done);u=!0){var p=h.value;if(c.obj===p.obj&&"list"===c.type&&["insert","set","remove"].includes(c.action)&&("insert"===p.action&&p.index<=c.index&&(c.index+=1),"remove"===p.action&&p.index<c.index&&(c.index-=1),"remove"===p.action&&p.index===c.index&&("set"===c.action&&(c.action="insert"),"remove"===c.action)))continue t}}catch(t){l=!0,f=t}finally{try{!u&&g.return&&g.return()}finally{if(l)throw f}}n.push(c)}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}t.diffs=n}function M(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!y(t))throw new TypeError("Unsupported value for init() options: "+t);void 0!==t.actorId||t.deferActorId||(t.actorId=v());var e={},n=o({},d,e),r={seq:0,requests:[],deps:{},canUndo:!1,canRedo:!1};return t.backend&&(r.backendState=t.backend.init()),Object.defineProperty(e,l,{value:d}),Object.defineProperty(e,a,{value:Object.freeze(t)}),Object.defineProperty(e,f,{value:Object.freeze({})}),Object.defineProperty(e,s,{value:Object.freeze(n)}),Object.defineProperty(e,c,{value:Object.freeze({})}),Object.defineProperty(e,u,{value:Object.freeze(r)}),Object.freeze(e)}function L(t,e,n){if(t[l]!==d)throw new TypeError("The first argument to Automerge.change must be the document root");if(t[h])throw new TypeError("Calls to Automerge.change cannot be nested");if("function"==typeof e&&void 0===n){var r=[n,e];e=r[0],n=r[1]}if("string"==typeof e&&(e={message:e}),void 0!==e&&!y(e))throw new TypeError("Unsupported type of options");var o=D(t);if(!o)throw new Error("Actor ID must be initialized with setActorId() before making a change");var i=new x(t,o);return n(E(i)),0===Object.keys(i.updated).length?[t,null]:(w(t[s],i.updated,i.inbound),I(t,"change",i,e))}function R(t){return t[u].requests.some((function(t){return["undo","redo"].includes(t.requestType)}))}function D(t){return t[u].actorId||t[a].actorId}t.exports={init:M,from:function(t,e){return L(M(e),"Initialization",(function(e){return Object.assign(e,t)}))},change:L,emptyChange:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!y(e))throw new TypeError("Unsupported type of options");var n=D(t);if(!n)throw new Error("Actor ID must be initialized with setActorId() before making a change");return I(t,"change",new x(t,n),e)},applyPatch:function(t,e){var n=m(t[u]),r=void 0;if(n.requests.length>0)if(r=n.requests[0].before,e.actor===D(t)&&void 0!==e.seq){if(n.requests[0].seq!==e.seq)throw new RangeError("Mismatched sequence number: patch "+e.seq+" does not match next request "+n.requests[0].seq);n.requests=n.requests.slice(1).map(m)}else n.requests=n.requests.slice().map(m);else r=t,n.requests=[];if(t[a].backend){if(!e.state)throw new RangeError("When an immediate backend is used, a patch must contain the new backend state");return n.backendState=e.state,n.requests=[],A(t,e,n,!0)}var o=A(r,e,n,!0),i=!0,s=!1,c=void 0;try{for(var l,f=n.requests[Symbol.iterator]();!(i=(l=f.next()).done);i=!0){var h=l.value;h.before=o,C(h,e),o=A(h.before,h,n,!1)}}catch(t){s=!0,c=t}finally{try{!i&&f.return&&f.return()}finally{if(s)throw c}}return o},canUndo:function(t){return!!t[u].canUndo&&!R(t)},undo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!y(e))throw new TypeError("Unsupported type of options");if(!t[u].canUndo)throw new Error("Cannot undo: there is nothing to be undone");if(R(t))throw new Error("Can only have one undo in flight at any one time");return I(t,"undo",null,e)},canRedo:function(t){return!!t[u].canRedo&&!R(t)},redo:function(t,e){if("string"==typeof e&&(e={message:e}),void 0!==e&&!y(e))throw new TypeError("Unsupported type of options");if(!t[u].canRedo)throw new Error("Cannot redo: there is no prior undo");if(R(t))throw new Error("Can only have one redo in flight at any one time");return I(t,"redo",null,e)},getObjectId:function(t){return t[l]},getObjectById:function(t,e){var n=t[h];return n?n.instantiateObject(e):t[s][e]},getActorId:D,setActorId:function(t,e){var n=Object.assign({},t[u],{actorId:e});return T(t,{},t[c],n)},getConflicts:function(t,e){return t[f][e]},getBackendState:function(t){return t[u].backendState},getElementIds:function(t){return t[g]},Text:O,Table:k,Counter:j}},"./frontend/proxies.js":
/*!*****************************!*\
  !*** ./frontend/proxies.js ***!
  \*****************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(/*! ../src/common */"./src/common.js").ROOT_ID,i=n(/*! ./constants */"./frontend/constants.js"),a=i.OBJECT_ID,s=i.CHANGE,c=i.STATE,u=n(/*! ./text */"./frontend/text.js").Text,l=n(/*! ./table */"./frontend/table.js").Table;function f(t){if("string"==typeof t&&/^[0-9]+$/.test(t)&&(t=parseInt(t)),"number"!=typeof t)throw new TypeError("A list index must be a number, but you passed "+JSON.stringify(t));if(t<0||isNaN(t)||t===1/0||t===-1/0)throw new RangeError("A list index must be positive, but you passed "+t);return t}var h={get:function(t,e){var n=t.context,r=t.objectId;return e===a?r:e===s?n:e===c?{actorId:n.actorId}:n.getObjectField(r,e)},set:function(t,e,n){var r=t.context,o=t.objectId,i=t.readonly;if(Array.isArray(i)&&i.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return r.setMapKey(o,"map",e,n),!0},deleteProperty:function(t,e){var n=t.context,r=t.objectId,o=t.readonly;if(Array.isArray(o)&&o.indexOf(e)>=0)throw new RangeError('Object property "'+e+'" cannot be modified');return n.deleteMapKey(r,e),!0},has:function(t,e){var n=t.context,r=t.objectId;return[a,s].includes(e)||e in n.getObject(r)},getOwnPropertyDescriptor:function(t,e){var n=t.context,r=t.objectId;if(e in n.getObject(r))return{configurable:!0,enumerable:!0}},ownKeys:function(t){var e=t.context,n=t.objectId;return Object.keys(e.getObject(n))}},g={get:function(t,e){var n=r(t,2),o=n[0],i=n[1];return e===Symbol.iterator?o.getObject(i)[Symbol.iterator]:e===a?i:e===s?o:"length"===e?o.getObject(i).length:"string"==typeof e&&/^[0-9]+$/.test(e)?o.getObjectField(i,f(e)):function(t,e){for(var n={deleteAt:function(n,r){return t.splice(e,f(n),r||1,[]),this},fill:function(n,r,o){for(var i=t.getObject(e),a=f(r||0);a<f(o||i.length);a++)t.setListIndex(e,a,n);return this},insertAt:function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return t.splice(e,f(n),0,o),this},pop:function(){var n=t.getObject(e);if(0!=n.length){var r=t.getObjectField(e,n.length-1);return t.splice(e,n.length-1,1,[]),r}},push:function(){for(var n=t.getObject(e),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.splice(e,n.length,0,o),t.getObject(e).length},shift:function(){if(0!=t.getObject(e).length){var n=t.getObjectField(e,0);return t.splice(e,0,1,[]),n}},splice:function(n,r){var o=t.getObject(e);n=f(n),void 0===r&&(r=o.length-n);for(var i=[],a=0;a<r;a++)i.push(t.getObjectField(e,n+a));for(var s=arguments.length,c=Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];return t.splice(e,n,r,c),i},unshift:function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.splice(e,0,0,r),t.getObject(e).length}},r=function(r){var o=t.getObject(e);n[r]=function(){return o[r]()}},o=["entries","keys","values"],i=0;i<o.length;i++)r(o[i]);for(var a=function(r){n[r]=function(){for(var n,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=t.getObject(e).map((function(n,r){return t.getObjectField(e,r)}));return(n=s[r]).call.apply(n,[s].concat(i))}},s=["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString","toString"],c=0;c<s.length;c++)a(s[c]);return n}(o,i)[e]},set:function(t,e,n){var o=r(t,2),i=o[0],a=o[1];return i.setListIndex(a,f(e),n),!0},deleteProperty:function(t,e){var n=r(t,2),o=n[0],i=n[1];return o.splice(i,f(e),1,[]),!0},has:function(t,e){var n=r(t,2),o=n[0],i=n[1];return"string"==typeof e&&/^[0-9]+$/.test(e)?f(e)<o.getObject(i).length:["length",a,s].includes(e)},getOwnPropertyDescriptor:function(t,e){if("length"===e)return{writable:!0};if(e===a)return{configurable:!1,enumerable:!1};var n=r(t,2),o=n[0],i=n[1],s=o.getObject(i);return"string"==typeof e&&/^[0-9]+$/.test(e)&&f(e)<s.length?{configurable:!0,enumerable:!0}:void 0},ownKeys:function(t){var e=r(t,2),n=e[0],o=e[1],i=n.getObject(o),a=["length"],s=!0,c=!1,u=void 0;try{for(var l,f=Object.keys(i)[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;a.push(h)}}catch(t){c=!0,u=t}finally{try{!s&&f.return&&f.return()}finally{if(c)throw u}}return a}};function p(t,e,n){return new Proxy({context:t,objectId:e,readonly:n},h)}function d(t,e){var n=this.getObject(t);return Array.isArray(n)?function(t,e){return new Proxy([t,e],g)}(this,t):n instanceof u||n instanceof l?n.getWriteable(this):p(this,t,e)}t.exports={rootObjectProxy:function(t){return t.instantiateObject=d,p(t,o)}}},"./frontend/table.js":
/*!***************************!*\
  !*** ./frontend/table.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(/*! ./constants */"./frontend/constants.js"),s=a.OBJECT_ID,c=a.CONFLICTS,u=n(/*! ../src/common */"./src/common.js"),l=u.isObject,f=u.copyObject;function h(t,e,n){var r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value;if(e[c]!==n[c]){if("number"==typeof e[c]&&"number"==typeof n[c])return e[c]-n[c];var u=""+e[c],l=""+n[c];if(u!==l)return u<l?-1:1}}}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return 0}var g=function(){function t(){i(this,t),this.entries=Object.freeze({}),Object.freeze(this)}return r(t,[{key:"byId",value:function(t){return this.entries[t]}},{key:"filter",value:function(t,e){return this.rows.filter(t,e)}},{key:"find",value:function(t,e){return this.rows.find(t,e)}},{key:"map",value:function(t,e){return this.rows.map(t,e)}},{key:"sort",value:function(t){if("function"==typeof t)return this.rows.sort(t);if("string"==typeof t)return this.rows.sort((function(e,n){return h([t],e,n)}));if(Array.isArray(t))return this.rows.sort((function(e,n){return h(t,e,n)}));if(void 0===t)return this.rows.sort((function(t,e){return h(["id"],t,e)}));throw new TypeError("Unsupported sorting argument: "+t)}},{key:Symbol.iterator,value:function(){var t=this.rows,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e]}:{done:!0}}}}},{key:"_clone",value:function(){if(!this[s])throw new RangeError("clone() requires the objectId to be set");return d(this[s],f(this.entries))}},{key:"_set",value:function(t,e){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");l(e)&&!Array.isArray(e)&&Object.defineProperty(e,"id",{value:t,enumerable:!0}),this.entries[t]=e}},{key:"remove",value:function(t){if(Object.isFrozen(this.entries))throw new Error("A table can only be modified in a change function");delete this.entries[t]}},{key:"_freeze",value:function(){Object.freeze(this.entries),Object.freeze(this)}},{key:"getWriteable",value:function(t){if(!this[s])throw new RangeError("getWriteable() requires the objectId to be set");var e=Object.create(p.prototype);return e[s]=this[s],e.context=t,e.entries=this.entries,e}},{key:"toJSON",value:function(){var t={},e=!0,n=!1,r=void 0;try{for(var o,i=this.ids[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;t[a]=this.byId(a)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"ids",get:function(){var t=this;return Object.keys(this.entries).filter((function(e){var n=t.entries[e];return l(n)&&n.id===e}))}},{key:"count",get:function(){return this.ids.length}},{key:"rows",get:function(){var t=this;return this.ids.map((function(e){return t.byId(e)}))}}]),t}(),p=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"byId",value:function(t){if(l(this.entries[t])&&this.entries[t].id===t)return this.context.instantiateObject(t,["id"])}},{key:"add",value:function(t){return this.context.addTableRow(this[s],t)}},{key:"remove",value:function(t){if(!l(this.entries[t])||this.entries[t].id!==t)throw new RangeError("There is no row with ID "+t+" in this table");this.context.deleteTableRow(this[s],t)}}]),e}(g);function d(t,e){var n=Object.create(g.prototype);return n[s]=t,n[c]=Object.freeze({}),n.entries=e||{},n}t.exports={Table:g,instantiateTable:d}},"./frontend/text.js":
/*!**************************!*\
  !*** ./frontend/text.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}for(var i=n(/*! ./constants */"./frontend/constants.js"),a=i.OBJECT_ID,s=i.ELEM_IDS,c=i.MAX_ELEM,u=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e)return g(void 0,e.split("").map((function(t){return{value:t}})),void 0);if(Array.isArray(e))return g(void 0,e.map((function(t){return{value:t}})),void 0);if(void 0===e)return g(void 0,[],0);throw new TypeError("Unsupported initial value for Text: "+e)}return r(t,[{key:"get",value:function(t){return this.elems[t].value}},{key:"getElemId",value:function(t){return this.elems[t].elemId}},{key:Symbol.iterator,value:function(){var t=this.elems,e=-1;return{next:function(){return(e+=1)<t.length?{done:!1,value:t[e].value}:{done:!0}}}}},{key:"toString",value:function(){var t="",e=!0,n=!1,r=void 0;try{for(var o,i=this.elems[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;"string"==typeof a.value&&(t+=a.value)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"toSpans",value:function(){var t=[],e="",n=!0,r=!1,o=void 0;try{for(var i,a=this.elems[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var s=i.value;"string"==typeof s.value?e+=s.value:(e.length>0&&(t.push(e),e=""),t.push(s.value))}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e.length>0&&t.push(e),t}},{key:"toJSON",value:function(){return this.toString()}},{key:"getWriteable",value:function(t){if(!this[a])throw new RangeError("getWriteable() requires the objectId to be set");var e=g(this[a],this.elems,this[c]);return e.context=t,e}},{key:"set",value:function(t,e){if(this.context)this.context.setListIndex(this[a],t,e);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems[t].value=e}return this}},{key:"insertAt",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.context)this.context.splice(this[a],t,0,n);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");var i;(i=this.elems).splice.apply(i,[t,0].concat(o(n.map((function(t){return{value:t}})))))}return this}},{key:"deleteAt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.context)this.context.splice(this[a],t,e,[]);else{if(this[a])throw new TypeError("Automerge.Text object cannot be modified outside of a change block");this.elems.splice(t,e)}return this}},{key:"length",get:function(){return this.elems.length}}]),t}(),l=function(t){u.prototype[t]=function(){for(var e,n=[].concat(o(this)),r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n[t]).call.apply(e,[n].concat(i))}},f=["concat","every","filter","find","findIndex","forEach","includes","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toLocaleString"],h=0;h<f.length;h++)l(f[h]);function g(t,e,n){var r=Object.create(u.prototype);return r[a]=t,r.elems=e,r[c]=n,r}t.exports={Text:u,getElemId:function(t,e){return t instanceof u?t.getElemId(e):t[s][e]},instantiateText:g}},"./node_modules/immutable/dist/immutable.js":
/*!**************************************************!*\
  !*** ./node_modules/immutable/dist/immutable.js ***!
  \**************************************************/
/*! no static exports found */function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return a(t)?t:H(t)}function r(t){return s(t)?t:$(t)}function o(t){return c(t)?t:F(t)}function i(t){return a(t)&&!u(t)?t:V(t)}function a(t){return!(!t||!t[f])}function s(t){return!(!t||!t[h])}function c(t){return!(!t||!t[g])}function u(t){return s(t)||c(t)}function l(t){return!(!t||!t[p])}e(r,n),e(o,n),e(i,n),n.isIterable=a,n.isKeyed=s,n.isIndexed=c,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=o,n.Set=i;var f="@@__IMMUTABLE_ITERABLE__@@",h="@@__IMMUTABLE_KEYED__@@",g="@@__IMMUTABLE_INDEXED__@@",p="@@__IMMUTABLE_ORDERED__@@",d={},y={value:!1},m={value:!1};function v(t){return t.value=!1,t}function _(t){t&&(t.value=!0)}function b(){}function w(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),o=0;o<n;o++)r[o]=t[o+e];return r}function S(t){return void 0===t.size&&(t.size=t.__iterate(x)),t.size}function E(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?S(t)+e:e}function x(){return!0}function O(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function k(t,e){return T(t,e,0)}function j(t,e){return T(t,e,e)}function T(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var I,A,C,M="function"==typeof Symbol&&Symbol.iterator,L=M||"@@iterator";function R(t){this.next=t}function D(t,e,n,r){var o=0===t?e:1===t?n:[e,n];return r?r.value=o:r={value:o,done:!1},r}function q(){return{value:void 0,done:!0}}function P(t){return!!U(t)}function N(t){return t&&"function"==typeof t.next}function B(t){var e=U(t);return e&&e.call(t)}function U(t){var e=t&&(M&&t[M]||t["@@iterator"]);if("function"==typeof e)return e}function z(t){return t&&"number"==typeof t.length}function H(t){return null==t?J():a(t)?t.toSeq():function(t){var e=tt(t)||"object"==typeof t&&new W(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function $(t){return null==t?J().toKeyedSeq():a(t)?s(t)?t.toSeq():t.fromEntrySeq():Z(t)}function F(t){return null==t?J():a(t)?s(t)?t.entrySeq():t.toIndexedSeq():Q(t)}function V(t){return(null==t?J():a(t)?s(t)?t.entrySeq():t:Q(t)).toSetSeq()}function Y(t){this._array=t,this.size=t.length}function W(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function K(t){this._iterable=t,this.size=t.length||t.size}function X(t){this._iterator=t,this._iteratorCache=[]}function G(t){return!(!t||!t["@@__IMMUTABLE_SEQ__@@"])}function J(){return I||(I=new Y([]))}function Z(t){var e=Array.isArray(t)?new Y(t).fromEntrySeq():N(t)?new X(t).fromEntrySeq():P(t)?new K(t).fromEntrySeq():"object"==typeof t?new W(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function Q(t){var e=tt(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function tt(t){return z(t)?new Y(t):N(t)?new X(t):P(t)?new K(t):void 0}function et(t,e,n,r){var o=t._cache;if(o){for(var i=o.length-1,a=0;a<=i;a++){var s=o[n?i-a:a];if(!1===e(s[1],r?s[0]:a,t))return a+1}return a}return t.__iterateUncached(e,n)}function nt(t,e,n,r){var o=t._cache;if(o){var i=o.length-1,a=0;return new R((function(){var t=o[n?i-a:a];return a++>i?{value:void 0,done:!0}:D(e,r?t[0]:a-1,t[1])}))}return t.__iteratorUncached(e,n)}function rt(t,e){return e?function t(e,n,r,o){return Array.isArray(n)?e.call(o,r,F(n).map((function(r,o){return t(e,r,o,n)}))):it(n)?e.call(o,r,$(n).map((function(r,o){return t(e,r,o,n)}))):n}(e,t,"",{"":t}):ot(t)}function ot(t){return Array.isArray(t)?F(t).map(ot).toList():it(t)?$(t).map(ot).toMap():t}function it(t){return t&&(t.constructor===Object||void 0===t.constructor)}function at(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function st(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||c(t)!==c(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var o=r.next().value;return o&&at(o[1],t)&&(n||at(o[0],e))}))&&r.next().done}var o=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{o=!0;var i=t;t=e,e=i}var f=!0,h=e.__iterate((function(e,r){if(n?!t.has(e):o?!at(e,t.get(r,d)):!at(t.get(r,d),e))return f=!1,!1}));return f&&t.size===h}function ct(t,e){if(!(this instanceof ct))return new ct(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(A)return A;A=this}}function ut(t,e){if(!t)throw new Error(e)}function lt(t,e,n){if(!(this instanceof lt))return new lt(t,e,n);if(ut(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(C)return C;C=this}}function ft(){throw TypeError("Abstract")}function ht(){}function gt(){}function pt(){}R.prototype.toString=function(){return"[Iterator]"},R.KEYS=0,R.VALUES=1,R.ENTRIES=2,R.prototype.inspect=R.prototype.toSource=function(){return this.toString()},R.prototype[L]=function(){return this},e(H,n),H.of=function(){return H(arguments)},H.prototype.toSeq=function(){return this},H.prototype.toString=function(){return this.__toString("Seq {","}")},H.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},H.prototype.__iterate=function(t,e){return et(this,t,e,!0)},H.prototype.__iterator=function(t,e){return nt(this,t,e,!0)},e($,H),$.prototype.toKeyedSeq=function(){return this},e(F,H),F.of=function(){return F(arguments)},F.prototype.toIndexedSeq=function(){return this},F.prototype.toString=function(){return this.__toString("Seq [","]")},F.prototype.__iterate=function(t,e){return et(this,t,e,!1)},F.prototype.__iterator=function(t,e){return nt(this,t,e,!1)},e(V,H),V.of=function(){return V(arguments)},V.prototype.toSetSeq=function(){return this},H.isSeq=G,H.Keyed=$,H.Set=V,H.Indexed=F,H.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,e(Y,F),Y.prototype.get=function(t,e){return this.has(t)?this._array[E(this,t)]:e},Y.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,o=0;o<=r;o++)if(!1===t(n[e?r-o:o],o,this))return o+1;return o},Y.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,o=0;return new R((function(){return o>r?{value:void 0,done:!0}:D(t,o,n[e?r-o++:o++])}))},e(W,$),W.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},W.prototype.has=function(t){return this._object.hasOwnProperty(t)},W.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,o=r.length-1,i=0;i<=o;i++){var a=r[e?o-i:i];if(!1===t(n[a],a,this))return i+1}return i},W.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,o=r.length-1,i=0;return new R((function(){var a=r[e?o-i:i];return i++>o?{value:void 0,done:!0}:D(t,a,n[a])}))},W.prototype[p]=!0,e(K,F),K.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=B(this._iterable),r=0;if(N(n))for(var o;!(o=n.next()).done&&!1!==t(o.value,r++,this););return r},K.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=B(this._iterable);if(!N(n))return new R(q);var r=0;return new R((function(){var e=n.next();return e.done?e:D(t,r++,e.value)}))},e(X,F),X.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,o=this._iteratorCache,i=0;i<o.length;)if(!1===t(o[i],i++,this))return i;for(;!(n=r.next()).done;){var a=n.value;if(o[i]=a,!1===t(a,i++,this))break}return i},X.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,o=0;return new R((function(){if(o>=r.length){var e=n.next();if(e.done)return e;r[o]=e.value}return D(t,o,r[o++])}))},e(ct,F),ct.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},ct.prototype.get=function(t,e){return this.has(t)?this._value:e},ct.prototype.includes=function(t){return at(this._value,t)},ct.prototype.slice=function(t,e){var n=this.size;return O(t,e,n)?this:new ct(this._value,j(e,n)-k(t,n))},ct.prototype.reverse=function(){return this},ct.prototype.indexOf=function(t){return at(this._value,t)?0:-1},ct.prototype.lastIndexOf=function(t){return at(this._value,t)?this.size:-1},ct.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},ct.prototype.__iterator=function(t,e){var n=this,r=0;return new R((function(){return r<n.size?D(t,r++,n._value):{value:void 0,done:!0}}))},ct.prototype.equals=function(t){return t instanceof ct?at(this._value,t._value):st(t)},e(lt,F),lt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},lt.prototype.get=function(t,e){return this.has(t)?this._start+E(this,t)*this._step:e},lt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},lt.prototype.slice=function(t,e){return O(t,e,this.size)?this:(t=k(t,this.size),(e=j(e,this.size))<=t?new lt(0,0):new lt(this.get(t,this._end),this.get(e,this._end),this._step))},lt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},lt.prototype.lastIndexOf=function(t){return this.indexOf(t)},lt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;i<=n;i++){if(!1===t(o,i,this))return i+1;o+=e?-r:r}return i},lt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,o=e?this._start+n*r:this._start,i=0;return new R((function(){var a=o;return o+=e?-r:r,i>n?{value:void 0,done:!0}:D(t,i++,a)}))},lt.prototype.equals=function(t){return t instanceof lt?this._start===t._start&&this._end===t._end&&this._step===t._step:st(this,t)},e(ft,n),e(ht,ft),e(gt,ft),e(pt,ft),ft.Keyed=ht,ft.Indexed=gt,ft.Set=pt;var dt="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function yt(t){return t>>>1&1073741824|3221225471&t}function mt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return yt(n)}if("string"===e)return t.length>Ot?function(t){var e=Tt[t];return void 0===e&&(e=vt(t),jt===kt&&(jt=0,Tt={}),jt++,Tt[t]=e),e}(t):vt(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(St&&void 0!==(e=_t.get(t)))return e;if(void 0!==(e=t[xt]))return e;if(!wt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[xt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Et,1073741824&Et&&(Et=0),St)_t.set(t,e);else{if(void 0!==bt&&!1===bt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(wt)Object.defineProperty(t,xt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[xt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[xt]=e}}return e}(t);if("function"==typeof t.toString)return vt(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function vt(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return yt(e)}var _t,bt=Object.isExtensible,wt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),St="function"==typeof WeakMap;St&&(_t=new WeakMap);var Et=0,xt="__immutablehash__";"function"==typeof Symbol&&(xt=Symbol(xt));var Ot=16,kt=255,jt=0,Tt={};function It(t){ut(t!==1/0,"Cannot perform this action with an infinite size.")}function At(t){return null==t?Ft():Ct(t)&&!l(t)?t:Ft().withMutations((function(e){var n=r(t);It(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ct(t){return!(!t||!t[Lt])}e(At,ht),At.of=function(){var e=t.call(arguments,0);return Ft().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},At.prototype.toString=function(){return this.__toString("Map {","}")},At.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},At.prototype.set=function(t,e){return Vt(this,t,e)},At.prototype.setIn=function(t,e){return this.updateIn(t,d,(function(){return e}))},At.prototype.remove=function(t){return Vt(this,t,d)},At.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return d}))},At.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},At.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,o){var i=e===d,a=n.next();if(a.done){var s=i?r:e,c=o(s);return c===s?e:c}ut(i||e&&e.set,"invalid keyPath");var u=a.value,l=i?d:e.get(u,d),f=t(l,n,r,o);return f===l?e:f===d?e.remove(u):(i?Ft():e).set(u,f)}(this,Xe(t),e,n);return r===d?void 0:r},At.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Ft()},At.prototype.merge=function(){return Xt(this,void 0,arguments)},At.prototype.mergeWith=function(e){var n=t.call(arguments,1);return Xt(this,e,n)},At.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Ft(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},At.prototype.mergeDeep=function(){return Xt(this,Gt,arguments)},At.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Xt(this,Jt(e),n)},At.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Ft(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},At.prototype.sort=function(t){return we(Ne(this,t))},At.prototype.sortBy=function(t,e){return we(Ne(this,e,t))},At.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},At.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new b)},At.prototype.asImmutable=function(){return this.__ensureOwner()},At.prototype.wasAltered=function(){return this.__altered},At.prototype.__iterator=function(t,e){return new Ut(this,t,e)},At.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},At.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?$t(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},At.isMap=Ct;var Mt,Lt="@@__IMMUTABLE_MAP__@@",Rt=At.prototype;function Dt(t,e){this.ownerID=t,this.entries=e}function qt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function Pt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Nt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Bt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Ut(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Ht(t._root)}function zt(t,e){return D(t,e[0],e[1])}function Ht(t,e){return{node:t,index:0,__prev:e}}function $t(t,e,n,r){var o=Object.create(Rt);return o.size=t,o._root=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Ft(){return Mt||(Mt=$t(0))}function Vt(t,e,n){var r,o;if(t._root){var i=v(y),a=v(m);if(r=Yt(t._root,t.__ownerID,0,void 0,e,n,i,a),!a.value)return t;o=t.size+(i.value?n===d?-1:1:0)}else{if(n===d)return t;o=1,r=new Dt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=o,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?$t(o,r):Ft()}function Yt(t,e,n,r,o,i,a,s){return t?t.update(e,n,r,o,i,a,s):i===d?t:(_(s),_(a),new Bt(e,r,[o,i]))}function Wt(t){return t.constructor===Bt||t.constructor===Nt}function Kt(t,e,n,r,o){if(t.keyHash===r)return new Nt(e,r,[t.entry,o]);var i,a=31&(0===n?t.keyHash:t.keyHash>>>n),s=31&(0===n?r:r>>>n);return new qt(e,1<<a|1<<s,a===s?[Kt(t,e,n+5,r,o)]:(i=new Bt(e,r,o),a<s?[t,i]:[i,t]))}function Xt(t,e,n){for(var o=[],i=0;i<n.length;i++){var s=n[i],c=r(s);a(s)||(c=c.map((function(t){return rt(t)}))),o.push(c)}return Zt(t,e,o)}function Gt(t,e,n){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):at(t,e)?t:e}function Jt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&a(n))return e.mergeDeepWith(t,n);var o=t(e,n,r);return at(e,o)?e:o}}function Zt(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,d,(function(t){return t===d?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},o=0;o<n.length;o++)n[o].forEach(r)})):t.constructor(n[0])}function Qt(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function te(t,e,n,r){var o=r?t:w(t);return o[e]=n,o}Rt[Lt]=!0,Rt.delete=Rt.remove,Rt.removeIn=Rt.deleteIn,Dt.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(at(n,o[i][0]))return o[i][1];return r},Dt.prototype.update=function(t,e,n,r,o,i,a){for(var s=o===d,c=this.entries,u=0,l=c.length;u<l&&!at(r,c[u][0]);u++);var f=u<l;if(f?c[u][1]===o:s)return this;if(_(a),(s||!f)&&_(i),!s||1!==c.length){if(!f&&!s&&c.length>=ee)return function(t,e,n,r){t||(t=new b);for(var o=new Bt(t,mt(n),[n,r]),i=0;i<e.length;i++){var a=e[i];o=o.update(t,0,void 0,a[0],a[1])}return o}(t,c,r,o);var h=t&&t===this.ownerID,g=h?c:w(c);return f?s?u===l-1?g.pop():g[u]=g.pop():g[u]=[r,o]:g.push([r,o]),h?(this.entries=g,this):new Dt(t,g)}},qt.prototype.get=function(t,e,n,r){void 0===e&&(e=mt(n));var o=1<<(31&(0===t?e:e>>>t)),i=this.bitmap;return 0==(i&o)?r:this.nodes[Qt(i&o-1)].get(t+5,e,n,r)},qt.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=mt(r));var s=31&(0===e?n:n>>>e),c=1<<s,u=this.bitmap,l=0!=(u&c);if(!l&&o===d)return this;var f=Qt(u&c-1),h=this.nodes,g=l?h[f]:void 0,p=Yt(g,t,e+5,n,r,o,i,a);if(p===g)return this;if(!l&&p&&h.length>=ne)return function(t,e,n,r,o){for(var i=0,a=new Array(32),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[i++]:void 0;return a[r]=o,new Pt(t,i+1,a)}(t,h,u,s,p);if(l&&!p&&2===h.length&&Wt(h[1^f]))return h[1^f];if(l&&p&&1===h.length&&Wt(p))return p;var y=t&&t===this.ownerID,m=l?p?u:u^c:u|c,v=l?p?te(h,f,p,y):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var o=new Array(r),i=0,a=0;a<r;a++)a===e&&(i=1),o[a]=t[a+i];return o}(h,f,y):function(t,e,n,r){var o=t.length+1;if(r&&e+1===o)return t[e]=n,t;for(var i=new Array(o),a=0,s=0;s<o;s++)s===e?(i[s]=n,a=-1):i[s]=t[s+a];return i}(h,f,p,y);return y?(this.bitmap=m,this.nodes=v,this):new qt(t,m,v)},Pt.prototype.get=function(t,e,n,r){void 0===e&&(e=mt(n));var o=31&(0===t?e:e>>>t),i=this.nodes[o];return i?i.get(t+5,e,n,r):r},Pt.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=mt(r));var s=31&(0===e?n:n>>>e),c=o===d,u=this.nodes,l=u[s];if(c&&!l)return this;var f=Yt(l,t,e+5,n,r,o,i,a);if(f===l)return this;var h=this.count;if(l){if(!f&&--h<re)return function(t,e,n,r){for(var o=0,i=0,a=new Array(n),s=0,c=1,u=e.length;s<u;s++,c<<=1){var l=e[s];void 0!==l&&s!==r&&(o|=c,a[i++]=l)}return new qt(t,o,a)}(t,u,h,s)}else h++;var g=t&&t===this.ownerID,p=te(u,s,f,g);return g?(this.count=h,this.nodes=p,this):new Pt(t,h,p)},Nt.prototype.get=function(t,e,n,r){for(var o=this.entries,i=0,a=o.length;i<a;i++)if(at(n,o[i][0]))return o[i][1];return r},Nt.prototype.update=function(t,e,n,r,o,i,a){void 0===n&&(n=mt(r));var s=o===d;if(n!==this.keyHash)return s?this:(_(a),_(i),Kt(this,t,e,n,[r,o]));for(var c=this.entries,u=0,l=c.length;u<l&&!at(r,c[u][0]);u++);var f=u<l;if(f?c[u][1]===o:s)return this;if(_(a),(s||!f)&&_(i),s&&2===l)return new Bt(t,this.keyHash,c[1^u]);var h=t&&t===this.ownerID,g=h?c:w(c);return f?s?u===l-1?g.pop():g[u]=g.pop():g[u]=[r,o]:g.push([r,o]),h?(this.entries=g,this):new Nt(t,this.keyHash,g)},Bt.prototype.get=function(t,e,n,r){return at(n,this.entry[0])?this.entry[1]:r},Bt.prototype.update=function(t,e,n,r,o,i,a){var s=o===d,c=at(r,this.entry[0]);return(c?o===this.entry[1]:s)?this:(_(a),s?void _(i):c?t&&t===this.ownerID?(this.entry[1]=o,this):new Bt(t,this.keyHash,[r,o]):(_(i),Kt(this,t,e,mt(r),[r,o])))},Dt.prototype.iterate=Nt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,o=n.length-1;r<=o;r++)if(!1===t(n[e?o-r:r]))return!1},qt.prototype.iterate=Pt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,o=n.length-1;r<=o;r++){var i=n[e?o-r:r];if(i&&!1===i.iterate(t,e))return!1}},Bt.prototype.iterate=function(t,e){return t(this.entry)},e(Ut,R),Ut.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,o=e.index++;if(r.entry){if(0===o)return zt(t,r.entry)}else if(r.entries){if(o<=(n=r.entries.length-1))return zt(t,r.entries[this._reverse?n-o:o])}else if(o<=(n=r.nodes.length-1)){var i=r.nodes[this._reverse?n-o:o];if(i){if(i.entry)return zt(t,i.entry);e=this._stack=Ht(i,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ee=8,ne=16,re=8;function oe(t){var e=pe();if(null==t)return e;if(ie(t))return t;var n=o(t),r=n.size;return 0===r?e:(It(r),r>0&&r<32?ge(0,r,5,null,new ce(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function ie(t){return!(!t||!t[ae])}e(oe,gt),oe.of=function(){return this(arguments)},oe.prototype.toString=function(){return this.__toString("List [","]")},oe.prototype.get=function(t,e){if((t=E(this,t))>=0&&t<this.size){var n=me(this,t+=this._origin);return n&&n.array[31&t]}return e},oe.prototype.set=function(t,e){return function(t,e,n){if((e=E(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?ve(t,e).set(0,n):ve(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,o=t._root,i=v(m);return e>=be(t._capacity)?r=de(r,t.__ownerID,0,e,n,i):o=de(o,t.__ownerID,t._level,e,n,i),i.value?t.__ownerID?(t._root=o,t._tail=r,t.__hash=void 0,t.__altered=!0,t):ge(t._origin,t._capacity,t._level,o,r):t}(this,t,e)},oe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},oe.prototype.insert=function(t,e){return this.splice(t,0,e)},oe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):pe()},oe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){ve(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},oe.prototype.pop=function(){return ve(this,0,-1)},oe.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){ve(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},oe.prototype.shift=function(){return ve(this,1)},oe.prototype.merge=function(){return _e(this,void 0,arguments)},oe.prototype.mergeWith=function(e){var n=t.call(arguments,1);return _e(this,e,n)},oe.prototype.mergeDeep=function(){return _e(this,Gt,arguments)},oe.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return _e(this,Jt(e),n)},oe.prototype.setSize=function(t){return ve(this,0,t)},oe.prototype.slice=function(t,e){var n=this.size;return O(t,e,n)?this:ve(this,k(t,n),j(e,n))},oe.prototype.__iterator=function(t,e){var n=0,r=he(this,e);return new R((function(){var e=r();return e===fe?{value:void 0,done:!0}:D(t,n++,e)}))},oe.prototype.__iterate=function(t,e){for(var n,r=0,o=he(this,e);(n=o())!==fe&&!1!==t(n,r++,this););return r},oe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ge(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},oe.isList=ie;var ae="@@__IMMUTABLE_LIST__@@",se=oe.prototype;function ce(t,e){this.array=t,this.ownerID=e}se[ae]=!0,se.delete=se.remove,se.setIn=Rt.setIn,se.deleteIn=se.removeIn=Rt.removeIn,se.update=Rt.update,se.updateIn=Rt.updateIn,se.mergeIn=Rt.mergeIn,se.mergeDeepIn=Rt.mergeDeepIn,se.withMutations=Rt.withMutations,se.asMutable=Rt.asMutable,se.asImmutable=Rt.asImmutable,se.wasAltered=Rt.wasAltered,ce.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&31;if(r>=this.array.length)return new ce([],t);var o,i=0===r;if(e>0){var a=this.array[r];if((o=a&&a.removeBefore(t,e-5,n))===a&&i)return this}if(i&&!o)return this;var s=ye(this,t);if(!i)for(var c=0;c<r;c++)s.array[c]=void 0;return o&&(s.array[r]=o),s},ce.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,o=n-1>>>e&31;if(o>=this.array.length)return this;if(e>0){var i=this.array[o];if((r=i&&i.removeAfter(t,e-5,n))===i&&o===this.array.length-1)return this}var a=ye(this,t);return a.array.splice(o+1),r&&(a.array[o]=r),a};var ue,le,fe={};function he(t,e){var n=t._origin,r=t._capacity,o=be(r),i=t._tail;return a(t._root,t._level,0);function a(t,s,c){return 0===s?function(t,a){var s=a===o?i&&i.array:t&&t.array,c=a>n?0:n-a,u=r-a;return u>32&&(u=32),function(){if(c===u)return fe;var t=e?--u:c++;return s&&s[t]}}(t,c):function(t,o,i){var s,c=t&&t.array,u=i>n?0:n-i>>o,l=1+(r-i>>o);return l>32&&(l=32),function(){for(;;){if(s){var t=s();if(t!==fe)return t;s=null}if(u===l)return fe;var n=e?--l:u++;s=a(c&&c[n],o-5,i+(n<<o))}}}(t,s,c)}}function ge(t,e,n,r,o,i,a){var s=Object.create(se);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=o,s.__ownerID=i,s.__hash=a,s.__altered=!1,s}function pe(){return ue||(ue=ge(0,0,5))}function de(t,e,n,r,o,i){var a,s=r>>>n&31,c=t&&s<t.array.length;if(!c&&void 0===o)return t;if(n>0){var u=t&&t.array[s],l=de(u,e,n-5,r,o,i);return l===u?t:((a=ye(t,e)).array[s]=l,a)}return c&&t.array[s]===o?t:(_(i),a=ye(t,e),void 0===o&&s===a.array.length-1?a.array.pop():a.array[s]=o,a)}function ye(t,e){return e&&t&&e===t.ownerID?t:new ce(t?t.array.slice():[],e)}function me(t,e){if(e>=be(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&31],r-=5;return n}}function ve(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new b,o=t._origin,i=t._capacity,a=o+e,s=void 0===n?i:n<0?i+n:o+n;if(a===o&&s===i)return t;if(a>=s)return t.clear();for(var c=t._level,u=t._root,l=0;a+l<0;)u=new ce(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=5);l&&(a+=l,o+=l,s+=l,i+=l);for(var f=be(i),h=be(s);h>=1<<c+5;)u=new ce(u&&u.array.length?[u]:[],r),c+=5;var g=t._tail,p=h<f?me(t,s-1):h>f?new ce([],r):g;if(g&&h>f&&a<i&&g.array.length){for(var d=u=ye(u,r),y=c;y>5;y-=5){var m=f>>>y&31;d=d.array[m]=ye(d.array[m],r)}d.array[f>>>5&31]=g}if(s<i&&(p=p&&p.removeAfter(r,0,s)),a>=h)a-=h,s-=h,c=5,u=null,p=p&&p.removeBefore(r,0,a);else if(a>o||h<f){for(l=0;u;){var v=a>>>c&31;if(v!==h>>>c&31)break;v&&(l+=(1<<c)*v),c-=5,u=u.array[v]}u&&a>o&&(u=u.removeBefore(r,c,a-l)),u&&h<f&&(u=u.removeAfter(r,c,h-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):ge(a,s,c,u,p)}function _e(t,e,n){for(var r=[],i=0,s=0;s<n.length;s++){var c=n[s],u=o(c);u.size>i&&(i=u.size),a(c)||(u=u.map((function(t){return rt(t)}))),r.push(u)}return i>t.size&&(t=t.setSize(i)),Zt(t,e,r)}function be(t){return t<32?0:t-1>>>5<<5}function we(t){return null==t?xe():Se(t)?t:xe().withMutations((function(e){var n=r(t);It(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Se(t){return Ct(t)&&l(t)}function Ee(t,e,n,r){var o=Object.create(we.prototype);return o.size=t?t.size:0,o._map=t,o._list=e,o.__ownerID=n,o.__hash=r,o}function xe(){return le||(le=Ee(Ft(),pe()))}function Oe(t,e,n){var r,o,i=t._map,a=t._list,s=i.get(e),c=void 0!==s;if(n===d){if(!c)return t;a.size>=32&&a.size>=2*i.size?(r=(o=a.filter((function(t,e){return void 0!==t&&s!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=o.__ownerID=t.__ownerID)):(r=i.remove(e),o=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(n===a.get(s)[1])return t;r=i,o=a.set(s,[e,n])}else r=i.set(e,a.size),o=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=o,t.__hash=void 0,t):Ee(r,o)}function ke(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function je(t){this._iter=t,this.size=t.size}function Te(t){this._iter=t,this.size=t.size}function Ie(t){this._iter=t,this.size=t.size}function Ae(t){var e=Ye(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=We,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new R((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,n)},e}function Ce(t,e,n){var r=Ye(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,o){var i=t.get(r,d);return i===d?o:e.call(n,i,r,t)},r.__iterateUncached=function(r,o){var i=this;return t.__iterate((function(t,o,a){return!1!==r(e.call(n,t,o,a),o,i)}),o)},r.__iteratorUncached=function(r,o){var i=t.__iterator(2,o);return new R((function(){var o=i.next();if(o.done)return o;var a=o.value,s=a[0];return D(r,s,e.call(n,a[1],s,t),o)}))},r}function Me(t,e){var n=Ye(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=Ae(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=We,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function Le(t,e,n,r){var o=Ye(t);return r&&(o.has=function(r){var o=t.get(r,d);return o!==d&&!!e.call(n,o,r,t)},o.get=function(r,o){var i=t.get(r,d);return i!==d&&e.call(n,i,r,t)?i:o}),o.__iterateUncached=function(o,i){var a=this,s=0;return t.__iterate((function(t,i,c){if(e.call(n,t,i,c))return s++,o(t,r?i:s-1,a)}),i),s},o.__iteratorUncached=function(o,i){var a=t.__iterator(2,i),s=0;return new R((function(){for(;;){var i=a.next();if(i.done)return i;var c=i.value,u=c[0],l=c[1];if(e.call(n,l,u,t))return D(o,r?u:s++,l,i)}}))},o}function Re(t,e,n,r){var o=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=o:n|=0),O(e,n,o))return t;var i=k(e,o),a=j(n,o);if(i!=i||a!=a)return Re(t.toSeq().cacheResult(),e,n,r);var s,c=a-i;c==c&&(s=c<0?0:c);var u=Ye(t);return u.size=0===s?s:t.size&&s||void 0,!r&&G(t)&&s>=0&&(u.get=function(e,n){return(e=E(this,e))>=0&&e<s?t.get(e+i,n):n}),u.__iterateUncached=function(e,n){var o=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,c=!0,u=0;return t.__iterate((function(t,n){if(!c||!(c=a++<i))return u++,!1!==e(t,r?n:u-1,o)&&u!==s})),u},u.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var o=0!==s&&t.__iterator(e,n),a=0,c=0;return new R((function(){for(;a++<i;)o.next();if(++c>s)return{value:void 0,done:!0};var t=o.next();return r||1===e?t:D(e,c-1,0===e?void 0:t.value[1],t)}))},u}function De(t,e,n,r){var o=Ye(t);return o.__iterateUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterate(o,i);var s=!0,c=0;return t.__iterate((function(t,i,u){if(!s||!(s=e.call(n,t,i,u)))return c++,o(t,r?i:c-1,a)})),c},o.__iteratorUncached=function(o,i){var a=this;if(i)return this.cacheResult().__iterator(o,i);var s=t.__iterator(2,i),c=!0,u=0;return new R((function(){var t,i,l;do{if((t=s.next()).done)return r||1===o?t:D(o,u++,0===o?void 0:t.value[1],t);var f=t.value;i=f[0],l=f[1],c&&(c=e.call(n,l,i,a))}while(c);return 2===o?t:D(o,i,l,t)}))},o}function qe(t,e){var n=s(t),o=[t].concat(e).map((function(t){return a(t)?n&&(t=r(t)):t=n?Z(t):Q(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===o.length)return t;if(1===o.length){var i=o[0];if(i===t||n&&s(i)||c(t)&&c(i))return i}var u=new Y(o);return n?u=u.toKeyedSeq():c(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=o.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),u}function Pe(t,e,n){var r=Ye(t);return r.__iterateUncached=function(r,o){var i=0,s=!1;return function t(c,u){var l=this;c.__iterate((function(o,c){return(!e||u<e)&&a(o)?t(o,u+1):!1===r(o,n?c:i++,l)&&(s=!0),!s}),o)}(t,0),i},r.__iteratorUncached=function(r,o){var i=t.__iterator(r,o),s=[],c=0;return new R((function(){for(;i;){var t=i.next();if(!1===t.done){var u=t.value;if(2===r&&(u=u[1]),e&&!(s.length<e)||!a(u))return n?t:D(r,c++,u,t);s.push(i),i=u.__iterator(r,o)}else i=s.pop()}return{value:void 0,done:!0}}))},r}function Ne(t,e,n){e||(e=Ke);var r=s(t),o=0,i=t.toSeq().map((function(e,r){return[r,e,o++,n?n(e,r,t):e]})).toArray();return i.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){i[e].length=2}:function(t,e){i[e]=t[1]}),r?$(i):c(t)?F(i):V(i)}function Be(t,e,n){if(e||(e=Ke),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return Ue(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return Ue(e,t,n)?n:t}))}function Ue(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function ze(t,e,r){var o=Ye(t);return o.size=new Y(r).map((function(t){return t.size})).min(),o.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),o=0;!(n=r.next()).done&&!1!==t(n.value,o++,this););return o},o.__iteratorUncached=function(t,o){var i=r.map((function(t){return t=n(t),B(o?t.reverse():t)})),a=0,s=!1;return new R((function(){var n;return s||(n=i.map((function(t){return t.next()})),s=n.some((function(t){return t.done}))),s?{value:void 0,done:!0}:D(t,a++,e.apply(null,n.map((function(t){return t.value}))))}))},o}function He(t,e){return G(t)?e:t.constructor(e)}function $e(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Fe(t){return It(t.size),S(t)}function Ve(t){return s(t)?r:c(t)?o:i}function Ye(t){return Object.create((s(t)?$:c(t)?F:V).prototype)}function We(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):H.prototype.cacheResult.call(this)}function Ke(t,e){return t>e?1:t<e?-1:0}function Xe(t){var e=B(t);if(!e){if(!z(t))throw new TypeError("Expected iterable or array-like: "+t);e=B(n(t))}return e}function Ge(t,e){var n,r=function(i){if(i instanceof r)return i;if(!(this instanceof r))return new r(i);if(!n){n=!0;var a=Object.keys(t);!function(t,e){try{e.forEach(tn.bind(void 0,t))}catch(t){}}(o,a),o.size=a.length,o._name=e,o._keys=a,o._defaultValues=t}this._map=At(i)},o=r.prototype=Object.create(Je);return o.constructor=r,r}e(we,At),we.of=function(){return this(arguments)},we.prototype.toString=function(){return this.__toString("OrderedMap {","}")},we.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},we.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):xe()},we.prototype.set=function(t,e){return Oe(this,t,e)},we.prototype.remove=function(t){return Oe(this,t,d)},we.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},we.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},we.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},we.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Ee(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},we.isOrderedMap=Se,we.prototype[p]=!0,we.prototype.delete=we.prototype.remove,e(ke,$),ke.prototype.get=function(t,e){return this._iter.get(t,e)},ke.prototype.has=function(t){return this._iter.has(t)},ke.prototype.valueSeq=function(){return this._iter.valueSeq()},ke.prototype.reverse=function(){var t=this,e=Me(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ke.prototype.map=function(t,e){var n=this,r=Ce(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},ke.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Fe(this):0,function(o){return t(o,e?--n:n++,r)}),e)},ke.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(1,e),r=e?Fe(this):0;return new R((function(){var o=n.next();return o.done?o:D(t,e?--r:r++,o.value,o)}))},ke.prototype[p]=!0,e(je,F),je.prototype.includes=function(t){return this._iter.includes(t)},je.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},je.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e),r=0;return new R((function(){var e=n.next();return e.done?e:D(t,r++,e.value,e)}))},e(Te,V),Te.prototype.has=function(t){return this._iter.includes(t)},Te.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Te.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new R((function(){var e=n.next();return e.done?e:D(t,e.value,e.value,e)}))},e(Ie,$),Ie.prototype.entrySeq=function(){return this._iter.toSeq()},Ie.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){$e(e);var r=a(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new R((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){$e(r);var o=a(r);return D(t,o?r.get(0):r[0],o?r.get(1):r[1],e)}}}))},je.prototype.cacheResult=ke.prototype.cacheResult=Te.prototype.cacheResult=Ie.prototype.cacheResult=We,e(Ge,ht),Ge.prototype.toString=function(){return this.__toString(Qe(this)+" {","}")},Ge.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Ge.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Ge.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Ze(this,Ft()))},Ge.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Qe(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Ze(this,n)},Ge.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Ze(this,e)},Ge.prototype.wasAltered=function(){return this._map.wasAltered()},Ge.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},Ge.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},Ge.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Ze(this,e,t):(this.__ownerID=t,this._map=e,this)};var Je=Ge.prototype;function Ze(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Qe(t){return t._name||t.constructor.name||"Record"}function tn(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){ut(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function en(t){return null==t?un():nn(t)&&!l(t)?t:un().withMutations((function(e){var n=i(t);It(n.size),n.forEach((function(t){return e.add(t)}))}))}function nn(t){return!(!t||!t[on])}Je.delete=Je.remove,Je.deleteIn=Je.removeIn=Rt.removeIn,Je.merge=Rt.merge,Je.mergeWith=Rt.mergeWith,Je.mergeIn=Rt.mergeIn,Je.mergeDeep=Rt.mergeDeep,Je.mergeDeepWith=Rt.mergeDeepWith,Je.mergeDeepIn=Rt.mergeDeepIn,Je.setIn=Rt.setIn,Je.update=Rt.update,Je.updateIn=Rt.updateIn,Je.withMutations=Rt.withMutations,Je.asMutable=Rt.asMutable,Je.asImmutable=Rt.asImmutable,e(en,pt),en.of=function(){return this(arguments)},en.fromKeys=function(t){return this(r(t).keySeq())},en.prototype.toString=function(){return this.__toString("Set {","}")},en.prototype.has=function(t){return this._map.has(t)},en.prototype.add=function(t){return sn(this,this._map.set(t,!0))},en.prototype.remove=function(t){return sn(this,this._map.remove(t))},en.prototype.clear=function(){return sn(this,this._map.clear())},en.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)i(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},en.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},en.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return i(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},en.prototype.merge=function(){return this.union.apply(this,arguments)},en.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},en.prototype.sort=function(t){return ln(Ne(this,t))},en.prototype.sortBy=function(t,e){return ln(Ne(this,e,t))},en.prototype.wasAltered=function(){return this._map.wasAltered()},en.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},en.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},en.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},en.isSet=nn;var rn,on="@@__IMMUTABLE_SET__@@",an=en.prototype;function sn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function cn(t,e){var n=Object.create(an);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function un(){return rn||(rn=cn(Ft()))}function ln(t){return null==t?dn():fn(t)?t:dn().withMutations((function(e){var n=i(t);It(n.size),n.forEach((function(t){return e.add(t)}))}))}function fn(t){return nn(t)&&l(t)}an[on]=!0,an.delete=an.remove,an.mergeDeep=an.merge,an.mergeDeepWith=an.mergeWith,an.withMutations=Rt.withMutations,an.asMutable=Rt.asMutable,an.asImmutable=Rt.asImmutable,an.__empty=un,an.__make=cn,e(ln,en),ln.of=function(){return this(arguments)},ln.fromKeys=function(t){return this(r(t).keySeq())},ln.prototype.toString=function(){return this.__toString("OrderedSet {","}")},ln.isOrderedSet=fn;var hn,gn=ln.prototype;function pn(t,e){var n=Object.create(gn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function dn(){return hn||(hn=pn(xe()))}function yn(t){return null==t?Sn():mn(t)?t:Sn().unshiftAll(t)}function mn(t){return!(!t||!t[_n])}gn[p]=!0,gn.__empty=dn,gn.__make=pn,e(yn,gt),yn.of=function(){return this(arguments)},yn.prototype.toString=function(){return this.__toString("Stack [","]")},yn.prototype.get=function(t,e){var n=this._head;for(t=E(this,t);n&&t--;)n=n.next;return n?n.value:e},yn.prototype.peek=function(){return this._head&&this._head.value},yn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):wn(t,e)},yn.prototype.pushAll=function(t){if(0===(t=o(t)).size)return this;It(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):wn(e,n)},yn.prototype.pop=function(){return this.slice(1)},yn.prototype.unshift=function(){return this.push.apply(this,arguments)},yn.prototype.unshiftAll=function(t){return this.pushAll(t)},yn.prototype.shift=function(){return this.pop.apply(this,arguments)},yn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Sn()},yn.prototype.slice=function(t,e){if(O(t,e,this.size))return this;var n=k(t,this.size);if(j(e,this.size)!==this.size)return gt.prototype.slice.call(this,t,e);for(var r=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=r,this._head=o,this.__hash=void 0,this.__altered=!0,this):wn(r,o)},yn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wn(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},yn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},yn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new R((function(){if(r){var e=r.value;return r=r.next,D(t,n++,e)}return{value:void 0,done:!0}}))},yn.isStack=mn;var vn,_n="@@__IMMUTABLE_STACK__@@",bn=yn.prototype;function wn(t,e,n,r){var o=Object.create(bn);return o.size=t,o._head=e,o.__ownerID=n,o.__hash=r,o.__altered=!1,o}function Sn(){return vn||(vn=wn(0))}function En(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}bn[_n]=!0,bn.withMutations=Rt.withMutations,bn.asMutable=Rt.asMutable,bn.asImmutable=Rt.asImmutable,bn.wasAltered=Rt.wasAltered,n.Iterator=R,En(n,{toArray:function(){It(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new je(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new ke(this,!0)},toMap:function(){return At(this.toKeyedSeq())},toObject:function(){It(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return we(this.toKeyedSeq())},toOrderedSet:function(){return ln(s(this)?this.valueSeq():this)},toSet:function(){return en(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Te(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return yn(s(this)?this.valueSeq():this)},toList:function(){return oe(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return He(this,qe(this,e))},includes:function(t){return this.some((function(e){return at(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){It(this.size);var n=!0;return this.__iterate((function(r,o,i){if(!t.call(e,r,o,i))return n=!1,!1})),n},filter:function(t,e){return He(this,Le(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return It(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){It(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return He(this,Ce(this,t,e))},reduce:function(t,e,n){var r,o;return It(this.size),arguments.length<2?o=!0:r=e,this.__iterate((function(e,i,a){o?(o=!1,r=e):r=t.call(n,r,e,i,a)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return He(this,Me(this,!0))},slice:function(t,e){return He(this,Re(this,t,e,!0))},some:function(t,e){return!this.every(Tn(t),e)},sort:function(t){return He(this,Ne(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return S(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=At().asMutable();return t.__iterate((function(o,i){r.update(e.call(n,o,i,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return st(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Y(t._cache);var e=t.toSeq().map(jn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Tn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,o,i){if(t.call(e,n,o,i))return r=[o,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(x)},flatMap:function(t,e){return He(this,function(t,e,n){var r=Ve(t);return t.toSeq().map((function(o,i){return r(e.call(n,o,i,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return He(this,Pe(this,t,!0))},fromEntrySeq:function(){return new Ie(this)},get:function(t,e){return this.find((function(e,n){return at(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,o=Xe(t);!(n=o.next()).done;){var i=n.value;if((r=r&&r.get?r.get(i,d):d)===d)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=s(t),o=(l(t)?we():At()).asMutable();t.__iterate((function(i,a){o.update(e.call(n,i,a,t),(function(t){return(t=t||[]).push(r?[a,i]:i),t}))}));var i=Ve(t);return o.map((function(e){return He(t,i(e))}))}(this,t,e)},has:function(t){return this.get(t,d)!==d},hasIn:function(t){return this.getIn(t,d)!==d},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return at(e,t)}))},keySeq:function(){return this.toSeq().map(kn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Be(this,t)},maxBy:function(t,e){return Be(this,e,t)},min:function(t){return Be(this,t?In(t):Mn)},minBy:function(t,e){return Be(this,e?In(e):Mn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return He(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return He(this,De(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Tn(t),e)},sortBy:function(t,e){return He(this,Ne(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return He(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return He(this,function(t,e,n){var r=Ye(t);return r.__iterateUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterate(r,o);var a=0;return t.__iterate((function(t,o,s){return e.call(n,t,o,s)&&++a&&r(t,o,i)})),a},r.__iteratorUncached=function(r,o){var i=this;if(o)return this.cacheResult().__iterator(r,o);var a=t.__iterator(2,o),s=!0;return new R((function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var o=t.value,c=o[0],u=o[1];return e.call(n,u,c,i)?2===r?t:D(r,c,u,t):(s=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Tn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),n=s(t),r=e?1:0;return function(t,e){return e=dt(e,3432918353),e=dt(e<<15|e>>>-15,461845907),e=dt(e<<13|e>>>-13,5),e=dt((e=(e+3864292196|0)^t)^e>>>16,2246822507),e=yt((e=dt(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+Ln(mt(t),mt(e))|0}:function(t,e){r=r+Ln(mt(t),mt(e))|0}:e?function(t){r=31*r+mt(t)|0}:function(t){r=r+mt(t)|0}),r)}(this))}});var xn=n.prototype;xn[f]=!0,xn[L]=xn.values,xn.__toJS=xn.toArray,xn.__toStringMapper=An,xn.inspect=xn.toSource=function(){return this.toString()},xn.chain=xn.flatMap,xn.contains=xn.includes,En(r,{flip:function(){return He(this,Ae(this))},mapEntries:function(t,e){var n=this,r=0;return He(this,this.toSeq().map((function(o,i){return t.call(e,[i,o],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return He(this,this.toSeq().flip().map((function(r,o){return t.call(e,r,o,n)})).flip())}});var On=r.prototype;function kn(t,e){return e}function jn(t,e){return[e,t]}function Tn(t){return function(){return!t.apply(this,arguments)}}function In(t){return function(){return-t.apply(this,arguments)}}function An(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Cn(){return w(arguments)}function Mn(t,e){return t<e?1:t>e?-1:0}function Ln(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return On[h]=!0,On[L]=xn.entries,On.__toJS=xn.toObject,On.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+An(t)},En(o,{toKeyedSeq:function(){return new ke(this,!1)},filter:function(t,e){return He(this,Le(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return He(this,Me(this,!1))},slice:function(t,e){return He(this,Re(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=k(t,t<0?this.count():this.size);var r=this.slice(0,t);return He(this,1===n?r:r.concat(w(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return He(this,Pe(this,t,!1))},get:function(t,e){return(t=E(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=E(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return He(this,function(t,e){var n=Ye(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var o=this,i=0;return t.__iterate((function(t,r){return(!i||!1!==n(e,i++,o))&&!1!==n(t,i++,o)}),r),i},n.__iteratorUncached=function(n,r){var o,i=t.__iterator(1,r),a=0;return new R((function(){return(!o||a%2)&&(o=i.next()).done?o:a%2?D(n,a++,e):D(n,a++,o.value,o)}))},n}(this,t))},interleave:function(){var t=[this].concat(w(arguments)),e=ze(this.toSeq(),F.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),He(this,n)},keySeq:function(){return lt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return He(this,De(this,t,e,!1))},zip:function(){var t=[this].concat(w(arguments));return He(this,ze(this,Cn,t))},zipWith:function(t){var e=w(arguments);return e[0]=this,He(this,ze(this,t,e))}}),o.prototype[g]=!0,o.prototype[p]=!0,En(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=xn.includes,i.prototype.contains=i.prototype.includes,En($,r.prototype),En(F,o.prototype),En(V,i.prototype),En(ht,r.prototype),En(gt,o.prototype),En(pt,i.prototype),{Iterable:n,Seq:H,Collection:ft,Map:At,OrderedMap:we,List:oe,Stack:yn,Set:en,OrderedSet:ln,Record:Ge,Range:lt,Repeat:ct,is:at,fromJS:rt}}()},"./node_modules/transit-immutable-js/index.js":
/*!****************************************************!*\
  !*** ./node_modules/transit-immutable-js/index.js ***!
  \****************************************************/
/*! no static exports found */function(t,e,n){var r=n(/*! transit-js */"./node_modules/transit-js/transit.js"),o=n(/*! immutable */"./node_modules/immutable/dist/immutable.js");function i(t,e,n){var r={iM:function(t){for(var e=o.Map().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iOM:function(t){for(var e=o.OrderedMap().asMutable(),n=0;n<t.length;n+=2)e=e.set(t[n],t[n+1]);return e.asImmutable()},iL:function(t){return o.List(t)},iS:function(t){return o.Set(t)},iOS:function(t){return o.OrderedSet(t)},iR:function(t){var r=e[t.n];return r?new r(t.v):n(t.n,t.v)}};return t.forEach((function(t){r[t.tag]=t.read})),r}function a(t,e,n){function i(t){var e=0;n&&(t=t.filter(n));var r=new Array(2*t.size);return t.forEach((function(t,n){r[e++]=n,r[e++]=t})),r}var a=r.map([o.Map,r.makeWriteHandler({tag:function(){return"iM"},rep:i}),o.OrderedMap,r.makeWriteHandler({tag:function(){return"iOM"},rep:i}),o.List,r.makeWriteHandler({tag:function(){return"iL"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),o.Set,r.makeWriteHandler({tag:function(){return"iS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),o.OrderedSet,r.makeWriteHandler({tag:function(){return"iOS"},rep:function(t){return n&&(t=t.filter(n)),t.toArray()}}),Function,r.makeWriteHandler({tag:function(){return"_"},rep:function(){return null}}),"default",r.makeWriteHandler({tag:function(){return"iM"},rep:function(t){if(!("toMap"in t)){var e="Error serializing unrecognized object "+t.toString();throw new Error(e)}return i(t.toMap())}})]);return Object.keys(e).forEach((function(t){a.set(e[t],function(t){return r.makeWriteHandler({tag:function(){return"iR"},rep:function(e){return{n:t,v:e.toObject()}}})}(t))})),t.forEach((function(t){a.set(t.class,r.makeWriteHandler({tag:function(){return t.tag},rep:t.write}))})),a}function s(t,e){var n=JSON.stringify(t);throw new Error(e.replace("%j",n))}function c(t){throw new Error("Tried to deserialize Record type named `"+t+"`, but no type with that name was passed to withRecords()")}function u(t){var e=t.records||{},n=t.filter||!1,r=t.missingRecordHandler||c,o=t.extras||[];return{read:i(o,e,r),write:a(o,e,n),withExtraHandlers:function(t){return function(t){Array.isArray(t)||s(t,"Expected array of handlers, got %j"),t.forEach((function(t){"string"!=typeof t.tag&&s(t,"Expected %j to have property 'tag' which is a string"),"function"!=typeof t.class&&s(t,"Expected %j to have property 'class' which is a constructor function"),"function"!=typeof t.write&&s(t,"Expected %j to have property 'write' which is a function"),"function"!=typeof t.read&&s(t,"Expected %j to have property 'write' which is a function")}))}(t),u({extras:o.concat(t),records:e,filter:n,missingRecordHandler:r})},withFilter:function(t){return u({extras:o,records:e,filter:t,missingRecordHandler:r})},withRecords:function(t,e){var r=function(t){var e={};return t.forEach((function(t){var n,r=new t({}),o=(n=r)._name||n.constructor.name||"Record";if(!o||"Record"===o)throw new Error("Cannot (de)serialize Record() without a name");if(e[o])throw new Error("There's already a constructor for a Record named "+o);e[o]=t})),e}(t);return u({extras:o,records:r,filter:n,missingRecordHandler:e})}}}t.exports=function t(e){var n=function(t){return r.reader("json",{mapBuilder:{init:function(){return{}},add:function(t,e,n){return t[e]=n,t},finalize:function(t){return t}},handlers:t})}(e.read),o=function(t){return r.writer("json",{handlers:t})}(e.write);return{toJSON:function(t){return o.write(t)},fromJSON:function(t){return n.read(t)},withExtraHandlers:function(n){return t(e.withExtraHandlers(n))},withFilter:function(n){return t(e.withFilter(n))},withRecords:function(n,r){return t(e.withRecords(n,r))}}}(u({})),t.exports.handlers=u({})},"./node_modules/transit-js/transit.js":
/*!********************************************!*\
  !*** ./node_modules/transit-js/transit.js ***!
  \********************************************/
/*! no static exports found */function(module,exports,__webpack_require__){(function(global){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:void 0!==global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,r){if(e){for(n=$jscomp.global,t=t.split("."),r=0;r<t.length-1;r++){var o=t[r];o in n||(n[o]={}),n=n[o]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("String.prototype.repeat",(function(t){return t||function(t){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var n="";t;)1&t&&(n+=e),(t>>>=1)&&(e+=e);return n}}),"es6-impl","es3"),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,r={next:function(){if(n<t.length){var o=n++;return{value:e(o,t[o]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r},$jscomp.polyfill("Array.prototype.entries",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t,e){return[t,e]}))}}),"es6-impl","es3"),$jscomp.polyfill("Array.prototype.keys",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t){return t}))}}),"es6-impl","es3"),$jscomp.polyfill("Array.prototype.values",(function(t){return t||function(){return $jscomp.iteratorFromArray(this,(function(t,e){return e}))}}),"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=this,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,n){t=t.split("."),n=n||goog.global,t[0]in n||!n.execScript||n.execScript("var "+t[0]);for(var r;t.length&&(r=t.shift());)!t.length&&goog.isDef(e)?n[r]=e:n=n[r]&&n[r]!==Object.prototype[r]?n[r]:n[r]={}},goog.define=function(t,e){var n=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(n=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,n)},goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var n=t;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED){if(t in goog.loadedModules_)return goog.loadedModules_[t];if(!goog.implicitNamespaces_[t])return null!=(t=goog.getObjectByName(t))?t:null}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var n,r=t.split("."),o=e||goog.global;n=r.shift();){if(!goog.isDefAndNotNull(o[n]))return null;o=o[n]}return o},goog.globalize=function(t,e){var n,r=e||goog.global;for(n in t)r[n]=t[n]},goog.addDependency=function(t,e,n,r){if(goog.DEPENDENCIES_ENABLED){var o;t=t.replace(/\\/g,"/");var i=goog.dependencies_;r&&"boolean"!=typeof r||(r=r?{module:"goog"}:{});for(var a=0;o=e[a];a++)i.nameToPath[o]=t,i.loadFlags[t]=r;for(r=0;e=n[r];r++)t in i.requires||(i.requires[t]={}),i.requires[t][e]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t)){if(goog.isInModuleLoader_())return goog.module.getInternal_(t)}else if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(!e)throw t="goog.require could not find: "+t,goog.logToConsole_(t),Error(t);goog.writeScripts_(e)}return null}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.instance_=void 0,t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.TRANSPILE="detect",goog.TRANSPILER="transpile.js",goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;0<=e;--e){var n=t[e].src,r=-1==(r=n.lastIndexOf("?"))?n.length:r;if("base.js"==n.substr(r-7,7)){goog.basePath=n.substr(0,r-7);break}}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(t,e,n){goog.importScript_("",'goog.retrieveAndExec_("'+t+'", '+e+", "+n+");")},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(0<t){var e=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<t;n++)goog.maybeProcessDeferredPath_(e[n])}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(t){goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)&&(t=goog.getPathFromDeps_(t),goog.maybeProcessDeferredPath_(goog.basePath+t))},goog.isDeferredModule_=function(t){var e=(t=goog.getPathFromDeps_(t))&&goog.dependencies_.loadFlags[t]||{},n=e.lang||"es3";return!(!t||"goog"!=e.module&&!goog.needsTranspile_(n))&&goog.basePath+t in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){if((t=goog.getPathFromDeps_(t))&&t in goog.dependencies_.requires)for(var e in goog.dependencies_.requires[t])if(!goog.isProvided_(e)&&!goog.isDeferredModule_(e))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,n=e.createElement("script");n.type="text/javascript",n.src=t,n.defer=!1,n.async=!1,e.head.appendChild(n)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+t+'"'+r+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else n.write('<script type="text/javascript">'+goog.protectScriptTag_(e)+"<\/script>");return!0}return!1},goog.protectScriptTag_=function(t){return t.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(t){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),t in goog.requiresTranspilation_)return goog.requiresTranspilation_[t];throw Error("Unknown language mode: "+t)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],n={},r=goog.dependencies_;!function t(o){if(!(o in r.written)&&!(o in r.visited)){if(r.visited[o]=!0,o in r.requires)for(var i in r.requires[o])if(!goog.isProvided_(i)){if(!(i in r.nameToPath))throw Error("Undefined nameToPath for "+i);t(r.nameToPath[i])}o in n||(n[o]=!0,e.push(o))}}(t);for(var o=0;o<e.length;o++)t=e[o],goog.dependencies_.written[t]=!0;var i=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,o=0;o<e.length;o++){if(!(t=e[o]))throw goog.moduleLoaderState_=i,Error("Undefined script input");var a=r.loadFlags[t]||{},s=goog.needsTranspile_(a.lang||"es3");"goog"==a.module||s?goog.importProcessedScript_(goog.basePath+t,"goog"==a.module,s):goog.importScript_(goog.basePath+t)}goog.moduleLoaderState_=i},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(t){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(t){return"(function(){"+t+"\n;})();\n"},goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))var n=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(t=goog.workaroundSafari10EvalBug(t)),n=goog.loadModuleFromSource_.call(void 0,t)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof n&&null!=n&&Object.seal(n),goog.loadedModules_[r]=n}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(t){t=t.split("/");for(var e=0;e<t.length;)"."==t[e]?t.splice(e,1):e&&".."==t[e]&&t[e-1]&&".."!=t[e-1]?t.splice(--e,2):e++;return t.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,n){if(!COMPILED){var r=t;t=goog.normalizePath_(t);var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,i=goog.loadFileSync_(t);if(null==i)throw Error('Load of "'+t+'" failed');n&&(i=goog.transpile_.call(goog.global,i,t)),i=e?goog.wrapModule_(t,i):i+"\n//# sourceURL="+t,goog.IS_OLD_IE_&&goog.oldIeWaiting_?(goog.dependencies_.deferred[r]=i,goog.queuedModules_.push(r)):o(t,i)}},goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){if(eval(f+"\n//# sourceURL="+e),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,c=goog.global.$jscomp,d=c.transpile}}return d||(d=c.transpile=function(t,e){return goog.logToConsole_(e+" requires transpilation but no transpiler was found."),t}),d(a,b)},goog.typeOf=function(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=typeof t;return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(t.clone)return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.cloneObject(t[e]);return n}return t},goog.bindNative_=function(t,e,n){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var n in e)t[n]=e[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,n=e.createElement("SCRIPT");n.type="text/javascript",n.defer=!1,n.appendChild(e.createTextNode(t)),e.body.appendChild(n),e.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(t,e){if("."==String(t).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+t);var n=function(t){return goog.cssNameMapping_[t]||t},r=function(t){t=t.split("-");for(var e=[],r=0;r<t.length;r++)e.push(n(t[r]));return e.join("-")};return r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(t){return t},r=e?t+"-"+r(e):r(t),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(r):r},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,(function(t,n){return null!=e&&n in e?e[n]:t}))),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,n){goog.exportPath_(t,e,n)},goog.exportProperty=function(t,e,n){t[e]=n},goog.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,r){for(var o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return e.prototype[n].apply(t,o)}},goog.base=function(t,e,n){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var o=Array(arguments.length-1),i=1;i<arguments.length;i++)o[i-1]=arguments[i];return r.superClass_.constructor.apply(t,o)}for(o=Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];i=!1;for(var a=t.constructor;a;a=a.superClass_&&a.superClass_.constructor)if(a.prototype[e]===r)i=!0;else if(i)return a.prototype[e].apply(t,o);if(t[e]===r)return t.constructor.prototype[e].apply(t,o);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var n=e.constructor,r=e.statics;return n&&n!=Object.prototype.constructor||(n=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),n=goog.defineClass.createSealingConstructor_(n,t),t&&goog.inherits(n,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(n.prototype,e),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var n=!goog.defineClass.isUnsealable_(e),r=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===r&&n&&Object.seal instanceof Function&&Object.seal(e),e};return r},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)n=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function a(t,e){d?c[t]=!0:e()?c[t]=!1:d=c[t]=!0}function b(a){try{return!!eval(a)}catch(t){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return a("es5",(function(){return b("[1,].length==1")})),a("es6",(function(){var t=e.match(/Edge\/(\d+)(\.\d)*/i);return!(t&&15>Number(t[1]))&&b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')})),a("es6-impl",(function(){return!0})),a("es7",(function(){return b("2 ** 2 == 4")})),a("es8",(function(){return b("async () => 1, true")})),c},goog.debug={},goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.string={},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:""},goog.string.startsWith=function(t,e){return 0==t.lastIndexOf(e,0)},goog.string.endsWith=function(t,e){var n=t.length-e.length;return 0<=n&&t.indexOf(e,n)==n},goog.string.caseInsensitiveStartsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(0,e.length))},goog.string.caseInsensitiveEndsWith=function(t,e){return 0==goog.string.caseInsensitiveCompare(e,t.substr(t.length-e.length,e.length))},goog.string.caseInsensitiveEquals=function(t,e){return t.toLowerCase()==e.toLowerCase()},goog.string.subs=function(t,e){for(var n=t.split("%s"),r="",o=Array.prototype.slice.call(arguments,1);o.length&&1<n.length;)r+=n.shift()+o.shift();return r+n.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptyString=function(t){return 0==t.length},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(t){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(t))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&" "<=t&&"~">=t||""<=t&&"">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,e){var n=String(t).toLowerCase(),r=String(e).toLowerCase();return n<r?-1:n==r?0:1},goog.string.numberAwareCompare_=function(t,e,n){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var r=t.toLowerCase().match(n),o=e.toLowerCase().match(n),i=Math.min(r.length,o.length),a=0;a<i;a++){n=r[a];var s=o[a];if(n!=s)return t=parseInt(n,10),!isNaN(t)&&(e=parseInt(s,10),!isNaN(e)&&t-e)?t-e:n<s?-1:1}return r.length!=o.length?r.length-o.length:t<e?-1:1},goog.string.intAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\D+/g)},goog.string.floatAwareCompare=function(t,e){return goog.string.numberAwareCompare_(t,e,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,e){return t.replace(/(\r\n|\r|\n)/g,e?"<br />":"<br>")},goog.string.htmlEscape=function(t,e){if(e)t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;"));else{if(!goog.string.ALL_RE_.test(t))return t;-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;"))}return t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,e){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,e):t},goog.string.unescapeEntitiesUsingDom_=function(t,e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},r=e?e.createElement("div"):goog.global.document.createElement("div");return t.replace(goog.string.HTML_ENTITY_PATTERN_,(function(t,e){var o=n[t];if(o)return o;if("#"==e.charAt(0)){var i=Number("0"+e.substr(1));isNaN(i)||(o=String.fromCharCode(i))}return o||(r.innerHTML=t+" ",o=r.firstChild.nodeValue.slice(0,-1)),n[t]=o}))},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,(function(t,e){switch(e){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==e.charAt(0)){var n=Number("0"+e.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return t}}))},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,e){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),e)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,e){for(var n=e.length,r=0;r<n;r++){var o=1==n?e:e.charAt(r);if(t.charAt(0)==o&&t.charAt(t.length-1)==o)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,e,n){return n&&(t=goog.string.unescapeEntities(t)),t.length>e&&(t=t.substring(0,e-3)+"..."),n&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,e,n,r){if(n&&(t=goog.string.unescapeEntities(t)),r&&t.length>e){r>e&&(r=e);var o=t.length-r;t=t.substring(0,e-r)+"..."+t.substring(o)}else t.length>e&&(r=Math.floor(e/2),o=t.length-r,t=t.substring(0,r+e%2)+"..."+t.substring(o));return n&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){t=String(t);for(var e=['"'],n=0;n<t.length;n++){var r=t.charAt(n),o=r.charCodeAt(0);e[n+1]=goog.string.specialEscapeChars_[r]||(31<o&&127>o?r:goog.string.escapeChar(r))}return e.push('"'),e.join("")},goog.string.escapeString=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=goog.string.escapeChar(t.charAt(n));return e.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var e=t.charCodeAt(0);if(31<e&&127>e)var n=t;else 256>e?(n="\\x",(16>e||256<e)&&(n+="0")):(n="\\u",4096>e&&(n+="0")),n+=e.toString(16).toUpperCase();return goog.string.jsEscapeCache_[t]=n},goog.string.contains=function(t,e){return-1!=t.indexOf(e)},goog.string.caseInsensitiveContains=function(t,e){return goog.string.contains(t.toLowerCase(),e.toLowerCase())},goog.string.countOf=function(t,e){return t&&e?t.split(e).length-1:0},goog.string.removeAt=function(t,e,n){var r=t;return 0<=e&&e<t.length&&0<n&&(r=t.substr(0,e)+t.substr(e+n,t.length-e-n)),r},goog.string.remove=function(t,e){return t.replace(e,"")},goog.string.removeAll=function(t,e){var n=new RegExp(goog.string.regExpEscape(e),"g");return t.replace(n,"")},goog.string.replaceAll=function(t,e,n){return e=new RegExp(goog.string.regExpEscape(e),"g"),t.replace(e,n.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(t,e){return t.repeat(e)}:function(t,e){return Array(e+1).join(t)},goog.string.padNumber=function(t,e,n){return-1==(n=(t=goog.isDef(n)?t.toFixed(n):String(t)).indexOf("."))&&(n=t.length),goog.string.repeat("0",Math.max(0,e-n))+t},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=function(t,e){for(var n=0,r=goog.string.trim(String(t)).split("."),o=goog.string.trim(String(e)).split("."),i=Math.max(r.length,o.length),a=0;0==n&&a<i;a++){var s=r[a]||"",c=o[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==s[0].length&&0==c[0].length)break;n=0==s[1].length?0:parseInt(s[1],10);var u=0==c[1].length?0:parseInt(c[1],10);n=goog.string.compareElements_(n,u)||goog.string.compareElements_(0==s[2].length,0==c[2].length)||goog.string.compareElements_(s[2],c[2]),s=s[3],c=c[3]}while(0==n)}return n},goog.string.compareElements_=function(t,e){return t<e?-1:t>e?1:0},goog.string.hashCode=function(t){for(var e=0,n=0;n<t.length;++n)e=31*e+t.charCodeAt(n)>>>0;return e},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var e=Number(t);return 0==e&&goog.string.isEmptyOrWhitespace(t)?NaN:e},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,(function(t,e){return e.toUpperCase()}))},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,e){var n=goog.isString(e)?goog.string.regExpEscape(e):"\\s";return t.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),(function(t,e,n){return e+n.toUpperCase()}))},goog.string.capitalize=function(t){return String(t.charAt(0)).toUpperCase()+String(t.substr(1)).toLowerCase()},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,e,n){t=t.split(e);for(var r=[];0<n&&t.length;)r.push(t.shift()),n--;return t.length&&r.push(t.join(e)),r},goog.string.lastComponent=function(t,e){if(!e)return t;"string"==typeof e&&(e=[e]);for(var n=-1,r=0;r<e.length;r++)if(""!=e[r]){var o=t.lastIndexOf(e[r]);o>n&&(n=o)}return-1==n?t:t.slice(n+1)},goog.string.editDistance=function(t,e){var n=[],r=[];if(t==e)return 0;if(!t.length||!e.length)return Math.max(t.length,e.length);for(var o=0;o<e.length+1;o++)n[o]=o;for(o=0;o<t.length;o++){r[0]=o+1;for(var i=0;i<e.length;i++)r[i+1]=Math.min(r[i]+1,n[i+1]+1,n[i]+Number(t[o]!=e[i]));for(i=0;i<n.length;i++)n[i]=r[i]}return r[e.length]},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(t,e){e.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,e)),e.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(t,e,n,r){var o="Assertion failed";if(n){o+=": "+n;var i=r}else t&&(o+=": "+t,i=e);t=new goog.asserts.AssertionError(""+o,i||[]),goog.asserts.errorHandler_(t)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,e){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertFunction=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,e,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,e,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],e,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,e,n,r){return!goog.asserts.ENABLE_ASSERTS||t instanceof e||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(e),goog.asserts.getType_(t)],n,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(t){return t instanceof Function?t.displayName||t.name||"unknown type name":t instanceof Object?t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t):null===t?"null":typeof t},goog.object={},goog.object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},goog.object.forEach=function(t,e,n){for(var r in t)e.call(n,t[r],r,t)},goog.object.filter=function(t,e,n){var r,o={};for(r in t)e.call(n,t[r],r,t)&&(o[r]=t[r]);return o},goog.object.map=function(t,e,n){var r,o={};for(r in t)o[r]=e.call(n,t[r],r,t);return o},goog.object.some=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return!0;return!1},goog.object.every=function(t,e,n){for(var r in t)if(!e.call(n,t[r],r,t))return!1;return!0},goog.object.getCount=function(t){var e,n=0;for(e in t)n++;return n},goog.object.getAnyKey=function(t){for(var e in t)return e},goog.object.getAnyValue=function(t){for(var e in t)return t[e]},goog.object.contains=function(t,e){return goog.object.containsValue(t,e)},goog.object.getValues=function(t){var e,n=[],r=0;for(e in t)n[r++]=t[e];return n},goog.object.getKeys=function(t){var e,n=[],r=0;for(e in t)n[r++]=e;return n},goog.object.getValueByKeys=function(t,e){for(var n=(r=goog.isArrayLike(e))?e:arguments,r=r?0:1;r<n.length&&(t=t[n[r]],goog.isDef(t));r++);return t},goog.object.containsKey=function(t,e){return null!==t&&e in t},goog.object.containsValue=function(t,e){for(var n in t)if(t[n]==e)return!0;return!1},goog.object.findKey=function(t,e,n){for(var r in t)if(e.call(n,t[r],r,t))return r},goog.object.findValue=function(t,e,n){return(e=goog.object.findKey(t,e,n))&&t[e]},goog.object.isEmpty=function(t){for(var e in t)return!1;return!0},goog.object.clear=function(t){for(var e in t)delete t[e]},goog.object.remove=function(t,e){var n;return(n=e in t)&&delete t[e],n},goog.object.add=function(t,e,n){if(null!==t&&e in t)throw Error('The object already contains the key "'+e+'"');goog.object.set(t,e,n)},goog.object.get=function(t,e,n){return null!==t&&e in t?t[e]:n},goog.object.set=function(t,e,n){t[e]=n},goog.object.setIfUndefined=function(t,e,n){return e in t?t[e]:t[e]=n},goog.object.setWithReturnValueIfNotSet=function(t,e,n){return e in t?t[e]:(n=n(),t[e]=n)},goog.object.equals=function(t,e){for(var n in t)if(!(n in e)||t[n]!==e[n])return!1;for(n in e)if(!(n in t))return!1;return!0},goog.object.clone=function(t){var e,n={};for(e in t)n[e]=t[e];return n},goog.object.unsafeClone=function(t){if("object"==(n=goog.typeOf(t))||"array"==n){if(goog.isFunction(t.clone))return t.clone();var e,n="array"==n?[]:{};for(e in t)n[e]=goog.object.unsafeClone(t[e]);return n}return t},goog.object.transpose=function(t){var e,n={};for(e in t)n[t[e]]=e;return n},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(t,e){for(var n,r,o=1;o<arguments.length;o++){for(n in r=arguments[o])t[n]=r[n];for(var i=0;i<goog.object.PROTOTYPE_FIELDS_.length;i++)n=goog.object.PROTOTYPE_FIELDS_[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}},goog.object.create=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(e%2)throw Error("Uneven number of arguments");for(var n={},r=0;r<e;r+=2)n[arguments[r]]=arguments[r+1];return n},goog.object.createSet=function(t){var e=arguments.length;if(1==e&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var n={},r=0;r<e;r++)n[arguments[r]]=!0;return n},goog.object.createImmutableView=function(t){var e=t;return Object.isFrozen&&!Object.isFrozen(t)&&(e=Object.create(t),Object.freeze(e)),e},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.object.getAllPropertyNames=function(t,e,n){if(!t)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(t);for(var r={};t&&(t!==Object.prototype||e)&&(t!==Function.prototype||n);){for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++)r[o[i]]=!0;t=Object.getPrototypeOf(t)}return goog.object.getKeys(r)},goog.reflect={},goog.reflect.object=function(t,e){return e},goog.reflect.objectProperty=function(t,e){return t},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,e){try{return goog.reflect.sinkValue(t[e]),!0}catch(t){}return!1},goog.reflect.cache=function(t,e,n,r){return r=r?r(e):e,Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=n(e)},goog.math={},goog.math.Long=function(t,e){this.low_=0|t,this.high_=0|e},goog.math.Long.IntCache_={},goog.math.Long.valueCache_={},goog.math.Long.getCachedIntValue_=function(t){return goog.reflect.cache(goog.math.Long.IntCache_,t,(function(t){return new goog.math.Long(t,0>t?-1:0)}))},goog.math.Long.MAX_VALUE_FOR_RADIX_="  111111111111111111111111111111111111111111111111111111111111111 2021110011022210012102010021220101220221 13333333333333333333333333333333 1104332401304422434310311212 1540241003031030222122211 22341010611245052052300 777777777777777777777 67404283172107811827 9223372036854775807 1728002635214590697 41a792678515120367 10b269549075433c37 4340724c6c71dc7a7 160e2ad3246366807 7fffffffffffffff 33d3d8307b214008 16agh595df825fa7 ba643dci0ffeehh 5cbfjia3fh26ja7 2heiciiie82dh97 1adaibb21dckfa7 i6k448cf4192c2 acd772jnc9l0l7 64ie1focnn5g77 3igoecjbmca687 27c48l5b37oaop 1bk39f3ah3dmq7 q1se8f0m04isb hajppbc1fc207 bm03i95hia437 7vvvvvvvvvvvv 5hg4ck9jd4u37 3tdtk1v8j6tpp 2pijmikexrxp7 1y2p0ij32e8e7".split(" "),goog.math.Long.MIN_VALUE_FOR_RADIX_="  -1000000000000000000000000000000000000000000000000000000000000000 -2021110011022210012102010021220101220222 -20000000000000000000000000000000 -1104332401304422434310311213 -1540241003031030222122212 -22341010611245052052301 -1000000000000000000000 -67404283172107811828 -9223372036854775808 -1728002635214590698 -41a792678515120368 -10b269549075433c38 -4340724c6c71dc7a8 -160e2ad3246366808 -8000000000000000 -33d3d8307b214009 -16agh595df825fa8 -ba643dci0ffeehi -5cbfjia3fh26ja8 -2heiciiie82dh98 -1adaibb21dckfa8 -i6k448cf4192c3 -acd772jnc9l0l8 -64ie1focnn5g78 -3igoecjbmca688 -27c48l5b37oaoq -1bk39f3ah3dmq8 -q1se8f0m04isc -hajppbc1fc208 -bm03i95hia438 -8000000000000 -5hg4ck9jd4u38 -3tdtk1v8j6tpq -2pijmikexrxp8 -1y2p0ij32e8e8".split(" "),goog.math.Long.fromInt=function(t){var e=0|t;return goog.asserts.assert(t===e,"value should be a 32-bit integer"),-128<=e&&128>e?goog.math.Long.getCachedIntValue_(e):new goog.math.Long(e,0>e?-1:0)},goog.math.Long.fromNumber=function(t){return isNaN(t)?goog.math.Long.getZero():t<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMinValue():t+1>=goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.getMaxValue():0>t?goog.math.Long.fromNumber(-t).negate():new goog.math.Long(t%goog.math.Long.TWO_PWR_32_DBL_|0,t/goog.math.Long.TWO_PWR_32_DBL_|0)},goog.math.Long.fromBits=function(t,e){return new goog.math.Long(t,e)},goog.math.Long.fromString=function(t,e){if(0==t.length)throw Error("number format error: empty string");var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return goog.math.Long.fromString(t.substring(1),n).negate();if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character: '+t);for(var r=goog.math.Long.fromNumber(Math.pow(n,8)),o=goog.math.Long.getZero(),i=0;i<t.length;i+=8){var a=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+a),n);8>a?(a=goog.math.Long.fromNumber(Math.pow(n,a)),o=o.multiply(a).add(goog.math.Long.fromNumber(s))):o=(o=o.multiply(r)).add(goog.math.Long.fromNumber(s))}return o},goog.math.Long.isStringInRange=function(t,e){var n=e||10;if(2>n||36<n)throw Error("radix out of range: "+n);return n="-"==t.charAt(0)?goog.math.Long.MIN_VALUE_FOR_RADIX_[n]:goog.math.Long.MAX_VALUE_FOR_RADIX_[n],t.length<n.length||t.length==n.length&&t<=n},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_32_DBL_=goog.math.Long.TWO_PWR_16_DBL_*goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_64_DBL_=goog.math.Long.TWO_PWR_32_DBL_*goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_63_DBL_=goog.math.Long.TWO_PWR_64_DBL_/2,goog.math.Long.getZero=function(){return goog.math.Long.getCachedIntValue_(0)},goog.math.Long.getOne=function(){return goog.math.Long.getCachedIntValue_(1)},goog.math.Long.getNegOne=function(){return goog.math.Long.getCachedIntValue_(-1)},goog.math.Long.getMaxValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MAX_VALUE,(function(){return goog.math.Long.fromBits(-1,2147483647)}))},goog.math.Long.getMinValue=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.MIN_VALUE,(function(){return goog.math.Long.fromBits(0,-2147483648)}))},goog.math.Long.getTwoPwr24=function(){return goog.reflect.cache(goog.math.Long.valueCache_,goog.math.Long.ValueCacheId_.TWO_PWR_24,(function(){return goog.math.Long.fromInt(16777216)}))},goog.math.Long.prototype.toInt=function(){return this.low_},goog.math.Long.prototype.toNumber=function(){return this.high_*goog.math.Long.TWO_PWR_32_DBL_+this.getLowBitsUnsigned()},goog.math.Long.prototype.toString=function(t){if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(goog.math.Long.getMinValue())){var e=goog.math.Long.fromNumber(t),n=this.div(e);return e=n.multiply(e).subtract(this),n.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}n=goog.math.Long.fromNumber(Math.pow(t,6)),e=this;for(var r="";;){var o=e.div(n),i=(e.subtract(o.multiply(n)).toInt()>>>0).toString(t);if((e=o).isZero())return i+r;for(;6>i.length;)i="0"+i;r=""+i+r}},goog.math.Long.prototype.getHighBits=function(){return this.high_},goog.math.Long.prototype.getLowBits=function(){return this.low_},goog.math.Long.prototype.getLowBitsUnsigned=function(){return 0<=this.low_?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.getMinValue())?64:this.negate().getNumBitsAbs();for(var t=0!=this.high_?this.high_:this.low_,e=31;0<e&&0==(t&1<<e);e--);return 0!=this.high_?e+33:e+1},goog.math.Long.prototype.isZero=function(){return 0==this.high_&&0==this.low_},goog.math.Long.prototype.isNegative=function(){return 0>this.high_},goog.math.Long.prototype.isOdd=function(){return 1==(1&this.low_)},goog.math.Long.prototype.equals=function(t){return this.high_==t.high_&&this.low_==t.low_},goog.math.Long.prototype.notEquals=function(t){return this.high_!=t.high_||this.low_!=t.low_},goog.math.Long.prototype.lessThan=function(t){return 0>this.compare(t)},goog.math.Long.prototype.lessThanOrEqual=function(t){return 0>=this.compare(t)},goog.math.Long.prototype.greaterThan=function(t){return 0<this.compare(t)},goog.math.Long.prototype.greaterThanOrEqual=function(t){return 0<=this.compare(t)},goog.math.Long.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.subtract(t).isNegative()?-1:1},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.getMinValue())?goog.math.Long.getMinValue():this.not().add(goog.math.Long.getOne())},goog.math.Long.prototype.add=function(t){var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=t.high_>>>16,i=65535&t.high_,a=t.low_>>>16;return r=0+((a=0+((t=(65535&this.low_)+(65535&t.low_)+0)>>>16)+(r+a))>>>16),e=0+((r+=n+i)>>>16)+(e+o)&65535,goog.math.Long.fromBits((65535&a)<<16|65535&t,e<<16|65535&r)},goog.math.Long.prototype.subtract=function(t){return this.add(t.negate())},goog.math.Long.prototype.multiply=function(t){if(this.isZero()||t.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue()))return t.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(t.equals(goog.math.Long.getMinValue()))return this.isOdd()?goog.math.Long.getMinValue():goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(goog.math.Long.getTwoPwr24())&&t.lessThan(goog.math.Long.getTwoPwr24()))return goog.math.Long.fromNumber(this.toNumber()*t.toNumber());var e=this.high_>>>16,n=65535&this.high_,r=this.low_>>>16,o=65535&this.low_,i=t.high_>>>16,a=65535&t.high_,s=t.low_>>>16,c=0+o*(t=65535&t.low_),u=0+(c>>>16)+r*t,l=0+(u>>>16);l+=(u=(65535&u)+o*s)>>>16;var f=0+((l+=n*t)>>>16);return f=(f+=(l=(65535&l)+r*s)>>>16)+((l=(65535&l)+o*a)>>>16)+(e*t+n*s+r*a+o*i)&65535,goog.math.Long.fromBits((65535&u)<<16|65535&c,f<<16|65535&l)},goog.math.Long.prototype.div=function(t){if(t.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.getZero();if(this.equals(goog.math.Long.getMinValue())){if(t.equals(goog.math.Long.getOne())||t.equals(goog.math.Long.getNegOne()))return goog.math.Long.getMinValue();if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getOne();var e=this.shiftRight(1);if((e=e.div(t).shiftLeft(1)).equals(goog.math.Long.getZero()))return t.isNegative()?goog.math.Long.getOne():goog.math.Long.getNegOne();var n=this.subtract(t.multiply(e));return e.add(n.div(t))}if(t.equals(goog.math.Long.getMinValue()))return goog.math.Long.getZero();if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var r=goog.math.Long.getZero();for(n=this;n.greaterThanOrEqual(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=48>=(o=Math.ceil(Math.log(e)/Math.LN2))?1:Math.pow(2,o-48),i=goog.math.Long.fromNumber(e),a=i.multiply(t);a.isNegative()||a.greaterThan(n);)e-=o,a=(i=goog.math.Long.fromNumber(e)).multiply(t);i.isZero()&&(i=goog.math.Long.getOne()),r=r.add(i),n=n.subtract(a)}return r},goog.math.Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_)},goog.math.Long.prototype.and=function(t){return goog.math.Long.fromBits(this.low_&t.low_,this.high_&t.high_)},goog.math.Long.prototype.or=function(t){return goog.math.Long.fromBits(this.low_|t.low_,this.high_|t.high_)},goog.math.Long.prototype.xor=function(t){return goog.math.Long.fromBits(this.low_^t.low_,this.high_^t.high_)},goog.math.Long.prototype.shiftLeft=function(t){if(0==(t&=63))return this;var e=this.low_;return 32>t?goog.math.Long.fromBits(e<<t,this.high_<<t|e>>>32-t):goog.math.Long.fromBits(0,e<<t-32)},goog.math.Long.prototype.shiftRight=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>t):goog.math.Long.fromBits(e>>t-32,0<=e?0:-1)},goog.math.Long.prototype.shiftRightUnsigned=function(t){if(0==(t&=63))return this;var e=this.high_;return 32>t?goog.math.Long.fromBits(this.low_>>>t|e<<32-t,e>>>t):32==t?goog.math.Long.fromBits(e,0):goog.math.Long.fromBits(e>>>t-32,0)},goog.math.Long.ValueCacheId_={MAX_VALUE:1,MIN_VALUE:2,TWO_PWR_24:6};var com={cognitect:{}};com.cognitect.transit={},com.cognitect.transit.delimiters={},com.cognitect.transit.delimiters.ESC="~",com.cognitect.transit.delimiters.TAG="#",com.cognitect.transit.delimiters.SUB="^",com.cognitect.transit.delimiters.RES="`",com.cognitect.transit.delimiters.ESC_TAG="~#",com.cognitect.transit.caching={},com.cognitect.transit.caching.MIN_SIZE_CACHEABLE=3,com.cognitect.transit.caching.BASE_CHAR_IDX=48,com.cognitect.transit.caching.CACHE_CODE_DIGITS=44,com.cognitect.transit.caching.MAX_CACHE_ENTRIES=com.cognitect.transit.caching.CACHE_CODE_DIGITS*com.cognitect.transit.caching.CACHE_CODE_DIGITS,com.cognitect.transit.caching.MAX_CACHE_SIZE=4096,com.cognitect.transit.caching.isCacheable=function(t,e){if(t.length>com.cognitect.transit.caching.MIN_SIZE_CACHEABLE){if(e)return!0;var n=t.charAt(0),r=t.charAt(1);return n===com.cognitect.transit.delimiters.ESC&&(":"===r||"$"===r||"#"===r)}return!1},com.cognitect.transit.caching.idxToCode=function(t){var e=Math.floor(t/com.cognitect.transit.caching.CACHE_CODE_DIGITS);return t=String.fromCharCode(t%com.cognitect.transit.caching.CACHE_CODE_DIGITS+com.cognitect.transit.caching.BASE_CHAR_IDX),0===e?com.cognitect.transit.delimiters.SUB+t:com.cognitect.transit.delimiters.SUB+String.fromCharCode(e+com.cognitect.transit.caching.BASE_CHAR_IDX)+t},com.cognitect.transit.caching.WriteCache=function(){this.cacheSize=this.gen=this.idx=0,this.cache={}},com.cognitect.transit.caching.WriteCache.prototype.write=function(t,e){if(com.cognitect.transit.caching.isCacheable(t,e)){this.cacheSize===com.cognitect.transit.caching.MAX_CACHE_SIZE?(this.clear(),this.gen=0,this.cache={}):this.idx===com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&this.clear();var n=this.cache[t];return null==n?(this.cache[t]=[com.cognitect.transit.caching.idxToCode(this.idx),this.gen],this.idx++,t):n[1]!=this.gen?(n[1]=this.gen,n[0]=com.cognitect.transit.caching.idxToCode(this.idx),this.idx++,t):n[0]}return t},com.cognitect.transit.caching.WriteCache.prototype.clear=function(){this.idx=0,this.gen++},com.cognitect.transit.caching.writeCache=function(){return new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.caching.isCacheCode=function(t){return t.charAt(0)===com.cognitect.transit.delimiters.SUB&&" "!==t.charAt(1)},com.cognitect.transit.caching.codeToIdx=function(t){return 2===t.length?t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX:(t.charCodeAt(1)-com.cognitect.transit.caching.BASE_CHAR_IDX)*com.cognitect.transit.caching.CACHE_CODE_DIGITS+(t=t.charCodeAt(2)-com.cognitect.transit.caching.BASE_CHAR_IDX)},com.cognitect.transit.caching.ReadCache=function(){this.idx=0,this.cache=[]},com.cognitect.transit.caching.ReadCache.prototype.write=function(t,e){return this.idx==com.cognitect.transit.caching.MAX_CACHE_ENTRIES&&(this.idx=0),this.cache[this.idx]=t,this.idx++,t},com.cognitect.transit.caching.ReadCache.prototype.read=function(t,e){return this.cache[com.cognitect.transit.caching.codeToIdx(t)]},com.cognitect.transit.caching.ReadCache.prototype.clear=function(){this.idx=0},com.cognitect.transit.caching.readCache=function(){return new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.util={},com.cognitect.transit.util.objectKeys=void 0!==Object.keys?function(t){return Object.keys(t)}:function(t){return goog.object.getKeys(t)},com.cognitect.transit.util.isArray=void 0!==Array.isArray?function(t){return Array.isArray(t)}:function(t){return"array"===goog.typeOf(t)},com.cognitect.transit.util.chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",com.cognitect.transit.util.randInt=function(t){return Math.round(Math.random()*t)},com.cognitect.transit.util.randHex=function(){return com.cognitect.transit.util.randInt(15).toString(16)},com.cognitect.transit.util.randomUUID=function(){var t=(8|3&com.cognitect.transit.util.randInt(14)).toString(16);return com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-4"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+t+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+"-"+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()+com.cognitect.transit.util.randHex()},com.cognitect.transit.util.btoa=function(t){if("undefined"!=typeof btoa)return btoa(t);t=String(t);for(var e,n,r=0,o=com.cognitect.transit.util.chars,i="";t.charAt(0|r)||(o="=",r%1);i+=o.charAt(63&e>>8-r%1*8)){if(255<(n=t.charCodeAt(r+=.75)))throw Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");e=e<<8|n}return i},com.cognitect.transit.util.atob=function(t){if("undefined"!=typeof atob)return atob(t);if(1==(t=String(t).replace(/=+$/,"")).length%4)throw Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,n,r=0,o=0,i="";n=t.charAt(o++);~n&&(e=r%4?64*e+n:n,r++%4)?i+=String.fromCharCode(255&e>>(-2*r&6)):0)n=com.cognitect.transit.util.chars.indexOf(n);return i},com.cognitect.transit.util.Uint8ToBase64=function(t){for(var e,n=0,r=t.length,o="";n<r;)e=t.subarray(n,Math.min(n+32768,r)),o+=String.fromCharCode.apply(null,e),n+=32768;return com.cognitect.transit.util.btoa(o)},com.cognitect.transit.util.Base64ToUint8=function(t){for(var e=(t=com.cognitect.transit.util.atob(t)).length,n=new Uint8Array(e),r=0;r<e;r++){var o=t.charCodeAt(r);n[r]=o}return n},com.cognitect.transit.eq={},com.cognitect.transit.eq.hashCodeProperty="transit$hashCode$",com.cognitect.transit.eq.hashCodeCounter=1,com.cognitect.transit.eq.equals=function(t,e){if(null==t)return null==e;if(t===e)return!0;if("object"==typeof t){if(com.cognitect.transit.util.isArray(t)){if(com.cognitect.transit.util.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!com.cognitect.transit.eq.equals(t[n],e[n]))return!1;return!0}return!1}if(t.com$cognitect$transit$equals)return t.com$cognitect$transit$equals(e);if(null!=e&&"object"==typeof e){if(e.com$cognitect$transit$equals)return e.com$cognitect$transit$equals(t);n=0;var r,o=com.cognitect.transit.util.objectKeys(e).length;for(r in t)if(t.hasOwnProperty(r)&&(n++,!e.hasOwnProperty(r)||!com.cognitect.transit.eq.equals(t[r],e[r])))return!1;return n===o}}return!1},com.cognitect.transit.eq.hashCombine=function(t,e){return t^e+2654435769+(t<<6)+(t>>2)},com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=0,com.cognitect.transit.eq.STR_CACHE_MAX=256,com.cognitect.transit.eq.hashString=function(t){var e=com.cognitect.transit.eq.stringCodeCache[t];if(null!=e)return e;for(var n=e=0;n<t.length;++n)e=31*e+t.charCodeAt(n),e%=4294967296;return com.cognitect.transit.eq.stringCodeCacheSize++,com.cognitect.transit.eq.stringCodeCacheSize>=com.cognitect.transit.eq.STR_CACHE_MAX&&(com.cognitect.transit.eq.stringCodeCache={},com.cognitect.transit.eq.stringCodeCacheSize=1),com.cognitect.transit.eq.stringCodeCache[t]=e},com.cognitect.transit.eq.hashMapLike=function(t){var e=0;if(null!=t.forEach)t.forEach((function(t,n,r){e=(e+(com.cognitect.transit.eq.hashCode(n)^com.cognitect.transit.eq.hashCode(t)))%4503599627370496}));else for(var n=com.cognitect.transit.util.objectKeys(t),r=0;r<n.length;r++){var o=n[r],i=t[o];e=(e+(com.cognitect.transit.eq.hashCode(o)^com.cognitect.transit.eq.hashCode(i)))%4503599627370496}return e},com.cognitect.transit.eq.hashArrayLike=function(t){var e=0;if(com.cognitect.transit.util.isArray(t))for(var n=0;n<t.length;n++)e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t[n]));else t.forEach&&t.forEach((function(t,n){e=com.cognitect.transit.eq.hashCombine(e,com.cognitect.transit.eq.hashCode(t))}));return e},com.cognitect.transit.eq.hashCode=function(t){if(null==t)return 0;switch(typeof t){case"number":return t;case"boolean":return!0===t?1:0;case"string":return com.cognitect.transit.eq.hashString(t);case"function":var e=t[com.cognitect.transit.eq.hashCodeProperty];return e||(e=com.cognitect.transit.eq.hashCodeCounter,void 0!==Object.defineProperty?Object.defineProperty(t,com.cognitect.transit.eq.hashCodeProperty,{value:e,enumerable:!1}):t[com.cognitect.transit.eq.hashCodeProperty]=e,com.cognitect.transit.eq.hashCodeCounter++),e;default:return t instanceof Date?t.valueOf():com.cognitect.transit.util.isArray(t)?com.cognitect.transit.eq.hashArrayLike(t):t.com$cognitect$transit$hashCode?t.com$cognitect$transit$hashCode():com.cognitect.transit.eq.hashMapLike(t)}},com.cognitect.transit.eq.extendToEQ=function(t,e){return t.com$cognitect$transit$hashCode=e.hashCode,t.com$cognitect$transit$equals=e.equals,t},com.cognitect.transit.types={},com.cognitect.transit.types.ITERATOR="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",com.cognitect.transit.types.TaggedValue=function(t,e){this.tag=t,this.rep=e,this.hashCode=-1},com.cognitect.transit.types.TaggedValue.prototype.toString=function(){return"[TaggedValue: "+this.tag+", "+this.rep+"]"},com.cognitect.transit.types.TaggedValue.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.TaggedValue.prototype.equiv=com.cognitect.transit.types.TaggedValue.prototype.equiv,com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&this.tag===t.tag&&com.cognitect.transit.eq.equals(this.rep,t.rep)},com.cognitect.transit.types.TaggedValue.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCombine(com.cognitect.transit.eq.hashCode(this.tag),com.cognitect.transit.eq.hashCode(this.rep))),this.hashCode},com.cognitect.transit.types.taggedValue=function(t,e){return new com.cognitect.transit.types.TaggedValue(t,e)},com.cognitect.transit.types.isTaggedValue=function(t){return t instanceof com.cognitect.transit.types.TaggedValue},com.cognitect.transit.types.nullValue=function(){return null},com.cognitect.transit.types.boolValue=function(t){return"t"===t},com.cognitect.transit.types.MAX_INT=goog.math.Long.fromString("9007199254740991"),com.cognitect.transit.types.MIN_INT=goog.math.Long.fromString("-9007199254740991"),com.cognitect.transit.types.intValue=function(t){return"number"==typeof t||t instanceof goog.math.Long||(t=goog.math.Long.fromString(t,10)).greaterThan(com.cognitect.transit.types.MAX_INT)||t.lessThan(com.cognitect.transit.types.MIN_INT)?t:t.toNumber()},goog.math.Long.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},goog.math.Long.prototype.equiv=goog.math.Long.prototype.equiv,goog.math.Long.prototype.com$cognitect$transit$equals=function(t){return t instanceof goog.math.Long&&this.equals(t)},goog.math.Long.prototype.com$cognitect$transit$hashCode=function(){return this.toInt()},com.cognitect.transit.types.isInteger=function(t){return t instanceof goog.math.Long||"number"==typeof t&&!isNaN(t)&&1/0!==t&&parseFloat(t)===parseInt(t,10)},com.cognitect.transit.types.floatValue=function(t){return parseFloat(t)},com.cognitect.transit.types.bigInteger=function(t){return com.cognitect.transit.types.taggedValue("n",t)},com.cognitect.transit.types.isBigInteger=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"n"===t.tag},com.cognitect.transit.types.bigDecimalValue=function(t){return com.cognitect.transit.types.taggedValue("f",t)},com.cognitect.transit.types.isBigDecimal=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"f"===t.tag},com.cognitect.transit.types.charValue=function(t){return t},com.cognitect.transit.types.Keyword=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Keyword.prototype.toString=function(){return":"+this._name},com.cognitect.transit.types.Keyword.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Keyword.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Keyword.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Keyword.prototype.equiv=com.cognitect.transit.types.Keyword.prototype.equiv,com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Keyword&&this._name==t._name},com.cognitect.transit.types.Keyword.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.keyword=function(t){return new com.cognitect.transit.types.Keyword(t)},com.cognitect.transit.types.isKeyword=function(t){return t instanceof com.cognitect.transit.types.Keyword},com.cognitect.transit.types.Symbol=function(t){this._name=t,this.hashCode=-1},com.cognitect.transit.types.Symbol.prototype.namespace=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(0,t):null},com.cognitect.transit.types.Symbol.prototype.name=function(){var t=this._name.indexOf("/");return-1!=t?this._name.substring(t+1,this._name.length):this._name},com.cognitect.transit.types.Symbol.prototype.toString=function(){return this._name},com.cognitect.transit.types.Symbol.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.Symbol.prototype.equiv=com.cognitect.transit.types.Symbol.prototype.equiv,com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.Symbol&&this._name==t._name},com.cognitect.transit.types.Symbol.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this._name)),this.hashCode},com.cognitect.transit.types.symbol=function(t){return new com.cognitect.transit.types.Symbol(t)},com.cognitect.transit.types.isSymbol=function(t){return t instanceof com.cognitect.transit.types.Symbol},com.cognitect.transit.types.hexFor=function(t,e,n){var r="";n=n||e+1;for(var o=8*(7-e),i=goog.math.Long.fromInt(255).shiftLeft(o);e<n;e++,o-=8,i=i.shiftRightUnsigned(8)){var a=t.and(i).shiftRightUnsigned(o).toString(16);1==a.length&&(a="0"+a),r+=a}return r},com.cognitect.transit.types.UUID=function(t,e){this.high=t,this.low=e,this.hashCode=-1},com.cognitect.transit.types.UUID.prototype.getLeastSignificantBits=function(){return this.low},com.cognitect.transit.types.UUID.prototype.getMostSignificantBits=function(){return this.high},com.cognitect.transit.types.UUID.prototype.toString=function(){var t=this.high,e=this.low,n=com.cognitect.transit.types.hexFor(t,0,4)+"-";return n+=com.cognitect.transit.types.hexFor(t,4,6)+"-",n+=com.cognitect.transit.types.hexFor(t,6,8)+"-",(n+=com.cognitect.transit.types.hexFor(e,0,2)+"-")+com.cognitect.transit.types.hexFor(e,2,8)},com.cognitect.transit.types.UUID.prototype.equiv=function(t){return com.cognitect.transit.eq.equals(this,t)},com.cognitect.transit.types.UUID.prototype.equiv=com.cognitect.transit.types.UUID.prototype.equiv,com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.UUID&&this.high.equals(t.high)&&this.low.equals(t.low)},com.cognitect.transit.types.UUID.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashCode(this.toString())),this.hashCode},com.cognitect.transit.types.UUIDfromString=function(t){var e,n;t=t.replace(/-/g,"");var r=e=0;for(n=24;8>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;var o=0;for(r=8,n=24;16>r;r+=2,n-=8)o|=parseInt(t.substring(r,r+2),16)<<n;var i=goog.math.Long.fromBits(o,e);for(e=0,r=16,n=24;24>r;r+=2,n-=8)e|=parseInt(t.substring(r,r+2),16)<<n;for(o=0,n=r=24;32>r;r+=2,n-=8)o|=parseInt(t.substring(r,r+2),16)<<n;return t=goog.math.Long.fromBits(o,e),new com.cognitect.transit.types.UUID(i,t)},com.cognitect.transit.types.uuid=function(t){return com.cognitect.transit.types.UUIDfromString(t)},com.cognitect.transit.types.isUUID=function(t){return t instanceof com.cognitect.transit.types.UUID},com.cognitect.transit.types.date=function(t){return t="number"==typeof t?t:parseInt(t,10),new Date(t)},com.cognitect.transit.types.verboseDate=function(t){return new Date(t)},Date.prototype.com$cognitect$transit$equals=function(t){return t instanceof Date&&this.valueOf()===t.valueOf()},Date.prototype.com$cognitect$transit$hashCode=function(){return this.valueOf()},com.cognitect.transit.types.binary=function(t,e){return e&&!1===e.preferBuffers||void 0===goog.global.Buffer?"undefined"!=typeof Uint8Array?com.cognitect.transit.util.Base64ToUint8(t):com.cognitect.transit.types.taggedValue("b",t):new goog.global.Buffer(t,"base64")},com.cognitect.transit.types.isBinary=function(t){return void 0!==goog.global.Buffer&&t instanceof goog.global.Buffer||"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t instanceof com.cognitect.transit.types.TaggedValue&&"b"===t.tag},com.cognitect.transit.types.uri=function(t){return com.cognitect.transit.types.taggedValue("r",t)},com.cognitect.transit.types.isURI=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"r"===t.tag},com.cognitect.transit.types.KEYS=0,com.cognitect.transit.types.VALUES=1,com.cognitect.transit.types.ENTRIES=2,com.cognitect.transit.types.TransitArrayMapIterator=function(t,e){this.entries=t,this.type=e||com.cognitect.transit.types.KEYS,this.idx=0},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=function(){if(this.idx<this.entries.length){var t={value:this.type===com.cognitect.transit.types.KEYS?this.entries[this.idx]:this.type===com.cognitect.transit.types.VALUES?this.entries[this.idx+1]:[this.entries[this.idx],this.entries[this.idx+1]],done:!1};return this.idx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitArrayMapIterator.prototype.next=com.cognitect.transit.types.TransitArrayMapIterator.prototype.next,com.cognitect.transit.types.TransitArrayMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.TransitMapIterator=function(t,e){this.map=t,this.type=e||com.cognitect.transit.types.KEYS,this.keys=this.map.getKeys(),this.idx=0,this.bucket=null,this.bucketIdx=0},com.cognitect.transit.types.TransitMapIterator.prototype.next=function(){if(this.idx<this.map.size){null!=this.bucket&&this.bucketIdx<this.bucket.length||(this.bucket=this.map.map[this.keys[this.idx]],this.bucketIdx=0);var t={value:this.type===com.cognitect.transit.types.KEYS?this.bucket[this.bucketIdx]:this.type===com.cognitect.transit.types.VALUES?this.bucket[this.bucketIdx+1]:[this.bucket[this.bucketIdx],this.bucket[this.bucketIdx+1]],done:!1};return this.idx++,this.bucketIdx+=2,t}return{value:null,done:!0}},com.cognitect.transit.types.TransitMapIterator.prototype.next=com.cognitect.transit.types.TransitMapIterator.prototype.next,com.cognitect.transit.types.TransitMapIterator.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this},com.cognitect.transit.types.mapEquals=function(t,e){if(t instanceof com.cognitect.transit.types.TransitMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(var n in t.map)for(var r=t.map[n],o=0;o<r.length;o+=2)if(!com.cognitect.transit.eq.equals(r[o+1],e.get(r[o])))return!1;return!0}if(t instanceof com.cognitect.transit.types.TransitArrayMap&&com.cognitect.transit.types.isMap(e)){if(t.size!==e.size)return!1;for(n=t._entries,o=0;o<n.length;o+=2)if(!com.cognitect.transit.eq.equals(n[o+1],e.get(n[o])))return!1;return!0}if(null!=e&&"object"==typeof e&&(n=(o=com.cognitect.transit.util.objectKeys(e)).length,t.size===n)){for(r=0;r<n;r++){var i=o[r];if(!t.has(i)||!com.cognitect.transit.eq.equals(e[i],t.get(i)))return!1}return!0}return!1},com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD=8,com.cognitect.transit.types.ARRAY_MAP_THRESHOLD=32,com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD=32,com.cognitect.transit.types.print=function(t){return null==t?"null":goog.isArray(t)?"["+t.toString()+"]":goog.isString(t)?'"'+t+'"':t.toString()},com.cognitect.transit.types.printMap=function(t){var e=0,n="TransitMap {";return t.forEach((function(r,o){n+=com.cognitect.transit.types.print(o)+" => "+com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++})),n+"}"},com.cognitect.transit.types.printSet=function(t){var e=0,n="TransitSet {";return t.forEach((function(r){n+=com.cognitect.transit.types.print(r),e<t.size-1&&(n+=", "),e++})),n+"}"},com.cognitect.transit.types.TransitArrayMap=function(t){this._entries=t,this.backingMap=null,this.hashCode=-1,this.size=t.length/2,this.accesses=0},com.cognitect.transit.types.TransitArrayMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitArrayMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitArrayMap.prototype.convert=function(){if(this.backingMap)throw Error("Invalid operation, already converted");return!(this.size<com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD)&&(this.accesses++,this.accesses>com.cognitect.transit.types.ARRAY_MAP_ACCESS_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=[],!0))},com.cognitect.transit.types.TransitArrayMap.prototype.clear=function(){this.hashCode=-1,this.backingMap?this.backingMap.clear():this._entries=[],this.size=0},com.cognitect.transit.types.TransitArrayMap.prototype.clear=com.cognitect.transit.types.TransitArrayMap.prototype.clear,com.cognitect.transit.types.TransitArrayMap.prototype.keys=function(){return this.backingMap?this.backingMap.keys():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitArrayMap.prototype.keys=com.cognitect.transit.types.TransitArrayMap.prototype.keys,com.cognitect.transit.types.TransitArrayMap.prototype.keySet=function(){if(this.backingMap)return this.backingMap.keySet();for(var t=[],e=0,n=0;n<this._entries.length;e++,n+=2)t[e]=this._entries[n];return t},com.cognitect.transit.types.TransitArrayMap.prototype.keySet=com.cognitect.transit.types.TransitArrayMap.prototype.keySet,com.cognitect.transit.types.TransitArrayMap.prototype.entries=function(){return this.backingMap?this.backingMap.entries():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitArrayMap.prototype.entries=com.cognitect.transit.types.TransitArrayMap.prototype.entries,com.cognitect.transit.types.TransitArrayMap.prototype.values=function(){return this.backingMap?this.backingMap.values():new com.cognitect.transit.types.TransitArrayMapIterator(this._entries,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitArrayMap.prototype.values=com.cognitect.transit.types.TransitArrayMap.prototype.values,com.cognitect.transit.types.TransitArrayMap.prototype.forEach=function(t){if(this.backingMap)this.backingMap.forEach(t);else for(var e=0;e<this._entries.length;e+=2)t(this._entries[e+1],this._entries[e])},com.cognitect.transit.types.TransitArrayMap.prototype.forEach=com.cognitect.transit.types.TransitArrayMap.prototype.forEach,com.cognitect.transit.types.TransitArrayMap.prototype.get=function(t,e){if(this.backingMap)return this.backingMap.get(t);if(this.convert())return this.get(t);for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return this._entries[n+1];return e},com.cognitect.transit.types.TransitArrayMap.prototype.get=com.cognitect.transit.types.TransitArrayMap.prototype.get,com.cognitect.transit.types.TransitArrayMap.prototype.has=function(t){if(this.backingMap)return this.backingMap.has(t);if(this.convert())return this.has(t);for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return!0;return!1},com.cognitect.transit.types.TransitArrayMap.prototype.has=com.cognitect.transit.types.TransitArrayMap.prototype.has,com.cognitect.transit.types.TransitArrayMap.prototype.set=function(t,e){if(this.hashCode=-1,this.backingMap)this.backingMap.set(t,e),this.size=this.backingMap.size;else{for(var n=0;n<this._entries.length;n+=2)if(com.cognitect.transit.eq.equals(this._entries[n],t))return void(this._entries[n+1]=e);this._entries.push(t),this._entries.push(e),this.size++,this.size>com.cognitect.transit.types.ARRAY_MAP_THRESHOLD&&(this.backingMap=com.cognitect.transit.types.map(this._entries,!1,!0),this._entries=null)}},com.cognitect.transit.types.TransitArrayMap.prototype.set=com.cognitect.transit.types.TransitArrayMap.prototype.set,com.cognitect.transit.types.TransitArrayMap.prototype.delete=function(t){if(this.hashCode=-1,this.backingMap)return t=this.backingMap.delete(t),this.size=this.backingMap.size,t;for(var e=0;e<this._entries.length;e+=2)if(com.cognitect.transit.eq.equals(this._entries[e],t))return t=this._entries[e+1],this._entries.splice(e,2),this.size--,t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach((function(e,n){t.set(n,e)})),t},com.cognitect.transit.types.TransitArrayMap.prototype.clone=com.cognitect.transit.types.TransitArrayMap.prototype.clone,com.cognitect.transit.types.TransitArrayMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$hashCode=function(){return this.backingMap?this.backingMap.com$cognitect$transit$hashCode():(-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode)},com.cognitect.transit.types.TransitArrayMap.prototype.com$cognitect$transit$equals=function(t){return this.backingMap?com.cognitect.transit.types.mapEquals(this.backingMap,t):com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.TransitMap=function(t,e,n){this.map=e||{},this._keys=t||[],this.size=n||0,this.hashCode=-1},com.cognitect.transit.types.TransitMap.prototype.toString=function(){return com.cognitect.transit.types.printMap(this)},com.cognitect.transit.types.TransitMap.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitMap.prototype.clear=function(){this.hashCode=-1,this.map={},this._keys=[],this.size=0},com.cognitect.transit.types.TransitMap.prototype.clear=com.cognitect.transit.types.TransitMap.prototype.clear,com.cognitect.transit.types.TransitMap.prototype.getKeys=function(){return null!=this._keys?this._keys:com.cognitect.transit.util.objectKeys(this.map)},com.cognitect.transit.types.TransitMap.prototype.delete=function(t){this.hashCode=-1,this._keys=null;for(var e=com.cognitect.transit.eq.hashCode(t),n=this.map[e],r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return t=n[r+1],n.splice(r,2),0===n.length&&delete this.map[e],this.size--,t},com.cognitect.transit.types.TransitMap.prototype.entries=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.ENTRIES)},com.cognitect.transit.types.TransitMap.prototype.entries=com.cognitect.transit.types.TransitMap.prototype.entries,com.cognitect.transit.types.TransitMap.prototype.forEach=function(t){for(var e=this.getKeys(),n=0;n<e.length;n++)for(var r=this.map[e[n]],o=0;o<r.length;o+=2)t(r[o+1],r[o],this)},com.cognitect.transit.types.TransitMap.prototype.forEach=com.cognitect.transit.types.TransitMap.prototype.forEach,com.cognitect.transit.types.TransitMap.prototype.get=function(t,e){var n=com.cognitect.transit.eq.hashCode(t);if(null==(n=this.map[n]))return e;for(var r=0;r<n.length;r+=2)if(com.cognitect.transit.eq.equals(t,n[r]))return n[r+1]},com.cognitect.transit.types.TransitMap.prototype.get=com.cognitect.transit.types.TransitMap.prototype.get,com.cognitect.transit.types.TransitMap.prototype.has=function(t){var e=com.cognitect.transit.eq.hashCode(t);if(null!=(e=this.map[e]))for(var n=0;n<e.length;n+=2)if(com.cognitect.transit.eq.equals(t,e[n]))return!0;return!1},com.cognitect.transit.types.TransitMap.prototype.has=com.cognitect.transit.types.TransitMap.prototype.has,com.cognitect.transit.types.TransitMap.prototype.keys=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.KEYS)},com.cognitect.transit.types.TransitMap.prototype.keys=com.cognitect.transit.types.TransitMap.prototype.keys,com.cognitect.transit.types.TransitMap.prototype.keySet=function(){for(var t=this.getKeys(),e=[],n=0;n<t.length;n++)for(var r=this.map[t[n]],o=0;o<r.length;o+=2)e.push(r[o]);return e},com.cognitect.transit.types.TransitMap.prototype.keySet=com.cognitect.transit.types.TransitMap.prototype.keySet,com.cognitect.transit.types.TransitMap.prototype.set=function(t,e){this.hashCode=-1;var n=com.cognitect.transit.eq.hashCode(t),r=this.map[n];if(null==r)this._keys&&this._keys.push(n),this.map[n]=[t,e],this.size++;else{n=!0;for(var o=0;o<r.length;o+=2)if(com.cognitect.transit.eq.equals(e,r[o])){n=!1,r[o]=e;break}n&&(r.push(t),r.push(e),this.size++)}},com.cognitect.transit.types.TransitMap.prototype.set=com.cognitect.transit.types.TransitMap.prototype.set,com.cognitect.transit.types.TransitMap.prototype.values=function(){return new com.cognitect.transit.types.TransitMapIterator(this,com.cognitect.transit.types.VALUES)},com.cognitect.transit.types.TransitMap.prototype.values=com.cognitect.transit.types.TransitMap.prototype.values,com.cognitect.transit.types.TransitMap.prototype.clone=function(){var t=com.cognitect.transit.types.map();return this.forEach((function(e,n){t.set(n,e)})),t},com.cognitect.transit.types.TransitMap.prototype.clone=com.cognitect.transit.types.TransitMap.prototype.clone,com.cognitect.transit.types.TransitMap.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.entries()},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$hashCode=function(){return-1===this.hashCode&&(this.hashCode=com.cognitect.transit.eq.hashMapLike(this)),this.hashCode},com.cognitect.transit.types.TransitMap.prototype.com$cognitect$transit$equals=function(t){return com.cognitect.transit.types.mapEquals(this,t)},com.cognitect.transit.types.map=function(t,e,n){if(t=t||[],e=!1!==e||e,(!0!==n||!n)&&t.length<=2*com.cognitect.transit.types.ARRAY_MAP_THRESHOLD){if(e){var r=t;for(t=[],e=0;e<r.length;e+=2){var o=!1;for(n=0;n<t.length;n+=2)if(com.cognitect.transit.eq.equals(t[n],r[e])){t[n+1]=r[e+1],o=!0;break}o||(t.push(r[e]),t.push(r[e+1]))}}return new com.cognitect.transit.types.TransitArrayMap(t)}r={},o=[];var i=0;for(e=0;e<t.length;e+=2){var a=r[n=com.cognitect.transit.eq.hashCode(t[e])];if(null==a)o.push(n),r[n]=[t[e],t[e+1]],i++;else{var s=!0;for(n=0;n<a.length;n+=2)if(com.cognitect.transit.eq.equals(a[n],t[e])){a[n+1]=t[e+1],s=!1;break}s&&(a.push(t[e]),a.push(t[e+1]),i++)}}return new com.cognitect.transit.types.TransitMap(o,r,i)},com.cognitect.transit.types.isArrayMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap},com.cognitect.transit.types.isMap=function(t){return t instanceof com.cognitect.transit.types.TransitArrayMap||t instanceof com.cognitect.transit.types.TransitMap},com.cognitect.transit.types.TransitSet=function(t){this.map=t,this.size=t.size},com.cognitect.transit.types.TransitSet.prototype.toString=function(){return com.cognitect.transit.types.printSet(this)},com.cognitect.transit.types.TransitSet.prototype.inspect=function(){return this.toString()},com.cognitect.transit.types.TransitSet.prototype.add=function(t){this.map.set(t,t),this.size=this.map.size},com.cognitect.transit.types.TransitSet.prototype.add=com.cognitect.transit.types.TransitSet.prototype.add,com.cognitect.transit.types.TransitSet.prototype.clear=function(){this.map=new com.cognitect.transit.types.TransitMap,this.size=0},com.cognitect.transit.types.TransitSet.prototype.clear=com.cognitect.transit.types.TransitSet.prototype.clear,com.cognitect.transit.types.TransitSet.prototype.delete=function(t){return t=this.map.delete(t),this.size=this.map.size,t},com.cognitect.transit.types.TransitSet.prototype.entries=function(){return this.map.entries()},com.cognitect.transit.types.TransitSet.prototype.entries=com.cognitect.transit.types.TransitSet.prototype.entries,com.cognitect.transit.types.TransitSet.prototype.forEach=function(t,e){var n=this;this.map.forEach((function(e,r,o){t(r,n)}))},com.cognitect.transit.types.TransitSet.prototype.forEach=com.cognitect.transit.types.TransitSet.prototype.forEach,com.cognitect.transit.types.TransitSet.prototype.has=function(t){return this.map.has(t)},com.cognitect.transit.types.TransitSet.prototype.has=com.cognitect.transit.types.TransitSet.prototype.has,com.cognitect.transit.types.TransitSet.prototype.keys=function(){return this.map.keys()},com.cognitect.transit.types.TransitSet.prototype.keys=com.cognitect.transit.types.TransitSet.prototype.keys,com.cognitect.transit.types.TransitSet.prototype.keySet=function(){return this.map.keySet()},com.cognitect.transit.types.TransitSet.prototype.keySet=com.cognitect.transit.types.TransitSet.prototype.keySet,com.cognitect.transit.types.TransitSet.prototype.values=function(){return this.map.values()},com.cognitect.transit.types.TransitSet.prototype.values=com.cognitect.transit.types.TransitSet.prototype.values,com.cognitect.transit.types.TransitSet.prototype.clone=function(){var t=com.cognitect.transit.types.set();return this.forEach((function(e){t.add(e)})),t},com.cognitect.transit.types.TransitSet.prototype.clone=com.cognitect.transit.types.TransitSet.prototype.clone,com.cognitect.transit.types.TransitSet.prototype[com.cognitect.transit.types.ITERATOR]=function(){return this.values()},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$equals=function(t){return t instanceof com.cognitect.transit.types.TransitSet&&(this.size===t.size?com.cognitect.transit.eq.equals(this.map,t.map):void 0)},com.cognitect.transit.types.TransitSet.prototype.com$cognitect$transit$hashCode=function(t){return com.cognitect.transit.eq.hashCode(this.map)},com.cognitect.transit.types.set=function(t){t=t||[];for(var e={},n=[],r=0,o=0;o<t.length;o++){var i=e[a=com.cognitect.transit.eq.hashCode(t[o])];if(null==i)n.push(a),e[a]=[t[o],t[o]],r++;else{for(var a=!0,s=0;s<i.length;s+=2)if(com.cognitect.transit.eq.equals(i[s],t[o])){a=!1;break}a&&(i.push(t[o]),i.push(t[o]),r++)}}return new com.cognitect.transit.types.TransitSet(new com.cognitect.transit.types.TransitMap(n,e,r))},com.cognitect.transit.types.isSet=function(t){return t instanceof com.cognitect.transit.types.TransitSet},com.cognitect.transit.types.quoted=function(t){return com.cognitect.transit.types.taggedValue("'",t)},com.cognitect.transit.types.isQuoted=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"'"===t.tag},com.cognitect.transit.types.list=function(t){return com.cognitect.transit.types.taggedValue("list",t)},com.cognitect.transit.types.isList=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"list"===t.tag},com.cognitect.transit.types.link=function(t){return com.cognitect.transit.types.taggedValue("link",t)},com.cognitect.transit.types.isLink=function(t){return t instanceof com.cognitect.transit.types.TaggedValue&&"link"===t.tag},com.cognitect.transit.types.specialDouble=function(t){switch(t){case"-INF":return-1/0;case"INF":return 1/0;case"NaN":return NaN;default:throw Error("Invalid special double value "+t)}},com.cognitect.transit.handlers={},com.cognitect.transit.handlers.ctorGuid=0,com.cognitect.transit.handlers.ctorGuidProperty="transit$guid$"+com.cognitect.transit.util.randomUUID(),com.cognitect.transit.handlers.typeTag=function(t){if(null==t)return"null";if(t===String)return"string";if(t===Boolean)return"boolean";if(t===Number)return"number";if(t===Array)return"array";if(t===Object)return"map";var e=t[com.cognitect.transit.handlers.ctorGuidProperty];return null==e&&(void 0!==Object.defineProperty?(e=++com.cognitect.transit.handlers.ctorGuid,Object.defineProperty(t,com.cognitect.transit.handlers.ctorGuidProperty,{value:e,enumerable:!1})):t[com.cognitect.transit.handlers.ctorGuidProperty]=e=++com.cognitect.transit.handlers.ctorGuid),e},com.cognitect.transit.handlers.constructor=function(t){return null==t?null:t.constructor},com.cognitect.transit.handlers.padZeros=function(t,e){for(var n=t.toString(),r=n.length;r<e;r++)n="0"+n;return n},com.cognitect.transit.handlers.stringableKeys=function(t){t=com.cognitect.transit.util.objectKeys(t);for(var e=0;e<t.length;e++);return!0},com.cognitect.transit.handlers.NilHandler=function(){},com.cognitect.transit.handlers.NilHandler.prototype.tag=function(t){return"_"},com.cognitect.transit.handlers.NilHandler.prototype.rep=function(t){return null},com.cognitect.transit.handlers.NilHandler.prototype.stringRep=function(t){return"null"},com.cognitect.transit.handlers.StringHandler=function(){},com.cognitect.transit.handlers.StringHandler.prototype.tag=function(t){return"s"},com.cognitect.transit.handlers.StringHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.StringHandler.prototype.stringRep=function(t){return t},com.cognitect.transit.handlers.NumberHandler=function(){},com.cognitect.transit.handlers.NumberHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.NumberHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.NumberHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler=function(){},com.cognitect.transit.handlers.IntegerHandler.prototype.tag=function(t){return"i"},com.cognitect.transit.handlers.IntegerHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.IntegerHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.BooleanHandler=function(){},com.cognitect.transit.handlers.BooleanHandler.prototype.tag=function(t){return"?"},com.cognitect.transit.handlers.BooleanHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.BooleanHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.ArrayHandler=function(){},com.cognitect.transit.handlers.ArrayHandler.prototype.tag=function(t){return"array"},com.cognitect.transit.handlers.ArrayHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.ArrayHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.MapHandler=function(){},com.cognitect.transit.handlers.MapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.MapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.MapHandler.prototype.stringRep=function(t){return null},com.cognitect.transit.handlers.VerboseDateHandler=function(){},com.cognitect.transit.handlers.VerboseDateHandler.prototype.tag=function(t){return"t"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.rep=function(t){return t.getUTCFullYear()+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCMonth()+1,2)+"-"+com.cognitect.transit.handlers.padZeros(t.getUTCDate(),2)+"T"+com.cognitect.transit.handlers.padZeros(t.getUTCHours(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCMinutes(),2)+":"+com.cognitect.transit.handlers.padZeros(t.getUTCSeconds(),2)+"."+com.cognitect.transit.handlers.padZeros(t.getUTCMilliseconds(),3)+"Z"},com.cognitect.transit.handlers.VerboseDateHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.DateHandler=function(){},com.cognitect.transit.handlers.DateHandler.prototype.tag=function(t){return"m"},com.cognitect.transit.handlers.DateHandler.prototype.rep=function(t){return t.valueOf()},com.cognitect.transit.handlers.DateHandler.prototype.stringRep=function(t){return t.valueOf().toString()},com.cognitect.transit.handlers.DateHandler.prototype.getVerboseHandler=function(t){return new com.cognitect.transit.handlers.VerboseDateHandler},com.cognitect.transit.handlers.UUIDHandler=function(){},com.cognitect.transit.handlers.UUIDHandler.prototype.tag=function(t){return"u"},com.cognitect.transit.handlers.UUIDHandler.prototype.rep=function(t){return t.toString()},com.cognitect.transit.handlers.UUIDHandler.prototype.stringRep=function(t){return t.toString()},com.cognitect.transit.handlers.KeywordHandler=function(){},com.cognitect.transit.handlers.KeywordHandler.prototype.tag=function(t){return":"},com.cognitect.transit.handlers.KeywordHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.KeywordHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.SymbolHandler=function(){},com.cognitect.transit.handlers.SymbolHandler.prototype.tag=function(t){return"$"},com.cognitect.transit.handlers.SymbolHandler.prototype.rep=function(t){return t._name},com.cognitect.transit.handlers.SymbolHandler.prototype.stringRep=function(t,e){return e.rep(t)},com.cognitect.transit.handlers.TaggedHandler=function(){},com.cognitect.transit.handlers.TaggedHandler.prototype.tag=function(t){return t.tag},com.cognitect.transit.handlers.TaggedHandler.prototype.rep=function(t){return t.rep},com.cognitect.transit.handlers.TaggedHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitSetHandler=function(){},com.cognitect.transit.handlers.TransitSetHandler.prototype.tag=function(t){return"set"},com.cognitect.transit.handlers.TransitSetHandler.prototype.rep=function(t){var e=[];return t.forEach((function(t,n){e.push(t)})),com.cognitect.transit.types.taggedValue("array",e)},com.cognitect.transit.handlers.TransitSetHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitArrayMapHandler=function(){},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitArrayMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.TransitMapHandler=function(){},com.cognitect.transit.handlers.TransitMapHandler.prototype.tag=function(t){return"map"},com.cognitect.transit.handlers.TransitMapHandler.prototype.rep=function(t){return t},com.cognitect.transit.handlers.TransitMapHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.BufferHandler=function(){},com.cognitect.transit.handlers.BufferHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.BufferHandler.prototype.rep=function(t){return t.toString("base64")},com.cognitect.transit.handlers.BufferHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.Uint8ArrayHandler=function(){},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.tag=function(t){return"b"},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.rep=function(t){return com.cognitect.transit.util.Uint8ToBase64(t)},com.cognitect.transit.handlers.Uint8ArrayHandler.prototype.stringRep=function(t,e){return null},com.cognitect.transit.handlers.defaultHandlers=function(t){return t.set(null,new com.cognitect.transit.handlers.NilHandler),t.set(String,new com.cognitect.transit.handlers.StringHandler),t.set(Number,new com.cognitect.transit.handlers.NumberHandler),t.set(goog.math.Long,new com.cognitect.transit.handlers.IntegerHandler),t.set(Boolean,new com.cognitect.transit.handlers.BooleanHandler),t.set(Array,new com.cognitect.transit.handlers.ArrayHandler),t.set(Object,new com.cognitect.transit.handlers.MapHandler),t.set(Date,new com.cognitect.transit.handlers.DateHandler),t.set(com.cognitect.transit.types.UUID,new com.cognitect.transit.handlers.UUIDHandler),t.set(com.cognitect.transit.types.Keyword,new com.cognitect.transit.handlers.KeywordHandler),t.set(com.cognitect.transit.types.Symbol,new com.cognitect.transit.handlers.SymbolHandler),t.set(com.cognitect.transit.types.TaggedValue,new com.cognitect.transit.handlers.TaggedHandler),t.set(com.cognitect.transit.types.TransitSet,new com.cognitect.transit.handlers.TransitSetHandler),t.set(com.cognitect.transit.types.TransitArrayMap,new com.cognitect.transit.handlers.TransitArrayMapHandler),t.set(com.cognitect.transit.types.TransitMap,new com.cognitect.transit.handlers.TransitMapHandler),void 0!==goog.global.Buffer&&t.set(goog.global.Buffer,new com.cognitect.transit.handlers.BufferHandler),"undefined"!=typeof Uint8Array&&t.set(Uint8Array,new com.cognitect.transit.handlers.Uint8ArrayHandler),t},com.cognitect.transit.handlers.Handlers=function(){this.handlers={},com.cognitect.transit.handlers.defaultHandlers(this)},com.cognitect.transit.handlers.Handlers.prototype.get=function(t){return null!=(t="string"==typeof t?this.handlers[t]:this.handlers[com.cognitect.transit.handlers.typeTag(t)])?t:this.handlers.default},com.cognitect.transit.handlers.Handlers.prototype.get=com.cognitect.transit.handlers.Handlers.prototype.get,com.cognitect.transit.handlers.validTag=function(t){switch(t){case"null":case"string":case"boolean":case"number":case"array":case"map":return!1}return!0},com.cognitect.transit.handlers.Handlers.prototype.set=function(t,e){"string"==typeof t&&com.cognitect.transit.handlers.validTag(t)?this.handlers[t]=e:this.handlers[com.cognitect.transit.handlers.typeTag(t)]=e},com.cognitect.transit.impl={},com.cognitect.transit.impl.decoder={},com.cognitect.transit.impl.decoder.Tag=function(t){this.str=t},com.cognitect.transit.impl.decoder.tag=function(t){return new com.cognitect.transit.impl.decoder.Tag(t)},com.cognitect.transit.impl.decoder.isTag=function(t){return t&&t instanceof com.cognitect.transit.impl.decoder.Tag},com.cognitect.transit.impl.decoder.isGroundHandler=function(t){switch(t){case"_":case"s":case"?":case"i":case"d":case"b":case"'":case"array":case"map":return!0}return!1},com.cognitect.transit.impl.decoder.Decoder=function(t){for(var e in this.options=t||{},this.handlers={},this.defaults.handlers)this.handlers[e]=this.defaults.handlers[e];for(e in this.options.handlers){if(com.cognitect.transit.impl.decoder.isGroundHandler(e))throw Error('Cannot override handler for ground type "'+e+'"');this.handlers[e]=this.options.handlers[e]}this.preferStrings=null!=this.options.preferStrings?this.options.preferStrings:this.defaults.preferStrings,this.preferBuffers=null!=this.options.preferBuffers?this.options.preferBuffers:this.defaults.preferBuffers,this.defaultHandler=this.options.defaultHandler||this.defaults.defaultHandler,this.mapBuilder=this.options.mapBuilder,this.arrayBuilder=this.options.arrayBuilder},com.cognitect.transit.impl.decoder.Decoder.prototype.defaults={handlers:{_:function(t,e){return com.cognitect.transit.types.nullValue()},"?":function(t,e){return com.cognitect.transit.types.boolValue(t)},b:function(t,e){return com.cognitect.transit.types.binary(t,e)},i:function(t,e){return com.cognitect.transit.types.intValue(t)},n:function(t,e){return com.cognitect.transit.types.bigInteger(t)},d:function(t,e){return com.cognitect.transit.types.floatValue(t)},f:function(t,e){return com.cognitect.transit.types.bigDecimalValue(t)},c:function(t,e){return com.cognitect.transit.types.charValue(t)},":":function(t,e){return com.cognitect.transit.types.keyword(t)},$:function(t,e){return com.cognitect.transit.types.symbol(t)},r:function(t,e){return com.cognitect.transit.types.uri(t)},z:function(t,e){return com.cognitect.transit.types.specialDouble(t)},"'":function(t,e){return t},m:function(t,e){return com.cognitect.transit.types.date(t)},t:function(t,e){return com.cognitect.transit.types.verboseDate(t)},u:function(t,e){return com.cognitect.transit.types.uuid(t)},set:function(t,e){return com.cognitect.transit.types.set(t)},list:function(t,e){return com.cognitect.transit.types.list(t)},link:function(t,e){return com.cognitect.transit.types.link(t)},cmap:function(t,e){return com.cognitect.transit.types.map(t,!1)}},defaultHandler:function(t,e){return com.cognitect.transit.types.taggedValue(t,e)},preferStrings:!0,preferBuffers:!0},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=function(t,e,n,r){if(null==t)return null;switch(typeof t){case"string":return this.decodeString(t,e,n,r);case"object":return com.cognitect.transit.util.isArray(t)?"^ "===t[0]?this.decodeArrayHash(t,e,n,r):this.decodeArray(t,e,n,r):this.decodeHash(t,e,n,r)}return t},com.cognitect.transit.impl.decoder.Decoder.prototype.decode=com.cognitect.transit.impl.decoder.Decoder.prototype.decode,com.cognitect.transit.impl.decoder.Decoder.prototype.decodeString=function(t,e,n,r){return com.cognitect.transit.caching.isCacheable(t,n)?(t=this.parseString(t,e,!1),e&&e.write(t,n),t):com.cognitect.transit.caching.isCacheCode(t)?e.read(t,n):this.parseString(t,e,n)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeHash=function(t,e,n,r){var o=(n=com.cognitect.transit.util.objectKeys(t))[0];if(r=1==n.length?this.decode(o,e,!1,!1):null,com.cognitect.transit.impl.decoder.isTag(r))return t=t[o],null!=(n=this.handlers[r.str])?n(this.decode(t,e,!1,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(t,e,!1,!1));if(this.mapBuilder){if(n.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD&&this.mapBuilder.fromArray){var i=[];for(o=0;o<n.length;o++)r=n[o],i.push(this.decode(r,e,!0,!1)),i.push(this.decode(t[r],e,!1,!1));return this.mapBuilder.fromArray(i,t)}for(i=this.mapBuilder.init(t),o=0;o<n.length;o++)r=n[o],i=this.mapBuilder.add(i,this.decode(r,e,!0,!1),this.decode(t[r],e,!1,!1),t);return this.mapBuilder.finalize(i,t)}for(i=[],o=0;o<n.length;o++)r=n[o],i.push(this.decode(r,e,!0,!1)),i.push(this.decode(t[r],e,!1,!1));return com.cognitect.transit.types.map(i,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArrayHash=function(t,e,n,r){if(this.mapBuilder){if(t.length<2*com.cognitect.transit.types.SMALL_ARRAY_MAP_THRESHOLD+1&&this.mapBuilder.fromArray){for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return this.mapBuilder.fromArray(r,t)}for(r=this.mapBuilder.init(t),n=1;n<t.length;n+=2)r=this.mapBuilder.add(r,this.decode(t[n],e,!0,!1),this.decode(t[n+1],e,!1,!1),t);return this.mapBuilder.finalize(r,t)}for(r=[],n=1;n<t.length;n+=2)r.push(this.decode(t[n],e,!0,!1)),r.push(this.decode(t[n+1],e,!1,!1));return com.cognitect.transit.types.map(r,!1)},com.cognitect.transit.impl.decoder.Decoder.prototype.decodeArray=function(t,e,n,r){if(r){var o=[];for(r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return o}if(o=e&&e.idx,2===t.length&&"string"==typeof t[0]&&(r=this.decode(t[0],e,!1,!1),com.cognitect.transit.impl.decoder.isTag(r)))return o=t[1],null!=(t=this.handlers[r.str])?o=t(this.decode(o,e,n,!0),this):com.cognitect.transit.types.taggedValue(r.str,this.decode(o,e,n,!1));if(e&&o!=e.idx&&(e.idx=o),this.arrayBuilder){if(32>=t.length&&this.arrayBuilder.fromArray){for(o=[],r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return this.arrayBuilder.fromArray(o,t)}for(o=this.arrayBuilder.init(t),r=0;r<t.length;r++)o=this.arrayBuilder.add(o,this.decode(t[r],e,n,!1),t);return this.arrayBuilder.finalize(o,t)}for(o=[],r=0;r<t.length;r++)o.push(this.decode(t[r],e,n,!1));return o},com.cognitect.transit.impl.decoder.Decoder.prototype.parseString=function(t,e,n){return t.charAt(0)===com.cognitect.transit.delimiters.ESC?(e=t.charAt(1))===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?t.substring(1):e===com.cognitect.transit.delimiters.TAG?com.cognitect.transit.impl.decoder.tag(t.substring(2)):null==(n=this.handlers[e])?this.defaultHandler(e,t.substring(2)):n(t.substring(2),this):t},com.cognitect.transit.impl.decoder.decoder=function(t){return new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader={},com.cognitect.transit.impl.reader.JSONUnmarshaller=function(t){this.decoder=new com.cognitect.transit.impl.decoder.Decoder(t)},com.cognitect.transit.impl.reader.JSONUnmarshaller.prototype.unmarshal=function(t,e){return this.decoder.decode(JSON.parse(t),e)},com.cognitect.transit.impl.reader.Reader=function(t,e){this.unmarshaller=t,this.options=e||{},this.cache=this.options.cache?this.options.cache:new com.cognitect.transit.caching.ReadCache},com.cognitect.transit.impl.reader.Reader.prototype.read=function(t){return t=this.unmarshaller.unmarshal(t,this.cache),this.cache.clear(),t},com.cognitect.transit.impl.reader.Reader.prototype.read=com.cognitect.transit.impl.reader.Reader.prototype.read,com.cognitect.transit.impl.writer={},com.cognitect.transit.impl.writer.escape=function(t){if(0<t.length){var e=t.charAt(0);return e===com.cognitect.transit.delimiters.ESC||e===com.cognitect.transit.delimiters.SUB||e===com.cognitect.transit.delimiters.RES?com.cognitect.transit.delimiters.ESC+t:t}return t},com.cognitect.transit.impl.writer.JSONMarshaller=function(t){if(this.opts=t||{},this.preferStrings=null==this.opts.preferStrings||this.opts.preferStrings,this.objectBuilder=this.opts.objectBuilder||null,this.transform=this.opts.transform||null,this.handlers=new com.cognitect.transit.handlers.Handlers,t=this.opts.handlers){if(com.cognitect.transit.util.isArray(t)||!t.forEach)throw Error('transit writer "handlers" option must be a map');var e=this;t.forEach((function(t,n){if(void 0===n)throw Error("Cannot create handler for JavaScript undefined");e.handlers.set(n,t)}))}this.handlerForForeign=this.opts.handlerForForeign,this.unpack=this.opts.unpack||function(t){return!(!com.cognitect.transit.types.isArrayMap(t)||null!==t.backingMap)&&t._entries},this.verbose=this.opts&&this.opts.verbose||!1},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.handler=function(t){var e=this.handlers.get(com.cognitect.transit.handlers.constructor(t));return null!=e?e:(t=t&&t.transitTag)?this.handlers.get(t):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.registerHandler=function(t,e){this.handlers.set(t,e)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitNil=function(t,e){return t?this.emitString(com.cognitect.transit.delimiters.ESC,"_","",t,e):null},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitString=function(t,e,n,r,o){return t=t+e+n,o?o.write(t,r):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBoolean=function(t,e,n){return e?this.emitString(com.cognitect.transit.delimiters.ESC,"?",t.toString()[0],e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitInteger=function(t,e,n){return 1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","INF",e,n):-1/0===t?this.emitString(com.cognitect.transit.delimiters.ESC,"z","-INF",e,n):isNaN(t)?this.emitString(com.cognitect.transit.delimiters.ESC,"z","NaN",e,n):e||"string"==typeof t||t instanceof goog.math.Long?this.emitString(com.cognitect.transit.delimiters.ESC,"i",t.toString(),e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitDouble=function(t,e,n){return e?this.emitString(t.ESC,"d",t,e,n):t},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitBinary=function(t,e,n){return this.emitString(com.cognitect.transit.delimiters.ESC,"b",t,e,n)},com.cognitect.transit.impl.writer.JSONMarshaller.prototype.emitQuoted=function(t,e,n){return t.verbose?((t={})[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n)]=com.cognitect.transit.impl.writer.marshal(this,e,!1,n),t):[this.emitString(com.cognitect.transit.delimiters.ESC_TAG,"'","",!0,n),com.cognitect.transit.impl.writer.marshal(this,e,!1,n)]},com.cognitect.transit.impl.writer.emitObjects=function(t,e,n){var r=[];if(com.cognitect.transit.util.isArray(e))for(var o=0;o<e.length;o++)r.push(com.cognitect.transit.impl.writer.marshal(t,e[o],!1,n));else e.forEach((function(e,o){r.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,n))}));return r},com.cognitect.transit.impl.writer.emitArray=function(t,e,n,r){return com.cognitect.transit.impl.writer.emitObjects(t,e,r)},com.cognitect.transit.impl.writer.isStringableKey=function(t,e){if("string"!=typeof e){var n=t.handler(e);return n&&1===n.tag(e).length}return!0},com.cognitect.transit.impl.writer.stringableKeys=function(t,e){var n=t.unpack(e),r=!0;if(n){for(var o=0;o<n.length&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,n[o]));o+=2);return r}if(e.keys&&(o=null,(n=e.keys()).next)){for(o=n.next();!o.done&&(r=com.cognitect.transit.impl.writer.isStringableKey(t,o.value));)o=n.next();return r}if(e.forEach)return e.forEach((function(e,n){r=r&&com.cognitect.transit.impl.writer.isStringableKey(t,n)})),r;throw Error("Cannot walk keys of object type "+com.cognitect.transit.handlers.constructor(e).name)},com.cognitect.transit.impl.writer.isForeignObject=function(t){if(t.constructor.transit$isObject)return!0;var e="Object"==(e=(e=(e=t.constructor.toString()).substr(9)).substr(0,e.indexOf("(")));return void 0!==Object.defineProperty?Object.defineProperty(t.constructor,"transit$isObject",{value:e,enumerable:!1}):t.constructor.transit$isObject=e,e},com.cognitect.transit.impl.writer.emitMap=function(t,e,n,r){var o=null,i=null,a=null;if(o=null,n=0,e.constructor===Object||null!=e.forEach||t.handlerForForeign&&com.cognitect.transit.impl.writer.isForeignObject(e)){if(t.verbose){if(null!=e.forEach)if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){var s={};e.forEach((function(e,n){s[com.cognitect.transit.impl.writer.marshal(t,n,!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e,!1,r)}))}else{if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),o)for(;n<o.length;n+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){i.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,!1)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));(s={})[a]=i}else for(o=com.cognitect.transit.util.objectKeys(e),s={};n<o.length;n++)s[com.cognitect.transit.impl.writer.marshal(t,o[n],!0,!1)]=com.cognitect.transit.impl.writer.marshal(t,e[o[n]],!1,r);return s}if(null!=e.forEach){if(com.cognitect.transit.impl.writer.stringableKeys(t,e)){if(o=t.unpack(e),s=["^ "],o)for(;n<o.length;n+=2)s.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){s.push(com.cognitect.transit.impl.writer.marshal(t,n,!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));return s}if(o=t.unpack(e),i=[],a=t.emitString(com.cognitect.transit.delimiters.ESC_TAG,"cmap","",!0,r),o)for(;n<o.length;n+=2)i.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!1,r)),i.push(com.cognitect.transit.impl.writer.marshal(t,o[n+1],!1,r));else e.forEach((function(e,n){i.push(com.cognitect.transit.impl.writer.marshal(t,n,!1,r)),i.push(com.cognitect.transit.impl.writer.marshal(t,e,!1,r))}));return[a,i]}for(s=["^ "],o=com.cognitect.transit.util.objectKeys(e);n<o.length;n++)s.push(com.cognitect.transit.impl.writer.marshal(t,o[n],!0,r)),s.push(com.cognitect.transit.impl.writer.marshal(t,e[o[n]],!1,r));return s}if(null!=t.objectBuilder)return t.objectBuilder(e,(function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!0,r)}),(function(e){return com.cognitect.transit.impl.writer.marshal(t,e,!1,r)}));throw n=com.cognitect.transit.handlers.constructor(e).name,(o=Error("Cannot write "+n)).data={obj:e,type:n},o},com.cognitect.transit.impl.writer.emitTaggedMap=function(t,e,n,r,o){return t.verbose?((r={})[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o)]=com.cognitect.transit.impl.writer.marshal(t,n,!1,o),r):[t.emitString(com.cognitect.transit.delimiters.ESC_TAG,e,"",!0,o),com.cognitect.transit.impl.writer.marshal(t,n,!1,o)]},com.cognitect.transit.impl.writer.emitEncoded=function(t,e,n,r,o,i,a){if(1===n.length){if("string"==typeof r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,i,a);if(i||t.preferStrings){if((r=t.verbose&&e.getVerboseHandler())?(n=r.tag(o),r=r.stringRep(o,r)):r=e.stringRep(o,e),null!==r)return t.emitString(com.cognitect.transit.delimiters.ESC,n,r,i,a);throw(t=Error('Tag "'+n+'" cannot be encoded as string')).data={tag:n,rep:r,obj:o},t}}return com.cognitect.transit.impl.writer.emitTaggedMap(t,n,r,i,a)},com.cognitect.transit.impl.writer.marshal=function(t,e,n,r){null!==t.transform&&(e=t.transform(e));var o=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null),i=o?o.tag(e):null,a=o?o.rep(e):null;if(null==o||null==i)throw t=com.cognitect.transit.handlers.constructor(e).name,(n=Error("Cannot write "+t)).data={obj:e,type:t},n;switch(i){case"_":return t.emitNil(n,r);case"s":return t.emitString("","",com.cognitect.transit.impl.writer.escape(a),n,r);case"?":return t.emitBoolean(a,n,r);case"i":return t.emitInteger(a,n,r);case"d":return t.emitDouble(a,n,r);case"b":return t.emitBinary(a,n,r);case"'":return t.emitQuoted(t,a,r);case"array":return com.cognitect.transit.impl.writer.emitArray(t,a,n,r);case"map":return com.cognitect.transit.impl.writer.emitMap(t,a,n,r);default:return com.cognitect.transit.impl.writer.emitEncoded(t,o,i,a,e,n,r)}},com.cognitect.transit.impl.writer.maybeQuoted=function(t,e){if(null!=(n=t.handler(e)||(t.handlerForForeign?t.handlerForForeign(e,t.handlers):null)))return 1===n.tag(e).length?com.cognitect.transit.types.quoted(e):e;var n=com.cognitect.transit.handlers.constructor(e).name,r=Error("Cannot write "+n);throw r.data={obj:e,type:n},r},com.cognitect.transit.impl.writer.marshalTop=function(t,e,n,r){return JSON.stringify(com.cognitect.transit.impl.writer.marshal(t,com.cognitect.transit.impl.writer.maybeQuoted(t,e),n,r))},com.cognitect.transit.impl.writer.Writer=function(t,e){this._marshaller=t,this.options=e||{},this.cache=!1===this.options.cache?null:this.options.cache?this.options.cache:new com.cognitect.transit.caching.WriteCache},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=function(){return this._marshaller},com.cognitect.transit.impl.writer.Writer.prototype.marshaller=com.cognitect.transit.impl.writer.Writer.prototype.marshaller,com.cognitect.transit.impl.writer.Writer.prototype.write=function(t,e){var n=e||{},r=n.asMapKey||!1,o=!this._marshaller.verbose&&this.cache;return n=!1===n.marshalTop?com.cognitect.transit.impl.writer.marshal(this._marshaller,t,r,o):com.cognitect.transit.impl.writer.marshalTop(this._marshaller,t,r,o),null!=this.cache&&this.cache.clear(),n},com.cognitect.transit.impl.writer.Writer.prototype.write=com.cognitect.transit.impl.writer.Writer.prototype.write,com.cognitect.transit.impl.writer.Writer.prototype.register=function(t,e){this._marshaller.registerHandler(t,e)},com.cognitect.transit.impl.writer.Writer.prototype.register=com.cognitect.transit.impl.writer.Writer.prototype.register;var TRANSIT_DEV=!0,TRANSIT_NODE_TARGET=!0,TRANSIT_BROWSER_TARGET=!1,TRANSIT_BROWSER_AMD_TARGET=!1;com.cognitect.transit.reader=function(t,e){if("json"===t||"json-verbose"===t||null==t){var n=new com.cognitect.transit.impl.reader.JSONUnmarshaller(e);return new com.cognitect.transit.impl.reader.Reader(n,e)}throw Error("Cannot create reader of type "+t)},com.cognitect.transit.writer=function(t,e){if("json"===t||"json-verbose"===t||null==t){"json-verbose"===t&&(null==e&&(e={}),e.verbose=!0);var n=new com.cognitect.transit.impl.writer.JSONMarshaller(e);return new com.cognitect.transit.impl.writer.Writer(n,e)}throw(n=Error('Type must be "json"')).data={type:t},n},com.cognitect.transit.makeWriteHandler=function(t){var e=function(){};return e.prototype.tag=t.tag,e.prototype.rep=t.rep,e.prototype.stringRep=t.stringRep,e.prototype.getVerboseHandler=t.getVerboseHandler,new e},com.cognitect.transit.makeBuilder=function(t){var e=function(){};return e.prototype.init=t.init,e.prototype.add=t.add,e.prototype.finalize=t.finalize,e.prototype.fromArray=t.fromArray,new e},com.cognitect.transit.date=com.cognitect.transit.types.date,com.cognitect.transit.integer=com.cognitect.transit.types.intValue,com.cognitect.transit.isInteger=com.cognitect.transit.types.isInteger,com.cognitect.transit.uuid=com.cognitect.transit.types.uuid,com.cognitect.transit.isUUID=com.cognitect.transit.types.isUUID,com.cognitect.transit.bigInt=com.cognitect.transit.types.bigInteger,com.cognitect.transit.isBigInt=com.cognitect.transit.types.isBigInteger,com.cognitect.transit.bigDec=com.cognitect.transit.types.bigDecimalValue,com.cognitect.transit.isBigDec=com.cognitect.transit.types.isBigDecimal,com.cognitect.transit.keyword=com.cognitect.transit.types.keyword,com.cognitect.transit.isKeyword=com.cognitect.transit.types.isKeyword,com.cognitect.transit.symbol=com.cognitect.transit.types.symbol,com.cognitect.transit.isSymbol=com.cognitect.transit.types.isSymbol,com.cognitect.transit.binary=com.cognitect.transit.types.binary,com.cognitect.transit.isBinary=com.cognitect.transit.types.isBinary,com.cognitect.transit.uri=com.cognitect.transit.types.uri,com.cognitect.transit.isURI=com.cognitect.transit.types.isURI,com.cognitect.transit.map=com.cognitect.transit.types.map,com.cognitect.transit.isMap=com.cognitect.transit.types.isMap,com.cognitect.transit.set=com.cognitect.transit.types.set,com.cognitect.transit.isSet=com.cognitect.transit.types.isSet,com.cognitect.transit.list=com.cognitect.transit.types.list,com.cognitect.transit.isList=com.cognitect.transit.types.isList,com.cognitect.transit.quoted=com.cognitect.transit.types.quoted,com.cognitect.transit.isQuoted=com.cognitect.transit.types.isQuoted,com.cognitect.transit.tagged=com.cognitect.transit.types.taggedValue,com.cognitect.transit.isTaggedValue=com.cognitect.transit.types.isTaggedValue,com.cognitect.transit.link=com.cognitect.transit.types.link,com.cognitect.transit.isLink=com.cognitect.transit.types.isLink,com.cognitect.transit.hash=com.cognitect.transit.eq.hashCode,com.cognitect.transit.hashMapLike=com.cognitect.transit.eq.hashMapLike,com.cognitect.transit.hashArrayLike=com.cognitect.transit.eq.hashArrayLike,com.cognitect.transit.equals=com.cognitect.transit.eq.equals,com.cognitect.transit.extendToEQ=com.cognitect.transit.eq.extendToEQ,com.cognitect.transit.mapToObject=function(t){var e={};return t.forEach((function(t,n){if("string"!=typeof n)throw Error("Cannot convert map with non-string keys");e[n]=t})),e},com.cognitect.transit.objectToMap=function(t){var e,n=com.cognitect.transit.map();for(e in t)t.hasOwnProperty(e)&&n.set(e,t[e]);return n},com.cognitect.transit.decoder=com.cognitect.transit.impl.decoder.decoder,com.cognitect.transit.readCache=com.cognitect.transit.caching.readCache,com.cognitect.transit.writeCache=com.cognitect.transit.caching.writeCache,com.cognitect.transit.UUIDfromString=com.cognitect.transit.types.UUIDfromString,com.cognitect.transit.randomUUID=com.cognitect.transit.util.randomUUID,com.cognitect.transit.stringableKeys=com.cognitect.transit.impl.writer.stringableKeys,TRANSIT_BROWSER_TARGET&&(goog.exportSymbol("transit.reader",com.cognitect.transit.reader),goog.exportSymbol("transit.writer",com.cognitect.transit.writer),goog.exportSymbol("transit.makeBuilder",com.cognitect.transit.makeBuilder),goog.exportSymbol("transit.makeWriteHandler",com.cognitect.transit.makeWriteHandler),goog.exportSymbol("transit.date",com.cognitect.transit.types.date),goog.exportSymbol("transit.integer",com.cognitect.transit.types.intValue),goog.exportSymbol("transit.isInteger",com.cognitect.transit.types.isInteger),goog.exportSymbol("transit.uuid",com.cognitect.transit.types.uuid),goog.exportSymbol("transit.isUUID",com.cognitect.transit.types.isUUID),goog.exportSymbol("transit.bigInt",com.cognitect.transit.types.bigInteger),goog.exportSymbol("transit.isBigInt",com.cognitect.transit.types.isBigInteger),goog.exportSymbol("transit.bigDec",com.cognitect.transit.types.bigDecimalValue),goog.exportSymbol("transit.isBigDec",com.cognitect.transit.types.isBigDecimal),goog.exportSymbol("transit.keyword",com.cognitect.transit.types.keyword),goog.exportSymbol("transit.isKeyword",com.cognitect.transit.types.isKeyword),goog.exportSymbol("transit.symbol",com.cognitect.transit.types.symbol),goog.exportSymbol("transit.isSymbol",com.cognitect.transit.types.isSymbol),goog.exportSymbol("transit.binary",com.cognitect.transit.types.binary),goog.exportSymbol("transit.isBinary",com.cognitect.transit.types.isBinary),goog.exportSymbol("transit.uri",com.cognitect.transit.types.uri),goog.exportSymbol("transit.isURI",com.cognitect.transit.types.isURI),goog.exportSymbol("transit.map",com.cognitect.transit.types.map),goog.exportSymbol("transit.isMap",com.cognitect.transit.types.isMap),goog.exportSymbol("transit.set",com.cognitect.transit.types.set),goog.exportSymbol("transit.isSet",com.cognitect.transit.types.isSet),goog.exportSymbol("transit.list",com.cognitect.transit.types.list),goog.exportSymbol("transit.isList",com.cognitect.transit.types.isList),goog.exportSymbol("transit.quoted",com.cognitect.transit.types.quoted),goog.exportSymbol("transit.isQuoted",com.cognitect.transit.types.isQuoted),goog.exportSymbol("transit.tagged",com.cognitect.transit.types.taggedValue),goog.exportSymbol("transit.isTaggedValue",com.cognitect.transit.types.isTaggedValue),goog.exportSymbol("transit.link",com.cognitect.transit.types.link),goog.exportSymbol("transit.isLink",com.cognitect.transit.types.isLink),goog.exportSymbol("transit.hash",com.cognitect.transit.eq.hashCode),goog.exportSymbol("transit.hashMapLike",com.cognitect.transit.eq.hashMapLike),goog.exportSymbol("transit.hashArrayLike",com.cognitect.transit.eq.hashArrayLike),goog.exportSymbol("transit.equals",com.cognitect.transit.eq.equals),goog.exportSymbol("transit.extendToEQ",com.cognitect.transit.eq.extendToEQ),goog.exportSymbol("transit.mapToObject",com.cognitect.transit.mapToObject),goog.exportSymbol("transit.objectToMap",com.cognitect.transit.objectToMap),goog.exportSymbol("transit.decoder",com.cognitect.transit.impl.decoder.decoder),goog.exportSymbol("transit.UUIDfromString",com.cognitect.transit.types.UUIDfromString),goog.exportSymbol("transit.randomUUID",com.cognitect.transit.util.randomUUID),goog.exportSymbol("transit.stringableKeys",com.cognitect.transit.impl.writer.stringableKeys),goog.exportSymbol("transit.readCache",com.cognitect.transit.caching.readCache),goog.exportSymbol("transit.writeCache",com.cognitect.transit.caching.writeCache)),TRANSIT_NODE_TARGET&&(module.exports={reader:com.cognitect.transit.reader,writer:com.cognitect.transit.writer,makeBuilder:com.cognitect.transit.makeBuilder,makeWriteHandler:com.cognitect.transit.makeWriteHandler,date:com.cognitect.transit.types.date,integer:com.cognitect.transit.types.intValue,isInteger:com.cognitect.transit.types.isInteger,uuid:com.cognitect.transit.types.uuid,isUUID:com.cognitect.transit.types.isUUID,bigInt:com.cognitect.transit.types.bigInteger,isBigInt:com.cognitect.transit.types.isBigInteger,bigDec:com.cognitect.transit.types.bigDecimalValue,isBigDec:com.cognitect.transit.types.isBigDecimal,keyword:com.cognitect.transit.types.keyword,isKeyword:com.cognitect.transit.types.isKeyword,symbol:com.cognitect.transit.types.symbol,isSymbol:com.cognitect.transit.types.isSymbol,binary:com.cognitect.transit.types.binary,isBinary:com.cognitect.transit.types.isBinary,uri:com.cognitect.transit.types.uri,isURI:com.cognitect.transit.types.isURI,map:com.cognitect.transit.types.map,isMap:com.cognitect.transit.types.isMap,set:com.cognitect.transit.types.set,isSet:com.cognitect.transit.types.isSet,list:com.cognitect.transit.types.list,isList:com.cognitect.transit.types.isList,quoted:com.cognitect.transit.types.quoted,isQuoted:com.cognitect.transit.types.isQuoted,tagged:com.cognitect.transit.types.taggedValue,isTaggedValue:com.cognitect.transit.types.isTaggedValue,link:com.cognitect.transit.types.link,isLink:com.cognitect.transit.types.isLink,hash:com.cognitect.transit.eq.hashCode,hashArrayLike:com.cognitect.transit.eq.hashArrayLike,hashMapLike:com.cognitect.transit.eq.hashMapLike,equals:com.cognitect.transit.eq.equals,extendToEQ:com.cognitect.transit.eq.extendToEQ,mapToObject:com.cognitect.transit.mapToObject,objectToMap:com.cognitect.transit.objectToMap,decoder:com.cognitect.transit.impl.decoder.decoder,UUIDfromString:com.cognitect.transit.types.UUIDfromString,randomUUID:com.cognitect.transit.util.randomUUID,stringableKeys:com.cognitect.transit.impl.writer.stringableKeys,readCache:com.cognitect.transit.caching.readCache,writeCache:com.cognitect.transit.caching.writeCache})}).call(this,__webpack_require__(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/uuid/lib/bytesToUuid.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/bytesToUuid.js ***!
  \**********************************************/
/*! no static exports found */function(t,e){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=function(t,e){var r=e||0,o=n;return[o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],"-",o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]],o[t[r++]]].join("")}},"./node_modules/uuid/lib/rng-browser.js":
/*!**********************************************!*\
  !*** ./node_modules/uuid/lib/rng-browser.js ***!
  \**********************************************/
/*! no static exports found */function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}},"./node_modules/uuid/v4.js":
/*!*********************************!*\
  !*** ./node_modules/uuid/v4.js ***!
  \*********************************/
/*! no static exports found */function(t,e,n){var r=n(/*! ./lib/rng */"./node_modules/uuid/lib/rng-browser.js"),o=n(/*! ./lib/bytesToUuid */"./node_modules/uuid/lib/bytesToUuid.js");t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var a=(t=t||{}).random||(t.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[i+s]=a[s];return e||o(a)}},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! no static exports found */function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"./src/automerge.js":
/*!**************************!*\
  !*** ./src/automerge.js ***!
  \**************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(/*! transit-immutable-js */"./node_modules/transit-immutable-js/index.js"),i=n(/*! ./uuid */"./src/uuid.js"),a=n(/*! ../frontend */"./frontend/index.js"),s=n(/*! ../backend */"./backend/index.js"),c=n(/*! ./common */"./src/common.js").isObject;function u(t,e){var n=l(t),o=s.applyChanges(s.init(),e),i=r(o,2),c=i[0],u=(i[1],s.getPatch(c));return u.state=c,a.applyPatch(n,u)}function l(t){if("string"==typeof t)t={actorId:t};else if(void 0===t)t={};else if(!c(t))throw new TypeError("Unsupported options for init(): "+t);return a.init(Object.assign({backend:s},t))}function f(t,e,n){var o=a.change(t,e,n),i=r(o,2),s=i[0];return i[1],s}function h(t,e){var n=a.getBackendState(t),r=a.getBackendState(e);return s.getChanges(n,r)}t.exports={init:l,from:function(t,e){return f(l(e),{message:"Initialization",undoable:!1},(function(e){return Object.assign(e,t)}))},change:f,emptyChange:function(t,e){var n=a.emptyChange(t,e),o=r(n,2),i=o[0];return o[1],i},undo:function(t,e){var n=a.undo(t,e),o=r(n,2),i=o[0];return o[1],i},redo:function(t,e){var n=a.redo(t,e),o=r(n,2),i=o[0];return o[1],i},load:function(t,e){return u(e,o.fromJSON(t))},save:function(t){var e=a.getBackendState(t);return o.toJSON(e.getIn(["opSet","history"]))},merge:function(t,e){if(a.getActorId(t)===a.getActorId(e))throw new RangeError("Cannot merge an actor with itself");var n=a.getBackendState(t),o=a.getBackendState(e),i=s.merge(n,o),c=r(i,2),u=c[0],l=c[1];return 0===l.diffs.length?t:(l.state=u,a.applyPatch(t,l))},diff:function(t,e){var n=a.getBackendState(t),o=a.getBackendState(e),i=s.getChanges(n,o),c=s.applyChanges(n,i),u=r(c,2);return u[0],u[1].diffs},getChanges:h,getAllChanges:function(t){return h(l(),t)},applyChanges:function(t,e){var n=a.getBackendState(t),o=s.applyChanges(n,e),i=r(o,2),c=i[0],u=i[1];return u.state=c,a.applyPatch(t,u)},getMissingDeps:function(t){return s.getMissingDeps(a.getBackendState(t))},equals:function t(e,n){if(!c(e)||!c(n))return e===n;var r=Object.keys(e).sort(),o=Object.keys(n).sort();if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++){if(r[i]!==o[i])return!1;if(!t(e[r[i]],n[o[i]]))return!1}return!0},getHistory:function(t){var e=a.getBackendState(t),n=a.getActorId(t),r=e.getIn(["opSet","history"]);return r.map((function(t,e){return{get change(){return t.toJS()},get snapshot(){return u(n,r.slice(0,e+1))}}})).toArray()},uuid:i,Frontend:a,Backend:s,DocSet:n(/*! ./doc_set */"./src/doc_set.js"),WatchableDoc:n(/*! ./watchable_doc */"./src/watchable_doc.js"),Connection:n(/*! ./connection */"./src/connection.js")};for(var g=["canUndo","canRedo","getObjectId","getObjectById","getActorId","setActorId","getConflicts","Text","Table","Counter"],p=0;p<g.length;p++){var d=g[p];t.exports[d]=a[d]}},"./src/common.js":
/*!***********************!*\
  !*** ./src/common.js ***!
  \***********************/
/*! no static exports found */function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){return"object"===(void 0===t?"undefined":r(t))&&null!==t}t.exports={ROOT_ID:"00000000-0000-0000-0000-000000000000",isObject:o,copyObject:function(t){if(!o(t))return{};var e={},n=!0,r=!1,i=void 0;try{for(var a,s=Object.keys(t)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;e[c]=t[c]}}catch(t){r=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return e},lessOrEqual:function(t,e){return t.keySeq().concat(e.keySeq()).reduce((function(n,r){return n&&t.get(r,0)<=e.get(r,0)}),!0)},parseElemId:function(t){var e=/^(.*):(\d+)$/.exec(t||"");if(!e)throw new RangeError("Not a valid elemId: "+t);return{counter:parseInt(e[2]),actorId:e[1]}}}},"./src/connection.js":
/*!***************************!*\
  !*** ./src/connection.js ***!
  \***************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),i=o.Map,a=o.fromJS,s=n(/*! ./common */"./src/common.js").lessOrEqual,c=n(/*! ../frontend */"./frontend/index.js"),u=n(/*! ../backend */"./backend/index.js");function l(t,e,n){return n=t.get(e,i()).mergeWith((function(t,e){return Math.max(t,e)}),n),t.set(e,n)}var f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._docSet=e,this._sendMsg=n,this._theirClock=i(),this._ourClock=i(),this._docChangedHandler=this.docChanged.bind(this)}return r(t,[{key:"open",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,o=this._docSet.docIds[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;this.docChanged(i,this._docSet.getDoc(i))}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}this._docSet.registerHandler(this._docChangedHandler)}},{key:"close",value:function(){this._docSet.unregisterHandler(this._docChangedHandler)}},{key:"sendMsg",value:function(t,e,n){var r={docId:t,clock:e.toJS()};this._ourClock=l(this._ourClock,t,e),n&&(r.changes=n),this._sendMsg(r)}},{key:"maybeSendChanges",value:function(t){var e=this._docSet.getDoc(t),n=c.getBackendState(e),r=n.getIn(["opSet","clock"]);if(this._theirClock.has(t)){var o=u.getMissingChanges(n,this._theirClock.get(t));if(o.length>0)return this._theirClock=l(this._theirClock,t,r),void this.sendMsg(t,r,o)}r.equals(this._ourClock.get(t,i()))||this.sendMsg(t,r)}},{key:"docChanged",value:function(t,e){var n=c.getBackendState(e).getIn(["opSet","clock"]);if(!n)throw new TypeError("This object cannot be used for network sync. Are you trying to sync a snapshot from the history?");if(!s(this._ourClock.get(t,i()),n))throw new RangeError("Cannot pass an old state object to a connection");this.maybeSendChanges(t)}},{key:"receiveMsg",value:function(t){return t.clock&&(this._theirClock=l(this._theirClock,t.docId,a(t.clock))),t.changes?this._docSet.applyChanges(t.docId,a(t.changes)):(this._docSet.getDoc(t.docId)?this.maybeSendChanges(t.docId):this._ourClock.has(t.docId)||this.sendMsg(t.docId,i()),this._docSet.getDoc(t.docId))}}]),t}();t.exports=f},"./src/doc_set.js":
/*!************************!*\
  !*** ./src/doc_set.js ***!
  \************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js"),a=i.Map,s=i.Set,c=(n(/*! ./uuid */"./src/uuid.js"),n(/*! ../frontend */"./frontend/index.js")),u=n(/*! ../backend */"./backend/index.js"),l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.docs=a(),this.handlers=s()}return o(t,[{key:"getDoc",value:function(t){return this.docs.get(t)}},{key:"removeDoc",value:function(t){this.docs=this.docs.delete(t)}},{key:"setDoc",value:function(t,e){this.docs=this.docs.set(t,e),this.handlers.forEach((function(n){return n(t,e)}))}},{key:"applyChanges",value:function(t,e){var n=this.docs.get(t)||c.init({backend:u}),o=c.getBackendState(n),i=u.applyChanges(o,e),a=r(i,2),s=a[0],l=a[1];return l.state=s,n=c.applyPatch(n,l),this.setDoc(t,n),n}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}},{key:"docIds",get:function(){return this.docs.keys()}}]),t}();t.exports=l},"./src/uuid.js":
/*!*********************!*\
  !*** ./src/uuid.js ***!
  \*********************/
/*! no static exports found */function(t,e,n){"use strict";var r=n(/*! uuid/v4 */"./node_modules/uuid/v4.js"),o=r;function i(){return o()}i.setFactory=function(t){return o=t},i.reset=function(){return o=r},t.exports=i},"./src/watchable_doc.js":
/*!******************************!*\
  !*** ./src/watchable_doc.js ***!
  \******************************/
/*! no static exports found */function(t,e,n){"use strict";var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(/*! immutable */"./node_modules/immutable/dist/immutable.js").Set,a=n(/*! ../frontend */"./frontend/index.js"),s=n(/*! ../backend */"./backend/index.js"),c=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("doc argument is required");this.doc=e,this.handlers=i()}return o(t,[{key:"get",value:function(){return this.doc}},{key:"set",value:function(t){this.doc=t,this.handlers.forEach((function(e){return e(t)}))}},{key:"applyChanges",value:function(t){var e=a.getBackendState(this.doc),n=s.applyChanges(e,t),o=r(n,2),i=o[0],c=o[1];c.state=i;var u=a.applyPatch(this.doc,c);return this.set(u),u}},{key:"registerHandler",value:function(t){this.handlers=this.handlers.add(t)}},{key:"unregisterHandler",value:function(t){this.handlers=this.handlers.remove(t)}}]),t}();t.exports=c}})},module.exports=factory()},function(t,e,n){var r=n(2);n(7);var o=n(13);r.prototype._textures=null,r.prototype._alpha=1,r.prototype.render=function(t){if(this._visible){o.node++;var e=this.matrix();t.setTransform(e.a,e.b,e.c,e.d,e.e,e.f),this._alpha=this._pin._alpha*(this._parent?this._parent._alpha:1);var n=this._pin._textureAlpha*this._alpha;if(t.globalAlpha!=n&&(t.globalAlpha=n),null!==this._textures)for(var r=0,i=this._textures.length;r<i;r++)this._textures[r].draw(t);t.globalAlpha!=this._alpha&&(t.globalAlpha=this._alpha);for(var a,s=this._first;a=s;)s=a._next,a.render(t)}},r.prototype._tickBefore=null,r.prototype._tickAfter=null,r.prototype.MAX_ELAPSE=1/0,r.prototype._tick=function(t,e,n){if(this._visible){t>this.MAX_ELAPSE&&(t=this.MAX_ELAPSE);var r=!1;if(null!==this._tickBefore)for(var i=0;i<this._tickBefore.length;i++){o.tick++,r=!0===this._tickBefore[i].call(this,t,e,n)||r}for(var a,s=this._first;a=s;)s=a._next,a._flag("_tick")&&(r=!0===a._tick(t,e,n)||r);if(null!==this._tickAfter)for(i=0;i<this._tickAfter.length;i++){o.tick++,r=!0===this._tickAfter[i].call(this,t,e,n)||r}return r}},r.prototype.tick=function(t,e){"function"==typeof t&&(e?(null===this._tickBefore&&(this._tickBefore=[]),this._tickBefore.push(t)):(null===this._tickAfter&&(this._tickAfter=[]),this._tickAfter.push(t)),this._flag("_tick",null!==this._tickAfter&&this._tickAfter.length>0||null!==this._tickBefore&&this._tickBefore.length>0))},r.prototype.untick=function(t){var e;"function"==typeof t&&(null!==this._tickBefore&&(e=this._tickBefore.indexOf(t))>=0&&this._tickBefore.splice(e,1),null!==this._tickAfter&&(e=this._tickAfter.indexOf(t))>=0&&this._tickAfter.splice(e,1))},r.prototype.timeout=function(t,e){this.setTimeout(t,e)},r.prototype.setTimeout=function(t,e){function n(r){if(!((e-=r)<0))return!0;this.untick(n),t.call(this)}return this.tick(n),n},r.prototype.clearTimeout=function(t){this.untick(t)}},function(t,e,n){"use strict";function r(t,e){return Math.random()*(e-t)+t}function o(t){for(var e=[],n="0".charCodeAt(0),r="a".charCodeAt(0),o=0;o<t;o++){var i=Math.floor(16*Math.random());i<10?e.push(n+i):e.push(r+i-10)}return String.fromCharCode.apply(String,e)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var r=n(1),o=n.p+"8ec31040ddfdc510f7a75a92318195ae.wav",i=n.p+"ae30667cee8100552d5bb8da95b757db.wav",a=n.p+"a8ea40c741b3dcbb056c688b719b68ae.wav",s=n.p+"8ef5c0ed0d97605f16f743e953378f57.wav";e.a={crystalCapture:c(o),crystalSpawn:c(i),explosion:c(a),shootLaser:c(s)};function c(t){var e=document.createElement("audio");return e.src=t,(new r.a).on(e.play.bind(e))}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}},function(t,e){
/**
 * ! is the definitive JavaScript type testing library
 * 
 * @copyright 2013-2014 Enrico Marino / Jordan Harband
 * @license MIT
 */
var n=Object.prototype,r=n.hasOwnProperty,o=n.toString,i=/^[A-Fa-f0-9]+$/,a=t.exports={};a.a=a.an=a.type=function(t,e){return typeof t===e},a.defined=function(t){return void 0!==t},a.empty=function(t){var e,n=o.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(r.call(t,e))return!1;return!0}return!t},a.equal=function(t,e){if(t===e)return!0;var n,r=o.call(t);if(r!==o.call(e))return!1;if("[object Object]"===r){for(n in t)if(!a.equal(t[n],e[n])||!(n in e))return!1;for(n in e)if(!a.equal(t[n],e[n])||!(n in t))return!1;return!0}if("[object Array]"===r){if((n=t.length)!==e.length)return!1;for(;--n;)if(!a.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===r?t.prototype===e.prototype:"[object Date]"===r&&t.getTime()===e.getTime()},a.instance=function(t,e){return t instanceof e},a.nil=function(t){return null===t},a.undef=function(t){return void 0===t},a.array=function(t){return"[object Array]"===o.call(t)},a.emptyarray=function(t){return a.array(t)&&0===t.length},a.arraylike=function(t){return!!t&&!a.boolean(t)&&r.call(t,"length")&&isFinite(t.length)&&a.number(t.length)&&t.length>=0},a.boolean=function(t){return"[object Boolean]"===o.call(t)},a.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},a.fn=function(t){return"[object Function]"===o.call(t)},a.number=function(t){return"[object Number]"===o.call(t)},a.nan=function(t){return!a.number(t)||t!=t},a.object=function(t){return"[object Object]"===o.call(t)},a.hash=function(t){return a.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},a.regexp=function(t){return"[object RegExp]"===o.call(t)},a.string=function(t){return"[object String]"===o.call(t)},a.hex=function(t){return a.string(t)&&(!t.length||i.test(t))}},function(t,e,n){var r=n(13),o=n(17);function i(t,e){"object"==typeof t&&this.src(t,e)}i.prototype.pipe=function(){return new i(this)},i.prototype.src=function(t,e,n,r){if("object"==typeof t){var o=t,i=e||1;this._image=o,this._sx=this._dx=0,this._sy=this._dy=0,this._sw=this._dw=o.width/i,this._sh=this._dh=o.height/i,this.width=o.width/i,this.height=o.height/i,this.ratio=i}else void 0===n?(n=t,r=e):(this._sx=t,this._sy=e),this._sw=this._dw=n,this._sh=this._dh=r,this.width=n,this.height=r;return this},i.prototype.dest=function(t,e,n,r){return this._dx=t,this._dy=e,this._dx=t,this._dy=e,void 0!==n&&(this._dw=n,this._dh=r,this.width=n,this.height=r),this},i.prototype.draw=function(t,e,n,i,a,s,c,u,l){var f=this._image;if(null!==f&&"object"==typeof f){var h=this._sx,g=this._sy,p=this._sw,d=this._sh,y=this._dx,m=this._dy,v=this._dw,_=this._dh;void 0!==s?(e=o.limit(e,0,this._sw),i=o.limit(i,0,this._sw-e),h+=e,g+=n=o.limit(n,0,this._sh),p=i,d=a=o.limit(a,0,this._sh-n),y=s,m=c,v=u,_=l):void 0!==i?(y=e,m=n,v=i,_=a):void 0!==e&&(v=e,_=n);var b=this.ratio||1;h*=b,g*=b,p*=b,d*=b;try{"function"==typeof f.draw?f.draw(t,h,g,p,d,y,m,v,_):(r.draw++,t.drawImage(f,h,g,p,d,y,m,v,_))}catch(t){f._draw_failed||(console.log("Unable to draw: ",f),console.log(t),f._draw_failed=!0)}}},t.exports=i},function(t,e,n){var r=n(6),o=Math;t.exports=r(Math),t.exports.random=function(t,e){return void 0===t?(e=1,t=0):void 0===e&&(e=t,t=0),t==e?t:o.random()*(e-t)+t},t.exports.rotate=function(t,e,n){return void 0===e?(n=1,e=0):void 0===n&&(n=e,e=0),n>e?(t=(t-e)%(n-e))+(t<0?n:e):(t=(t-n)%(e-n))+(t<=0?e:n)},t.exports.limit=function(t,e,n){return t<e?e:t>n?n:t},t.exports.length=function(t,e){return o.sqrt(t*t+e*e)}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i}));var r="undefined"!=typeof performance?function(){return performance.now()}:function(){return Number(t.hrtime.bigint()/1000000n)},o=r();function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return r()-(o+t)}}).call(this,n(56))},function(t,e){function n(t,e,n,r,o,i){this.reset(t,e,n,r,o,i)}n.prototype.toString=function(){return"["+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.e+", "+this.f+"]"},n.prototype.clone=function(){return new n(this.a,this.b,this.c,this.d,this.e,this.f)},n.prototype.reset=function(t,e,n,r,o,i){return this._dirty=!0,"object"==typeof t?(this.a=t.a,this.d=t.d,this.b=t.b,this.c=t.c,this.e=t.e,this.f=t.f):(this.a=t||1,this.d=r||1,this.b=e||0,this.c=n||0,this.e=o||0,this.f=i||0),this},n.prototype.identity=function(){return this._dirty=!0,this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0,this},n.prototype.rotate=function(t){if(!t)return this;this._dirty=!0;var e=t?Math.cos(t):1,n=t?Math.sin(t):0,r=e*this.a-n*this.b,o=e*this.b+n*this.a,i=e*this.c-n*this.d,a=e*this.d+n*this.c,s=e*this.e-n*this.f,c=e*this.f+n*this.e;return this.a=r,this.b=o,this.c=i,this.d=a,this.e=s,this.f=c,this},n.prototype.translate=function(t,e){return t||e?(this._dirty=!0,this.e+=t,this.f+=e,this):this},n.prototype.scale=function(t,e){return t-1||e-1?(this._dirty=!0,this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this):this},n.prototype.skew=function(t,e){if(!t&&!e)return this;this._dirty=!0;var n=this.a+this.b*t,r=this.b+this.a*e,o=this.c+this.d*t,i=this.d+this.c*e,a=this.e+this.f*t,s=this.f+this.e*e;return this.a=n,this.b=r,this.c=o,this.d=i,this.e=a,this.f=s,this},n.prototype.concat=function(t){this._dirty=!0;var e=this,n=e.a*t.a+e.b*t.c,r=e.b*t.d+e.a*t.b,o=e.c*t.a+e.d*t.c,i=e.d*t.d+e.c*t.b,a=e.e*t.a+t.e+e.f*t.c,s=e.f*t.d+t.f+e.e*t.b;return this.a=n,this.b=r,this.c=o,this.d=i,this.e=a,this.f=s,this},n.prototype.inverse=n.prototype.reverse=function(){if(this._dirty){this._dirty=!1,this.inversed=this.inversed||new n;var t=this.a*this.d-this.b*this.c;this.inversed.a=this.d/t,this.inversed.b=-this.b/t,this.inversed.c=-this.c/t,this.inversed.d=this.a/t,this.inversed.e=(this.c*this.f-this.e*this.d)/t,this.inversed.f=(this.e*this.b-this.a*this.f)/t}return this.inversed},n.prototype.map=function(t,e){return(e=e||{}).x=this.a*t.x+this.c*t.y+this.e,e.y=this.b*t.x+this.d*t.y+this.f,e},n.prototype.mapX=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.a*t+this.c*e+this.e},n.prototype.mapY=function(t,e){return"object"==typeof t&&(e=t.y,t=t.x),this.b*t+this.d*e+this.f},t.exports=n},function(t,e,n){"use strict";(function(t){var r=n(21),o=n(22),i=n(23),a=n(24),s=n(25);e.a=[{image:r.a,textures:{shuttle:{x:0,y:0,width:52,height:52}}},{image:o.a,textures:{bullet:{x:0,y:0,width:15,height:30}}},{image:i.a,textures:{rock:{x:0,y:0,width:64,height:64}}},{image:a.a,textures:{explosion:[{x:0,y:0,width:52,height:52},{x:52,y:0,width:52,height:52},{x:104,y:0,width:52,height:52},{x:156,y:0,width:52,height:52},{x:208,y:0,width:52,height:52},{x:0,y:52,width:52,height:52},{x:52,y:52,width:52,height:52},{x:104,y:52,width:52,height:52},{x:156,y:52,width:52,height:52},{x:208,y:52,width:52,height:52},{x:0,y:104,width:52,height:52},{x:52,y:104,width:52,height:52}]}},{image:s.a,textures:{crystal:function(t,e,n,r){for(var o=[],i=0,a=0,s=0;s<t;s++){0!=a&&o.push({x:i,y:a,width:n,height:r}),i=0;for(var c=0;c<e-1;c++)o.push({x:i,y:a,width:n,height:r}),i+=n;a+=r}return o}(36,5,50,90)}},{textures:{text:function(e){return e+="",t.canvas((function(t){this.size(16,24,2),t.scale(2,2),t.font="bold 24px monospace",t.fillStyle="#ddd",t.textBaseline="top",t.fillText(e,0,1)}))}}}]}).call(this,n(5))},function(t,e,n){"use strict";e.a=n.p+"8ce71c1e3ef2fbaef4fa3370ca542da2.png"},function(t,e,n){"use strict";e.a=n.p+"8f3d31fe8e8b79ff83e39b0a044df97d.png"},function(t,e,n){"use strict";e.a=n.p+"b4a6029c0742bc5a3c361f43adc65118.png"},function(t,e,n){"use strict";e.a=n.p+"50cf1f6241ccd1ef539287eabff77433.png"},function(t,e,n){"use strict";e.a=n.p+"fddfb2abe8967582fb4ed6bb3694dec9.png"},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r=n(0),o=n(1),i=n(12),a=n(4),s=n(27),c=n(36),u=n(30),l=n(31),f=n(34),h=n(35);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function y(t,e){return!e||"object"!==g(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var b=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(S,e);var n,a,g,b,w=(n=S,function(){var t,e=v(n);if(m()){var r=v(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return y(this,t)});function S(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),w.call(this,t.create())}return a=S,(g=[{key:"append",value:function(t){t.prepend(this.node)}},{key:"start",value:function(t){var e=this;d(v(S.prototype),"start",this).call(this,t);var n=new s.a,a=new u.a,g=new f.a(r.a.initTimeLimit),p=new h.a(r.a.initBalance),y=new l.a(n.source),m=new o.a,_=new c.a(r.a.serverUrl);n.start(t),g.start(t),p.start(t),a.start(t),y.start(t),_.start(t),m.trigger(y.remove).trigger(p.showEndBalance).trigger(g.showTotalTime),g.expire.trigger(m),a.detect([y],_.rockMap).trigger(i.a.explosion).trigger(m),a.detect(_.rockMap,y.bulletSet).triggerLeft((function(t){return t.shoot})).triggerRight((function(t){return t.remove})),a.detect([y],_.crystalMap).trigger(g.extendTimer).trigger(p.bankCrystal).trigger(i.a.crystalCapture).triggerRight((function(t){return t.remove})),this.node.size(r.a.viewbox.width,r.a.viewbox.height),this.node.pin({align:.5}),t.background(r.a.backgroundColor),t.on("viewport",(function(n){return e.scaleScreen(t,n)}))}},{key:"scaleScreen",value:function(t,e){var n=this.node,r=n.width()/n.height(),o=e.width/e.height;t.size(e.width,e.height),r>o?n.pin({scaleWidth:e.width,scaleHeight:e.width/r}):n.pin({scaleWidth:e.height*r,scaleHeight:e.height})}}])&&p(a.prototype,g),b&&p(a,b),S}(a.a)}).call(this,n(5))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(0);function o(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function u(){return performance.now()}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.keyBindings,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.mouseBindings,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Input";a(this,t),this.keyBindings=e,this.mouseBindings=n,this.source=o,this.valueCache={},this.timeouts={},this.firstTouchId=null,this.secondTouchId=null}return c(t,[{key:"start",value:function(t){var e=this;document.onkeydown=function(n){return e.onKeyDown(t,n)},document.onkeyup=function(n){return e.onKeyUp(t,n)},document.onmouseout=function(n){return e.onMouseOut(t,n)},document.oncontextmenu=function(t){return!1},t.on("mousemove",(function(n){return e.onMouseMove(t,n)})),t.on("touchmove",(function(n){return e.onTouchMove(t,n)})),t.on("mousedown",(function(n){return e.onMouseStart(t,n)})),t.on("touchstart",(function(n){return e.onTouchStart(t,n)})),t.on(["mouseup","mousecancel"],(function(n){return e.onMouseEnd(t,n)})),t.on(["touchend","touchcancel"],(function(n){return e.onTouchEnd(t,n)}))}},{key:"setAction",value:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;if(e&&!n.equals(this.valueCache[e])){this.valueCache[e]=n;var i=r.a.actionIntervals[e];i?this.startInterval(t,e,i,o,n):t.publish("".concat(this.source,".action.").concat(e),[o(),n])}}},{key:"startInterval",value:function(t,e,n,r,o){this.timeouts[e]||(t.publish("".concat(this.source,".action.").concat(e),[r(),o]),this.delayNextPublish(t,e,n,r,o))}},{key:"delayNextPublish",value:function(t,e,n,r,o){var i=this;this.timeouts[e]=setTimeout((function(){i.timeouts[e]=void 0;var a=i.valueCache[e];a&&!a.equals(o)&&i.startInterval(t,e,n,r,a)}),n)}},{key:"clearAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;e&&this.valueCache[e]&&(this.valueCache[e]=void 0,t.publish("".concat(this.source,".action.").concat(e,".clear"),[n()]))}},{key:"onKeyDown",value:function(t,e){this.setAction(t,this.keyBindings[e.keyCode],new f)}},{key:"onKeyUp",value:function(t,e){this.clearAction(t,this.keyBindings[e.keyCode])}},{key:"onMouseMove",value:function(t,e){var n=e.x-t.width()/2,r=e.y-t.height()/2,o=new h(n,r);this.setAction(t,this.mouseBindings.move,o)}},{key:"onMouseOut",value:function(t,e){this.mouseMovePoint=null,this.clearAction(t,this.mouseBindings.move)}},{key:"onMouseStart",value:function(t,e){var n=e.raw.button;0===n?this.setAction(t,this.mouseBindings.click,new f):1===n?this.setAction(t,this.mouseBindings.middleClick,new f):2===n&&this.setAction(t,this.mouseBindings.rightClick,new f)}},{key:"onMouseEnd",value:function(t,e){var n=e.raw.button;0===n?this.clearAction(t,this.mouseBindings.click):1===n?this.clearAction(t,this.mouseBindings.middleClick):2===n&&this.clearAction(t,this.mouseBindings.rightClick)}},{key:"onTouchMove",value:function(t,e){this.isTouchChanged(e,this.firstTouchId)&&this.onMouseMove(t,e)}},{key:"onTouchStart",value:function(t,e){var n=e.raw.changedTouches,r=0;null===this.firstTouchId&&(this.firstTouchId=n[r++].identifier,this.onTouchMove(t,e)),null===this.secondTouchId&&n[r]&&(this.secondTouchId=n[r++].identifier,this.setAction(t,this.mouseBindings.click,new f))}},{key:"onTouchEnd",value:function(t,e){this.isTouchChanged(e,this.firstTouchId)&&(this.firstTouchId=null,this.clearAction(t,this.mouseBindings.move)),this.isTouchChanged(e,this.secondTouchId)&&(this.secondTouchId=null,this.clearAction(t,this.mouseBindings.click))}},{key:"isTouchChanged",value:function(t,e){if(e){var n,r=o(t.raw.changedTouches);try{for(r.s();!(n=r.n()).done;){if(n.value.identifier===e)return!0}}catch(t){r.e(t)}finally{r.f()}}return!1}}]),t}(),f=function(){function t(){a(this,t),this.active=!0}return c(t,[{key:"equals",value:function(e){return e instanceof t}}]),t}(),h=function(){function t(e,n){a(this,t),this.x=e,this.y=n}return c(t,[{key:"equals",value:function(t){return t&&this.x===t.x&&this.y===t.y}}]),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var r=n(0),o=n(11),i=n(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(y,e);var n,a,g,p,d=(n=y,function(){var t,e=f(n);if(l()){var r=f(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return u(this,t)});function y(e){var n,a=e.side,s=e.offsetX,c=e.offsetY,u=e.scale,l=e.velocityX,f=e.velocityY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var h=Object(o.b)(0,2*Math.PI),g=Object(o.b)(-r.a.rockSpinSpeed,r.a.rockSpinSpeed),p=t.image("rock");return(n=d.call(this,p,s,c,h,u,l,f,g)).side=a,n.shoot=new i.a,n}return a=y,(g=[{key:"start",value:function(t){var e=this;c(f(y.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)})),this.shoot.on((function(t){return e.ricochet(t,r.a.rockRicochet,0)}))}},{key:"onLeave",value:function(t){t!==this.side&&this.remove.emit()}}])&&s(a.prototype,g),p&&s(a,p),y}(n(8).a)}).call(this,n(5))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));n(0),n(11),n(12);function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=c(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(g,e);var n,r,l,f,h=(n=g,function(){var t,e=c(n);if(s()){var r=c(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return a(this,t)});function g(e){var n=e.offsetX,r=e.offsetY;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);var o=t.anim("crystal");return h.call(this,o,n,r)}return r=g,(l=[{key:"start",value:function(t){var e=this;i(c(g.prototype),"start",this).call(this,t),this.node.repeat(10,(function(){return e.remove.emit()})).fps(60)}}])&&o(r.prototype,l),f&&o(r,f),g}(n(8).a)}).call(this,n(5))},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));n(3);function r(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function u(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(r,t);var e,n=(e=r,function(){var t,n=f(e);if(l()){var r=f(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return u(this,t)});function r(t,e){var o;return a(this,r),(o=n.call(this)).leftSet=t,o.rightSet=e,o}return c(r,[{key:"triggerLeft",value:function(t){return this.on((function(e,n){return t(e).emit(n)}))}},{key:"triggerRight",value:function(t){return this.on((function(e,n){return t(n).emit(e)}))}}]),r}(n(1).a),p=function(){function t(){a(this,t),this.groups=[]}return c(t,[{key:"detect",value:function(t,e){var n=new g(t,e);return this.groups.push(n),n}},{key:"start",value:function(t){var e=this;t.tick((function(n){return e.tick(n,t)}))}},{key:"tick",value:function(t,e){var n,o=r(this.groups);try{for(o.s();!(n=o.n()).done;){var i,a=n.value,s=r(a.leftSet.values());try{for(s.s();!(i=s.n()).done;){var c,u=i.value,l=r(a.rightSet.values());try{for(l.s();!(c=l.n()).done;){var f=c.value;u!==f&&u.touching(f)&&a.emit(u,f)}}catch(t){l.e(t)}finally{l.f()}}}catch(t){s.e(t)}finally{s.f()}}}catch(t){o.e(t)}finally{o.f()}}}]),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return w}));var r=n(0),o=n(3),i=n(12),a=n(32),s=n(33),c=n(8),u=n(4);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function g(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function d(t){return function(){var e,n=v(t);if(m()){var r=v(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return y(this,e)}}function y(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var w=function(e){_(c,e);var n=d(c);function c(e){var r;return f(this,c),(r=n.call(this,t.image("shuttle"))).bulletSet=new Set,r.reloading=!1,r.actions=new a.a(r.node,e,["fire","focus","turnLeft","turnRight","accelerate"]),r}return g(c,[{key:"start",value:function(t){var e=this;p(v(c.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)})),this.actions.start(t),this.actions.on("fire",(function(n){return e.fireBullet(t,n)})),this.actions.on("turnLeft",(function(){return e.turnLeft()})),this.actions.onClear("turnLeft",(function(){return e.turnRight()})),this.actions.on("turnRight",(function(){return e.turnRight()})),this.actions.onClear("turnRight",(function(){return e.turnLeft()})),this.remove.on((function(){return e.explode(t)}))}},{key:"tick",value:function(t,e){if(p(v(c.prototype),"tick",this).call(this,t,e),this.actions.focus&&0===this.spin){var n=this.getFocusAngle(this.actions.focus),i=o.e(this.rotation,n);this.rotateBy(i*r.a.shuttleRotation,t)}this.actions.accelerate&&this.accelerate(this.rotation,r.a.shuttleAcceleration,r.a.shuttleMaxVelocity,t)}},{key:"explode",value:function(t){new S(this.offsetX,this.offsetY).start(t)}},{key:"turnLeft",value:function(){this.spin-=r.a.shuttleRotation}},{key:"turnRight",value:function(){this.spin+=r.a.shuttleRotation}},{key:"getFocusAngle",value:function(t){return o.a(this.offsetX,this.offsetY,t.x,t.y)}},{key:"fireBullet",value:function(t,e){var n=this,r=new s.a(this.offsetX,this.offsetY,this.rotation,this.velocityX,this.velocityY);this.bulletSet.add(r),r.remove.on((function(){return n.bulletSet.delete(r)})),this.visible&&r.start(t),i.a.shootLaser.emit()}},{key:"onLeave",value:function(t){"top"===t||"bottom"===t?this.moveTo(this.offsetX,-this.offsetY):"left"!==t&&"right"!==t||this.moveTo(-this.offsetX,this.offsetY)}}]),c}(c.a),S=function(e){_(r,e);var n=d(r);function r(e,o){f(this,r);var i=t.anim("explosion");return n.call(this,i,e,o)}return g(r,[{key:"start",value:function(t){var e=this;p(v(r.prototype),"start",this).call(this,t),this.node.repeat(1,(function(){return e.remove.emit()}))}}]),r}(u.a)}).call(this,n(5))},function(t,e,n){"use strict";function r(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return a}));var a=function(){function t(e,n,o){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.node=e,this.source=n,this.actions=o,this.times={},this.values={};var a,s=r(o);try{var c=function(){var t=a.value;i.hasOwnProperty(t)||Object.defineProperty(i,t,{get:function(){return i.get(t)}})};for(s.s();!(a=s.n()).done;)c()}catch(t){s.e(t)}finally{s.f()}}var e,n,o;return e=t,(n=[{key:"start",value:function(t){var e,n=this,o=r(this.actions);try{var i=function(){var r=e.value;t.on("".concat(n.source,".action.").concat(r),(function(t,e){n.node.publish("action.".concat(r),[t,e]),n.times[r]=t,n.values[r]=e})),t.on("".concat(n.source,".action.").concat(r,".clear"),(function(t){n.node.publish("action.".concat(r,".clear"),[t]),n.times[r]=t,n.values[r]=void 0}))};for(o.s();!(e=o.n()).done;)i()}catch(t){o.e(t)}finally{o.f()}}},{key:"get",value:function(t){return this.values[t]}},{key:"getTime",value:function(t){return this.times[t]}},{key:"on",value:function(t,e){this.node.on("action.".concat(t),e)}},{key:"onClear",value:function(t,e){this.node.on("action.".concat(t,".clear"),e)}}])&&i(e.prototype,n),o&&i(e,o),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=n(0),o=n(3);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function c(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(d,e);var n,i,h,g,p=(n=d,function(){var t,e=l(n);if(u()){var r=l(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return c(this,t)});function d(e,n,i,a,s){var c;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var u=a+o.c(i,r.a.bulletVelocity),l=s+o.d(i,r.a.bulletVelocity),f=t.image("bullet");return(c=p.call(this,f,e,n,i,void 0,u,l)).expires=performance.now()+r.a.bulletDecay,c}return i=d,(h=[{key:"start",value:function(t){var e=this;s(l(d.prototype),"start",this).call(this,t),this.leave.on((function(t){return e.onLeave(t)}))}},{key:"tick",value:function(t,e){s(l(d.prototype),"tick",this).call(this,t,e),performance.now()>=this.expires&&this.remove.emit()}},{key:"onLeave",value:function(t){"top"===t||"bottom"===t?this.moveTo(this.offsetX,-this.offsetY):"left"!==t&&"right"!==t||this.moveTo(-this.offsetX,this.offsetY)}}])&&a(i.prototype,h),g&&a(i,g),d}(n(8).a)}).call(this,n(5))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(d,e);var n,o,a,g,p=(n=d,function(){var t,e=f(n);if(l()){var r=f(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return u(this,t)});function d(e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),(n=p.call(this,t.string("text"))).timeLimit=e,n.expire=new r.a,n.extendTimer=new r.a,n.showTotalTime=new r.a,n}return o=d,(a=[{key:"append",value:function(t){t.append(this.node)}},{key:"start",value:function(t){var e=this;c(f(d.prototype),"start",this).call(this,t),this.node.pin({alignY:.92}),this.setCountDownTimer(60*this.timeLimit),this.startCountDownTimer(t),this.extendTimer.on((function(){return e.addTime()}));var n=performance.now();this.showTotalTime.on((function(){return e.getTotalTime(n)}))}},{key:"getTotalTime",value:function(t){var e=(performance.now()-t)/1e3,n=Math.floor(e/60),r=Math.trunc(e%60),o="".concat(r).padStart(2,"0");this.displayTotalTime(n,o)}},{key:"displayTotalTime",value:function(t,e){this.node.value("round time:  ".concat(t,":").concat(e)),clearInterval(this.intervalID),this.node.pin({alignY:.55})}},{key:"startCountDownTimer",value:function(t){var e;this.intervalID=setInterval((e=this,function(){e.updateCountDownTimer(t)}),1e3)}},{key:"updateCountDownTimer",value:function(t){var e=this.getCurrentTime();e-1==0?(this.expire.emit(),clearInterval(this.intervalID)):this.setCountDownTimer(e-1)}},{key:"getCurrentTime",value:function(){var t=i(this.node.value().split(":"),2),e=t[0],n=t[1];return e=parseInt(e),n=parseInt(n),n+=60*e}},{key:"setCountDownTimer",value:function(t){var e=Math.floor(t/60),n="".concat(t%60).padStart(2,"0");this.node.value("".concat(e,":").concat(n))}},{key:"addTime",value:function(){var t=this.getCurrentTime();this.setCountDownTimer(t+5)}}])&&s(o.prototype,a),g&&s(o,g),d}(n(4).a)}).call(this,n(5))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));var r=n(1);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(p,e);var n,o,f,h,g=(n=p,function(){var t,e=u(n);if(c()){var r=u(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return s(this,t)});function p(e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(n=g.call(this,t.string("text"))).balance=e,n.bankCrystal=new r.a,n.showEndBalance=new r.a,n}return o=p,(f=[{key:"append",value:function(t){t.append(this.node)}},{key:"start",value:function(t){var e=this;a(u(p.prototype),"start",this).call(this,t),this.node.pin({alignY:.95}),this.bankCrystal.on((function(){return e.updateBalance()})),this.showEndBalance.on((function(){return e.displayEndBalance()}))}},{key:"updateBalance",value:function(){this.node.value("crystal:  ".concat(this.balance+=1))}},{key:"displayEndBalance",value:function(){this.node.value("crystals collected: ".concat(this.balance)),this.node.pin({alignY:.45})}}])&&i(o.prototype,f),h&&i(o,h),p}(n(4).a)}).call(this,n(5))},function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var r=n(18),o=n(9),i=n.n(o),a=n(1);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){var n=e.when,o=void 0===n?Object(r.a)():n,i=e.changes;s(this,t),this.when=o,this.changes=i}var e,n,o;return e=t,o=[{key:"fromJSON",value:function(e){return new t(JSON.parse(e))}}],(n=null)&&c(e.prototype,n),o&&c(e,o),t}(),l=function t(){s(this,t),this.send=new a.a,this.recv=new a.a,this.close=new a.a,Object.freeze(this)};function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.doc=this.initial=i.a.init(),this.changed=new a.a,this.updated=new a.a}var e,n,r;return e=t,(n=[{key:"initialize",value:function(){this.doc=i.a.change(this.doc,(function(t){t.rocks=new i.a.Table}))}},{key:"sync",value:function(t){var e=this,n=this.initial;this.changed.until(t.close,(function(){var r=i.a.getChanges(n,e.doc);n=e.doc,r.length>0&&t.send.emit(new u({changes:r}))})),t.recv.on((function(t){if(t.changes){var n=i.a.applyChanges(e.doc,t.changes);e.doc=n,e.updated.emit(t.when,n)}})),this.changed.emit()}},{key:"change",value:function(t){var e=this.doc,n=i.a.change(e,t);this.doc=n,this.changed.emit()}},{key:"remove",value:function(t,e){this.change((function(n){try{t(n).remove(e)}catch(t){}}))}}])&&f(e.prototype,n),r&&f(e,r),t}(),g=n(11),p=new URLSearchParams(window.location.search),d=p.get("game");d||(p.append("game",Object(g.a)(5)),window.location.search=p.toString());var y=d,m=n(28),v=n(29);function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.doc=new h,this.rockMap=new Map,this.crystalMap=new Map}var e,n,r;return e=t,(n=[{key:"updateRocks",value:function(t,e,n){var r=this;n.rows.forEach((function(n){if(!r.rockMap.get(n.id)){var o=new m.a(n),i=e-n.when;r.rockMap.set(n.id,o),o.leave.on((function(){return r.rockMap.delete(n.id)})).on((function(){return r.doc.remove((function(t){return t.rocks}),n.id)})),o.start(t),o.tick(i,t)}}))}},{key:"updateCrystals",value:function(t,e,n){var r=this;n.rows.forEach((function(n){if(!r.crystalMap.get(n.id)){var o=new v.a(n),i=e-n.when;r.crystalMap.set(n.id,o),o.leave.on((function(){return r.crystalMap.delete(n.id)})).on((function(){return r.doc.remove((function(t){return t.crystals}),n.id)})),o.start(t),o.tick(i,t)}}))}},{key:"start",value:function(t){var e=this,n=new WebSocket("".concat(this.url,"?game=").concat(y)),r=new l;r.send.on((function(t){return n.send(JSON.stringify(t))})),n.onmessage=function(t){return r.recv.emit(JSON.parse(t.data))},n.onclose=function(){return r.close.emit()},n.onopen=function(){return e.doc.sync(r)},this.doc.updated.on((function(n,r){return e.updateRocks(t,n,r.rocks)})),this.doc.updated.on((function(n,r){return e.updateCrystals(t,n,r.crystals)}))}}])&&_(e.prototype,n),r&&_(e,r),t}()},function(t,e,n){"use strict";n.r(e),function(t){var e=n(20),r=n(26);e.a.forEach((function(e){return t(e)})),t((function(t){return(new r.a).start(t)}))}.call(this,n(5))},function(t,e,n){t.exports=n(2),t.exports.Matrix=n(19),t.exports.Texture=n(16),n(40),n(42),n(43),n(7),n(10),n(45)},function(t,e){t.exports=function(){var t=0;function e(e,n){return t+=n="number"==typeof n&&n>=1?n:1,function(){e&&e.apply(this,arguments),n>0&&(n--,t--,r())}}var n=[];function r(){if(0===t)for(;n.length;)setTimeout(n.shift(),0)}return e.then=function(e){0===t?setTimeout(e,0):n.push(e)},e}},function(t,e,n){"undefined"==typeof DEBUG&&(DEBUG=!0);var r=n(2),o=n(16),i=n(14),a=n(6),s=n(15),c=n(41),u={},l=[];function f(t){f._super.call(this);var e=this;d(t,"filter"),d(t,"cutouts"),d(t,"sprites"),d(t,"factory");var n=t.map||t.filter,r=t.ppu||t.ratio||1,o=t.trim||0,a=t.textures,u=t.factory,l=t.cutouts||t.sprites;function h(t){if(!t||s.fn(t.draw))return t;t=i({},t),s.fn(n)&&(t=n(t)),1!=r&&(t.x*=r,t.y*=r,t.width*=r,t.height*=r,t.top*=r,t.bottom*=r,t.left*=r,t.right*=r),0!=o&&(t.x+=o,t.y+=o,t.width-=2*o,t.height-=2*o,t.top-=o,t.bottom-=o,t.left-=o,t.right-=o);var a=e.pipe();return a.top=t.top,a.bottom=t.bottom,a.left=t.left,a.right=t.right,a.src(t.x,t.y,t.width,t.height),a}function g(t){if(a){if(s.fn(a))return a(t);if(s.hash(a))return a[t]}if(l){for(var e=null,n=0,r=0;r<l.length;r++)c.startsWith(l[r].name,t)&&(0===n?e=l[r]:1===n?e=[e,l[r]]:e.push(l[r]),n++);return 0===n&&s.fn(u)&&(e=function(e){return u(t+(e||""))}),e}}this.select=function(t){if(!t)return new p(this.pipe());var e=g(t);return e?new p(e,g,h):void 0}}r.atlas=function(t){var e=s.fn(t.draw)?t:new f(t);t.name&&(u[t.name]=e),l.push(e),d(t,"imagePath"),d(t,"imageRatio");var n=t.imagePath,o=t.imageRatio||1;return s.string(t.image)?n=t.image:s.hash(t.image)&&(n=t.image.src||t.image.url,o=t.image.ratio||o),n&&r.preload((function(t){n=r.resolve(n),DEBUG&&console.log("Loading atlas: "+n),r.config("image-loader")(n,(function(r){DEBUG&&console.log("Image loaded: "+n),e.src(r,o),t()}),(function(e){DEBUG&&console.log("Error loading atlas: "+n,e),t()}))})),e},f._super=o,f.prototype=a(f._super.prototype);var h=new o;h.x=h.y=h.width=h.height=0,h.pipe=h.src=h.dest=function(){return this},h.draw=function(){};var g=new p(h);function p(t,e,n){function r(t,o){return t?s.fn(t.draw)?t:s.hash(t)&&s.number(t.width)&&s.number(t.height)&&s.fn(n)?n(t):s.hash(t)&&s.defined(o)?r(t[o]):s.fn(t)?r(t(o)):s.array(t)?r(t[0]):s.string(t)&&s.fn(e)?r(e(t)):void 0:h}this.one=function(e){return r(t,e)},this.array=function(e){var n=s.array(e)?e:[];if(s.array(t))for(var o=0;o<t.length;o++)n[o]=r(t[o]);else n[0]=r(t);return n}}function d(t,e,n){e in t&&console.log(n?n.replace("%name",e):"'"+e+"' field of texture atlas is deprecated.")}r.texture=function(t){if(!s.string(t))return new p(t);var e,n,r=null;for((n=t.indexOf(":"))>0&&t.length>n+1&&(r=(e=u[t.slice(0,n)])&&e.select(t.slice(n+1))),!r&&(e=u[t])&&(r=e.select()),n=0;!r&&n<l.length;n++)r=l[n].select(t);return r||(console.error("Texture not found: "+t),r=g),r},t.exports=f},function(t,e){t.exports.startsWith=function(t,e){return"string"==typeof t&&"string"==typeof e&&t.substring(0,e.length)==e}},function(t,e,n){var r=n(2),o=n(15),i=0;function a(t,e){l(e),l(t),e.remove(),t._last&&(t._last._next=e,e._prev=t._last),e._parent=t,t._last=e,t._first||(t._first=e),e._parent._flag(e,!0),e._ts_parent=++i,t._ts_children=++i,t.touch()}function s(t,e){l(e),l(t),e.remove(),t._first&&(t._first._prev=e,e._next=t._first),e._parent=t,t._first=e,t._last||(t._last=e),e._parent._flag(e,!0),e._ts_parent=++i,t._ts_children=++i,t.touch()}function c(t,e){l(t),l(e),t.remove();var n=e._parent,r=e._prev;e._prev=t,r&&(r._next=t)||n&&(n._first=t),t._parent=n,t._prev=r,t._next=e,t._parent._flag(t,!0),t._ts_parent=++i,t.touch()}function u(t,e){l(t),l(e),t.remove();var n=e._parent,r=e._next;e._next=t,r&&(r._prev=t)||n&&(n._last=t),t._parent=n,t._prev=e,t._next=r,t._parent._flag(t,!0),t._ts_parent=++i,t.touch()}function l(t){if(t&&t instanceof r)return t;throw"Invalid node: "+t}r.prototype._label="",r.prototype._visible=!0,r.prototype._parent=null,r.prototype._next=null,r.prototype._prev=null,r.prototype._first=null,r.prototype._last=null,r.prototype._attrs=null,r.prototype._flags=null,r.prototype.toString=function(){return"["+this._label+"]"},r.prototype.id=function(t){return this.label(t)},r.prototype.label=function(t){return void 0===t?this._label:(this._label=t,this)},r.prototype.attr=function(t,e){return void 0===e?null!==this._attrs?this._attrs[t]:void 0:((null!==this._attrs?this._attrs:this._attrs={})[t]=e,this)},r.prototype.visible=function(t){return void 0===t?this._visible:(this._visible=t,this._parent&&(this._parent._ts_children=++i),this._ts_pin=++i,this.touch(),this)},r.prototype.hide=function(){return this.visible(!1)},r.prototype.show=function(){return this.visible(!0)},r.prototype.parent=function(){return this._parent},r.prototype.next=function(t){for(var e=this._next;e&&t&&!e._visible;)e=e._next;return e},r.prototype.prev=function(t){for(var e=this._prev;e&&t&&!e._visible;)e=e._prev;return e},r.prototype.first=function(t){for(var e=this._first;e&&t&&!e._visible;)e=e._next;return e},r.prototype.last=function(t){for(var e=this._last;e&&t&&!e._visible;)e=e._prev;return e},r.prototype.visit=function(t,e){var n=t.reverse,r=t.visible;if(!t.start||!t.start(this,e)){for(var o,i=n?this.last(r):this.first(r);o=i;)if(i=n?o.prev(r):o.next(r),o.visit(t,e))return!0;return t.end&&t.end(this,e)}},r.prototype.append=function(t,e){if(o.array(t))for(var n=0;n<t.length;n++)a(this,t[n]);else if(void 0!==e)for(n=0;n<arguments.length;n++)a(this,arguments[n]);else void 0!==t&&a(this,t);return this},r.prototype.prepend=function(t,e){if(o.array(t))for(var n=t.length-1;n>=0;n--)s(this,t[n]);else if(void 0!==e)for(n=arguments.length-1;n>=0;n--)s(this,arguments[n]);else void 0!==t&&s(this,t);return this},r.prototype.appendTo=function(t){return a(t,this),this},r.prototype.prependTo=function(t){return s(t,this),this},r.prototype.insertNext=function(t,e){if(o.array(t))for(var n=0;n<t.length;n++)u(t[n],this);else if(void 0!==e)for(n=0;n<arguments.length;n++)u(arguments[n],this);else void 0!==t&&u(t,this);return this},r.prototype.insertPrev=function(t,e){if(o.array(t))for(var n=t.length-1;n>=0;n--)c(t[n],this);else if(void 0!==e)for(n=arguments.length-1;n>=0;n--)c(arguments[n],this);else void 0!==t&&c(t,this);return this},r.prototype.insertAfter=function(t){return u(this,t),this},r.prototype.insertBefore=function(t){return c(this,t),this},r.prototype.remove=function(t,e){if(void 0!==t){if(o.array(t))for(var n=0;n<t.length;n++)l(t[n]).remove();else if(void 0!==e)for(n=0;n<arguments.length;n++)l(arguments[n]).remove();else l(t).remove();return this}return this._prev&&(this._prev._next=this._next),this._next&&(this._next._prev=this._prev),this._parent&&(this._parent._first===this&&(this._parent._first=this._next),this._parent._last===this&&(this._parent._last=this._prev),this._parent._flag(this,!1),this._parent._ts_children=++i,this._parent.touch()),this._prev=this._next=this._parent=null,this._ts_parent=++i,this},r.prototype.empty=function(){for(var t,e=this._first;t=e;)e=t._next,t._prev=t._next=t._parent=null,this._flag(t,!1);return this._first=this._last=null,this._ts_children=++i,this.touch(),this},r.prototype.touch=function(){return this._ts_touch=++i,this._parent&&this._parent.touch(),this},r.prototype._flag=function(t,e){if(void 0===e)return null!==this._flags&&this._flags[t]||0;if("string"==typeof t&&(e?(this._flags=this._flags||{},!this._flags[t]&&this._parent&&this._parent._flag(t,!0),this._flags[t]=(this._flags[t]||0)+1):this._flags&&this._flags[t]>0&&(1==this._flags[t]&&this._parent&&this._parent._flag(t,!1),this._flags[t]=this._flags[t]-1)),"object"==typeof t&&t._flags)for(var n in t._flags)t._flags[n]>0&&this._flag(n,e);return this},r.prototype.hitTest=function(t){return!!this.attr("spy")||t.x>=0&&t.x<=this._pin._width&&t.y>=0&&t.y<=this._pin._height},t.exports=r},function(t,e,n){n(44)(n(2).prototype,(function(t,e,n){t._flag(e,n)}))},function(t,e){t.exports=function(t,e){t._listeners=null,t.on=t.listen=function(t,n){if(!t||!t.length||"function"!=typeof n)return this;if(null===this._listeners&&(this._listeners={}),t=("string"!=typeof t&&"function"==typeof t.join?t.join(" "):t).match(/\S+/g))for(var r=0;r<t.length;r++){var o=t[r];this._listeners[o]=this._listeners[o]||[],this._listeners[o].push(n),"function"==typeof e&&e(this,o,!0)}return this},t.off=function(t,n){if(!t||!t.length||"function"!=typeof n)return this;if(null===this._listeners)return this;if(t=("string"!=typeof t&&"function"==typeof t.join?t.join(" "):t).match(/\S+/g))for(var r=0;r<t.length;r++){var o,i=t[r],a=this._listeners[i];a&&(o=a.indexOf(n))>=0&&(a.splice(o,1),a.length||delete this._listeners[i],"function"==typeof e&&e(this,i,!1))}return this},t.listeners=function(t){return this._listeners&&this._listeners[t]},t.publish=function(t,e){var n=this.listeners(t);if(!n||!n.length)return 0;for(var r=0;r<n.length;r++)n[r].apply(this,e);return n.length},t.trigger=function(t,e){return this.publish(t,e),this}}},function(t,e,n){var r=n(2);n(7),n(10);var o=n(13),i=n(6),a=n(14);function s(t,e){s._super.call(this),this.label("Root");var n=!0,r=this,i=0,a=function(s){if(!0!==n){o.tick=o.node=o.draw=0;var c=i||s,u=s-c;i=s;var l=r._tick(u,s,c);r._mo_touch!=r._ts_touch?(r._mo_touch=r._ts_touch,e(r),t(a)):l?t(a):n=!0,o.fps=u?1e3/u:0}};this.start=function(){return this.resume()},this.resume=function(){return n&&(this.publish("resume"),n=!1,t(a)),this},this.pause=function(){return n||this.publish("pause"),n=!0,this},this.touch_root=this.touch,this.touch=function(){return this.resume(),this.touch_root()}}s._super=r,s.prototype=i(s._super.prototype),r.root=function(t,e){return new s(t,e)},s.prototype.background=function(t){return this},s.prototype.viewport=function(t,e,n){if(void 0===t)return a({},this._viewport);this._viewport={width:t,height:e,ratio:n||1},this.viewbox();var r=a({},this._viewport);return this.visit({start:function(t){if(!t._flag("viewport"))return!0;t.publish("viewport",[r])}}),this},s.prototype.viewbox=function(t,e,n){"number"==typeof t&&"number"==typeof e&&(this._viewbox={width:t,height:e,mode:/^(in|out|in-pad|out-crop)$/.test(n)?n:"in-pad"});var r=this._viewbox,o=this._viewport;return o&&r?(this.pin({width:r.width,height:r.height}),this.scaleTo(o.width,o.height,r.mode)):o&&this.pin({width:o.width,height:o.height}),this}},function(t,e,n){var r=n(2),o=n(16);r.canvas=function(t,e,n){"string"==typeof t?"object"==typeof e||("function"==typeof e&&(n=e),e={}):("function"==typeof t&&(n=t),e={},t="2d");var r=document.createElement("canvas"),i=r.getContext(t,e),a=new o(r);return a.context=function(){return i},a.size=function(t,e,n){return n=n||1,r.width=t*n,r.height=e*n,this.src(r,n),this},a.canvas=function(t){return"function"==typeof t?t.call(this,i):void 0===t&&"function"==typeof n&&n.call(this,i),this},"function"==typeof n&&n.call(a,i),a}},function(t,e,n){var r=n(2);n(7),n(10);var o=n(48),i=n(6);function a(){a._super.call(this),this.label("Image"),this._textures=[],this._image=null}t.exports=a,r.image=function(t){var e=new a;return t&&e.image(t),e},a._super=r,a.prototype=i(a._super.prototype),a.prototype.setImage=function(t,e,n){return this.image(t,e,n)},a.prototype.image=function(t){return this._image=r.texture(t).one(),this.pin("width",this._image?this._image.width:0),this.pin("height",this._image?this._image.height:0),this._textures[0]=this._image.pipe(),this._textures.length=1,this},a.prototype.tile=function(t){return this._repeat(!1,t),this},a.prototype.stretch=function(t){return this._repeat(!0,t),this},a.prototype._repeat=function(t,e){var n=this;function r(t,e,r,o,i,a,s,c,u){var l=n._textures.length>t?n._textures[t]:n._textures[t]=n._image.pipe();l.src(e,r,o,i),l.dest(a,s,c,u)}this.untick(this._repeatTicker),this.tick(this._repeatTicker=function(){if(this._mo_stretch!=this._pin._ts_transform){this._mo_stretch=this._pin._ts_transform;var n=this.pin("width"),i=this.pin("height");this._textures.length=o(this._image,n,i,t,e,r)}})}},function(t,e){t.exports=function(t,e,n,r,o,i){var a=t.width,s=t.height,c=t.left,u=t.right,l=t.top,f=t.bottom;a=a-(c="number"==typeof c&&c==c?c:0)-(u="number"==typeof u&&u==u?u:0),s=s-(l="number"==typeof l&&l==l?l:0)-(f="number"==typeof f&&f==f?f:0),o||(e=Math.max(e-c-u,0),n=Math.max(n-l-f,0));var h=0;if(l>0&&c>0&&i(h++,0,0,c,l,0,0,c,l),f>0&&c>0&&i(h++,0,s+l,c,f,0,n+l,c,f),l>0&&u>0&&i(h++,a+c,0,u,l,e+c,0,u,l),f>0&&u>0&&i(h++,a+c,s+l,u,f,e+c,n+l,u,f),r)l>0&&i(h++,c,0,a,l,c,0,e,l),f>0&&i(h++,c,s+l,a,f,c,n+l,e,f),c>0&&i(h++,0,l,c,s,0,l,c,n),u>0&&i(h++,a+c,l,u,s,e+c,l,u,n),i(h++,c,l,a,s,c,l,e,n);else for(var g,p=c,d=e;d>0;){g=Math.min(a,d),d-=a;for(var y,m=l,v=n;v>0;)y=Math.min(s,v),v-=s,i(h++,c,l,g,y,p,m,g,y),d<=0&&(c&&i(h++,0,l,c,y,0,m,c,y),u&&i(h++,a+c,l,u,y,p+g,m,u,y)),m+=y;l&&i(h++,c,0,g,l,p,0,g,l),f&&i(h++,c,s+l,g,f,p,m,g,f),p+=g}return h}},function(t,e,n){var r=n(2);n(7),n(10);var o=n(6),i=n(17);function a(){a._super.call(this),this.label("Anim"),this._textures=[],this._fps=r.Anim.FPS,this._ft=1e3/this._fps,this._time=-1,this._repeat=0,this._index=0,this._frames=[];var t=0;this.tick((function(e,n,r){if(!(this._time<0||this._frames.length<=1)){var o=t!=r;if(t=n,o)return!0;if(this._time+=e,this._time<this._ft)return!0;var i=this._time/this._ft|0;return this._time-=i*this._ft,this.moveFrame(i),!(this._repeat>0&&(this._repeat-=i)<=0)||(this.stop(),this._callback&&this._callback(),!1)}}),!1)}r.anim=function(t,e){var n=new a;return n.frames(t).gotoFrame(0),e&&n.fps(e),n},a._super=r,a.prototype=o(a._super.prototype),r.Anim={FPS:15},a.prototype.fps=function(t){return void 0===t?this._fps:(this._fps=t>0?t:r.Anim.FPS,this._ft=1e3/this._fps,this)},a.prototype.setFrames=function(t,e,n){return this.frames(t,e,n)},a.prototype.frames=function(t){return this._index=0,this._frames=r.texture(t).array(),this.touch(),this},a.prototype.length=function(){return this._frames?this._frames.length:0},a.prototype.gotoFrame=function(t,e){return this._index=0|i.rotate(t,this._frames.length),e=e||!this._textures[0],this._textures[0]=this._frames[this._index],e&&(this.pin("width",this._textures[0].width),this.pin("height",this._textures[0].height)),this.touch(),this},a.prototype.moveFrame=function(t){return this.gotoFrame(this._index+t)},a.prototype.repeat=function(t,e){return this._repeat=t*this._frames.length-1,this._callback=e,this.play(),this},a.prototype.play=function(t){return void 0!==t?(this.gotoFrame(t),this._time=0):this._time<0&&(this._time=0),this.touch(),this},a.prototype.stop=function(t){return this._time=-1,void 0!==t&&this.gotoFrame(t),this}},function(t,e,n){var r=n(2);n(7),n(10);var o=n(6),i=n(15);function a(){a._super.call(this),this.label("String"),this._textures=[]}r.string=function(t){return(new a).frames(t)},a._super=r,a.prototype=o(a._super.prototype),a.prototype.setFont=function(t,e,n){return this.frames(t,e,n)},a.prototype.frames=function(t){return this._textures=[],"string"==typeof t?(t=r.texture(t),this._item=function(e){return t.one(e)}):"object"==typeof t?this._item=function(e){return t[e]}:"function"==typeof t&&(this._item=t),this},a.prototype.setValue=function(t,e,n){return this.value(t,e,n)},a.prototype.value=function(t){if(void 0===t)return this._value;if(this._value===t)return this;this._value=t,null===t?t="":"string"==typeof t||i.array(t)||(t=t.toString()),this._spacing=this._spacing||0;for(var e=0,n=0,r=0;r<t.length;r++){var o=this._textures[r]=this._item(t[r]);e+=r>0?this._spacing:0,o.dest(e,0),e+=o.width,n=Math.max(n,o.height)}return this.pin("width",e),this.pin("height",n),this._textures.length=t.length,this}},function(t,e,n){var r=n(2);n(7),n(10);n(6);r.row=function(t){return r.create().row(t).label("Row")},r.prototype.row=function(t){return this.sequence("row",t),this},r.column=function(t){return r.create().column(t).label("Row")},r.prototype.column=function(t){return this.sequence("column",t),this},r.sequence=function(t,e){return r.create().sequence(t,e).label("Sequence")},r.prototype.sequence=function(t,e){return this._padding=this._padding||0,this._spacing=this._spacing||0,this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){if(this._mo_seq!=this._ts_touch){this._mo_seq=this._ts_touch;var n=this._mo_seqAlign!=this._ts_children;this._mo_seqAlign=this._ts_children;for(var r,o=0,i=0,a=this.first(!0),s=!0;r=a;){a=r.next(!0),r.matrix(!0);var c=r.pin("boxWidth"),u=r.pin("boxHeight");"column"==t?(!s&&(i+=this._spacing),r.pin("offsetY")!=i&&r.pin("offsetY",i),o=Math.max(o,c),i+=u,n&&r.pin("alignX",e)):"row"==t&&(!s&&(o+=this._spacing),r.pin("offsetX")!=o&&r.pin("offsetX",o),o+=c,i=Math.max(i,u),n&&r.pin("alignY",e)),s=!1}o+=2*this._padding,i+=2*this._padding,this.pin("width")!=o&&this.pin("width",o),this.pin("height")!=i&&this.pin("height",i)}}),this},r.box=function(){return r.create().box().label("Box")},r.prototype.box=function(){return this._padding=this._padding||0,this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){if(this._mo_box!=this._ts_touch){this._mo_box=this._ts_touch;for(var t,e=0,n=0,r=this.first(!0);t=r;){r=t.next(!0),t.matrix(!0);var o=t.pin("boxWidth"),i=t.pin("boxHeight");e=Math.max(e,o),n=Math.max(n,i)}e+=2*this._padding,n+=2*this._padding,this.pin("width")!=e&&this.pin("width",e),this.pin("height")!=n&&this.pin("height",n)}}),this},r.layer=function(){return r.create().layer().label("Layer")},r.prototype.layer=function(){return this.untick(this._layoutTiker),this.tick(this._layoutTiker=function(){var t=this.parent();if(t){var e=t.pin("width");this.pin("width")!=e&&this.pin("width",e);var n=t.pin("height");this.pin("height")!=n&&this.pin("height",n)}},!0),this},r.prototype.padding=function(t){return this._padding=t,this},r.prototype.spacing=function(t){return this._spacing=t,this}},function(t,e,n){var r=n(53),o=n(2),i=n(7);function a(t,e,n){this._end={},this._duration=e||400,this._delay=n||0,this._owner=t,this._time=0}function s(t,e,n,r){"number"==typeof t.pin(n)?e[n]=r:"number"==typeof t.pin(n+"X")&&"number"==typeof t.pin(n+"Y")&&(e[n+"X"]=r,e[n+"Y"]=r)}o.prototype.tween=function(t,e,n){if("number"!=typeof t?(n=t,e=0,t=0):"number"!=typeof e&&(n=e,e=0),!this._tweens){this._tweens=[];var r=0;this.tick((function(t,e,n){if(this._tweens.length){var o=r!=n;if(r=e,o)return!0;var i=this._tweens[0],a=i.tick(this,t,e,n);if(a&&i===this._tweens[0]&&this._tweens.shift(),"function"==typeof a)try{a.call(this)}catch(t){console.log(t)}return"object"==typeof a&&this._tweens.unshift(a),!0}}),!0)}this.touch(),n||(this._tweens.length=0);var o=new a(this,t,e);return this._tweens.push(o),o},a.prototype.tick=function(t,e,n,r){if(this._time+=e,!(this._time<this._delay)){var o,i,a=this._time-this._delay;if(!this._start)for(var s in this._start={},this._end)this._start[s]=this._owner.pin(s);a<this._duration?(o=a/this._duration,i=!1):(o=1,i=!0),"function"==typeof this._easing&&(o=this._easing(o));var c=1-o;for(var s in this._end)this._owner.pin(s,this._start[s]*c+this._end[s]*o);return i?this._next||this._done||!0:void 0}},a.prototype.tween=function(t,e){return this._next=new a(this._owner,t,e)},a.prototype.duration=function(t){return this._duration=t,this},a.prototype.delay=function(t){return this._delay=t,this},a.prototype.ease=function(t){return this._easing=r(t),this},a.prototype.done=function(t){return this._done=t,this},a.prototype.hide=function(){return this.done((function(){this.hide()})),this},a.prototype.remove=function(){return this.done((function(){this.remove()})),this},a.prototype.pin=function(t,e){if("object"==typeof t)for(var n in t)s(this._owner,this._end,n,t[n]);else void 0!==e&&s(this._owner,this._end,t,e);return this},i._add_shortcuts(a),a.prototype.then=function(t){return this.done(t),this},a.prototype.clear=function(t){return this},t.exports=a},function(t,e){function n(t){return t}var r={},o={},i={};function a(t){if("function"==typeof t)return t;if("string"!=typeof t)return n;var e=r[t];if(e)return e;var a=/^(\w+)(-(in|out|in-out|out-in))?(\((.*)\))?$/i.exec(t);if(!a||!a.length)return n;var s=i[a[1]],c=o[a[3]],u=a[5];return e=s&&s.fn?s.fn:s&&s.fc?s.fc.apply(s.fc,u&&u.replace(/\s+/,"").split(",")):n,c&&(e=c.fn(e)),r[t]=e,e}a.add=function(t){for(var e=(t.name||t.mode).split(/\s+/),n=0;n<e.length;n++){var r=e[n];r&&((t.name?i:o)[r]=t)}},a.add({mode:"in",fn:function(t){return t}}),a.add({mode:"out",fn:function(t){return function(e){return 1-t(1-e)}}}),a.add({mode:"in-out",fn:function(t){return function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2}}}),a.add({mode:"out-in",fn:function(t){return function(e){return e<.5?1-t(2*(1-e))/2:t(2*e)/2}}}),a.add({name:"linear",fn:function(t){return t}}),a.add({name:"quad",fn:function(t){return t*t}}),a.add({name:"cubic",fn:function(t){return t*t*t}}),a.add({name:"quart",fn:function(t){return t*t*t*t}}),a.add({name:"quint",fn:function(t){return t*t*t*t*t}}),a.add({name:"sin sine",fn:function(t){return 1-Math.cos(t*Math.PI/2)}}),a.add({name:"exp expo",fn:function(t){return 0==t?0:Math.pow(2,10*(t-1))}}),a.add({name:"circle circ",fn:function(t){return 1-Math.sqrt(1-t*t)}}),a.add({name:"bounce",fn:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}}),a.add({name:"poly",fc:function(t){return function(e){return Math.pow(e,t)}}}),a.add({name:"elastic",fc:function(t,e){t=t||1;var n=(e=e||.45)/(2*Math.PI)*Math.asin(1/t);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*(2*Math.PI)/e)}}}),a.add({name:"back",fc:function(t){return t=void 0!==t?t:1.70158,function(e){return e*e*((t+1)*e-t)}}}),t.exports=a},function(t,e,n){function r(t,e){if(this instanceof r){var n=t.viewport().ratio||1;t.on("viewport",(function(t){n=t.ratio||n})),this.x=0,this.y=0,this.toString=function(){return(0|this.x)+"x"+(0|this.y)},this.locate=function(t){!function(t,e,n){e.touches&&e.touches.length?(n.x=e.touches[0].clientX,n.y=e.touches[0].clientY):(n.x=e.clientX,n.y=e.clientY);var r=t.getBoundingClientRect();n.x-=r.left,n.y-=r.top,n.x-=0|t.clientLeft,n.y-=0|t.clientTop}(e,t,this),this.x*=n,this.y*=n},this.lookup=function(e,n){this.type=e,this.root=t,this.event=null,n.length=0,this.collect=n,this.root.visit(this.visitor,this)},this.publish=function(e,n,r){if(this.type=e,this.root=t,this.event=n,this.collect=!1,this.timeStamp=Date.now(),"mousemove"!==e&&"touchmove"!==e&&DEBUG&&console.log(this.type+" "+this),r){for(;r.length&&!this.visitor.end(r.shift(),this););r.length=0}else this.root.visit(this.visitor,this)},this.visitor={reverse:!0,visible:!0,start:function(t,e){return!t._flag(e.type)},end:function(t,e){o.raw=e.event,o.type=e.type,o.timeStamp=e.timeStamp,o.abs.x=e.x,o.abs.y=e.y;var n=t.listeners(e.type);if(n&&(t.matrix().inverse().map(e,o),(t===e.root||t.hitTest(o))&&(e.collect&&e.collect.push(t),e.event))){for(var r=!1,i=0;i<n.length;i++)r=!!n[i].call(t,o)||r;return r}}}}}"undefined"==typeof DEBUG&&(DEBUG=!0),n(2)._load((function(t,e){r.subscribe(t,e)})),r.CLICK="click",r.START="touchstart mousedown",r.MOVE="touchmove mousemove",r.END="touchend mouseup",r.CANCEL="touchcancel mousecancel",r.subscribe=function(t,e){if(!t.mouse){t.mouse=new r(t,e),e.addEventListener("touchstart",i),e.addEventListener("touchend",s),e.addEventListener("touchmove",a),e.addEventListener("touchcancel",c),e.addEventListener("mousedown",i),e.addEventListener("mouseup",s),e.addEventListener("mousemove",a),document.addEventListener("mouseup",c),window.addEventListener("blur",c);var n=[],o=[]}function i(e){e.preventDefault(),t.mouse.locate(e),t.mouse.publish(e.type,e),t.mouse.lookup("click",n),t.mouse.lookup("mousecancel",o)}function a(e){e.preventDefault(),t.mouse.locate(e),t.mouse.publish(e.type,e)}function s(e){e.preventDefault(),t.mouse.publish(e.type,e),n.length&&t.mouse.publish("click",e,n),o.length=0}function c(e){o.length&&t.mouse.publish("mousecancel",e,o),n.length=0}};var o={},i={};function a(t,e,n){Object.defineProperty(t,e,{value:n})}a(o,"clone",(function(t){return(t=t||{}).x=this.x,t.y=this.y,t})),a(o,"toString",(function(){return(0|this.x)+"x"+(0|this.y)+" ("+this.abs+")"})),a(o,"abs",i),a(i,"clone",(function(t){return(t=t||{}).x=this.x,t.y=this.y,t})),a(i,"toString",(function(){return(0|this.x)+"x"+(0|this.y)})),t.exports=r},function(t,e,n){"undefined"==typeof DEBUG&&(DEBUG=!0);var r,o=n(2);o._supported=!(!(r=document.createElement("canvas")).getContext||!r.getContext("2d")),window.addEventListener("load",(function(){DEBUG&&console.log("On load."),o._supported&&o.start()}),!1),o.config({"app-loader":function(t,e){var n,r=(e=e||{}).canvas,i=null,a=!1,s=0,c=0;"string"==typeof r&&(r=document.getElementById(r));r||(r=document.getElementById("cutjs")||document.getElementById("stage"));if(!r){a=!0,DEBUG&&console.log("Creating Canvas..."),(r=document.createElement("canvas")).style.position="absolute",r.style.top="0",r.style.left="0";var u=document.body;u.insertBefore(r,u.firstChild)}i=r.getContext("2d");var l=window.devicePixelRatio||1,f=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1;n=l/f;var h=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)};DEBUG&&console.log("Creating stage...");var g=o.root(h,p);function p(){i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,s,c),g.render(i)}function d(){a?(s=window.innerWidth>0?window.innerWidth:screen.width,c=window.innerHeight>0?window.innerHeight:screen.height,r.style.width=s+"px",r.style.height=c+"px"):(s=r.clientWidth,c=r.clientHeight),s*=n,c*=n,r.width===s&&r.height===c||(r.width=s,r.height=c,DEBUG&&console.log("Resize: "+s+" x "+c+" / "+n),g.viewport(s,c,n),p())}g.background=function(t){return r.style.backgroundColor=t,this},t(g,r),d(),window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1)},"image-loader":function(t,e,n){DEBUG&&console.log("Loading image: "+t);var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src=t}})},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&g())}function g(){if(!l){var t=s(h);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new p(t,e)),1!==u.length||l||s(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}}]);